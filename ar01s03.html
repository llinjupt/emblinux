<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>3. ARM&#23547;&#22336;&#26041;&#24335;</title><link rel="stylesheet" href="styles.css" type="text/css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="index.html" title="Linux&#20869;&#26680;&#23398;&#20064;&#21644;&#30740;&#31350;&#21450;&#23884;&#20837;&#24335;(ARM)&#23398;&#20064;&#21644;&#30740;&#31350;&#30340;&#24320;&#25918;&#25991;&#26723;"><link rel="up" href="index.html" title="Linux&#20869;&#26680;&#23398;&#20064;&#21644;&#30740;&#31350;&#21450;&#23884;&#20837;&#24335;(ARM)&#23398;&#20064;&#21644;&#30740;&#31350;&#30340;&#24320;&#25918;&#25991;&#26723;"><link rel="prev" href="ar01s02.html" title="2. ARM&#21644;&#27719;&#32534;"><link rel="next" href="ar01s04.html" title="4. &#25209;&#37327;&#21152;&#36733;&#21644;&#23384;&#20648;&#25351;&#20196;&#23454;&#36341;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3. ARM&#23547;&#22336;&#26041;&#24335;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s02.html">&#19978;&#19968;&#39029;</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ar01s04.html">&#19979;&#19968;&#39029;</a></td></tr></table><hr></div><div class="sect1" title="3. ARM&#23547;&#22336;&#26041;&#24335;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp80107868"></a>3. ARM&#23547;&#22336;&#26041;&#24335;</h2></div></div></div>
<p>&#23547;&#22336;&#26041;&#24335;&#26159;&#26681;&#25454;&#25351;&#20196;&#20013;&#32473;&#20986;&#30340;&#22320;&#22336;&#30721;&#23383;&#27573;&#26469;&#23454;&#29616;&#23547;&#25214;&#30495;&#23454;&#25805;&#20316;&#25968;&#22320;&#22336;&#30340;&#26041;&#24335;&#12290;ARM&#22788;&#29702;&#22120;&#20855;&#26377;9&#31181;&#22522;&#26412;&#23547;&#22336;&#26041;&#24335;&#12290;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">1.&#31435;&#21363;&#25968;&#23547;&#22336;</li><li class="listitem">2.&#23492;&#23384;&#22120;&#23547;&#22336;</li><li class="listitem">3.&#23492;&#23384;&#22120;&#38388;&#25509;&#23547;&#22336;</li><li class="listitem">4.&#22522;&#22336;&#23547;&#22336;</li><li class="listitem">5.&#23492;&#23384;&#22120;&#31227;&#20301;&#23547;&#22336;</li><li class="listitem">6.&#22534;&#26632;&#23547;&#22336;</li><li class="listitem">7.&#22810;&#23492;&#23384;&#22120;&#23547;&#22336;</li><li class="listitem">8.&#22359;&#25335;&#36125;&#23547;&#22336;</li><li class="listitem">9.&#30456;&#23545;&#23547;&#22336;</li></ul></div><p>
</p>
<div class="sect2" title="3.1. &#31435;&#21363;&#25968;&#23547;&#22336;"><div class="titlepage"><div><div><h3 class="title"><a name="idp80220572"></a>3.1. &#31435;&#21363;&#25968;&#23547;&#22336;</h3></div></div></div>
	<p>
	</p><div class="figure"><a name="idp80221060"></a><p class="title"><b>&#22270; 6. &#31435;&#21363;&#25968;&#23547;&#22336;&#31034;&#20363;</b></p><div class="figure-contents"><div><img src="images/addr_immed.jpg" alt="&#31435;&#21363;&#25968;&#23547;&#22336;&#31034;&#20363;"></div></div></div><p><br class="figure-break">	
&#31435;&#21363;&#25968;&#23547;&#22336;&#25351;&#20196;&#20013;&#30340;&#25805;&#20316;&#30721;&#23383;&#27573;&#21518;&#38754;&#30340;&#31532;&#19968;&#20010;&#25805;&#20316;&#25968;&#20998;&#21363;&#26159;&#25805;&#20316;&#25968;&#26412;&#36523;&#65292;&#20063;&#23601;&#26159;&#35828;&#65292;&#25968;&#25454;&#23601;&#21253;&#21547;&#22312;&#25351;&#20196;&#24403;&#20013;&#65292;&#21462;&#20986;&#25351;&#20196;&#20063;&#23601;&#21462;&#20986;&#20102;&#21487;&#20197;&#31435;&#21363;&#20351;&#29992;&#30340;&#25805;&#20316;&#25968;(&#36825;&#26679;&#30340;&#25968;&#31216;&#20026;&#31435;&#21363;&#25968;)&#12290;&#31435;&#21363;&#23547;&#22336;&#25351;&#20196;&#20030;&#20363;&#22914;&#19979;&#65306; 
</p><pre class="programlisting">
mov  r1, #0x12  @&#23558;&#31435;&#21363;&#25968;0x12&#35013;&#20837;r1&#23492;&#23384;&#22120; 
subs r1, r1, #1 @r1&#20943;1&#65292;&#32467;&#26524;&#25918;&#20837;r1&#65292;&#24182;&#19988;&#24433;&#21709;&#26631;&#24535;&#20301;
</pre><p>		
&#27880;&#24847;:&#31435;&#21363;&#25968;&#35201;&#20197;&#8221;#&#8221;&#21495;&#20026;&#21069;&#32512;&#12290;&#34920;&#31034;&#36827;&#21046;&#30340;&#21069;&#32512;&#22914;&#19979;&#65306;
	</p><div class="table"><a name="idp80220692"></a><p class="title"><b>&#34920; 5. &#36827;&#21046;&#21069;&#32512;</b></p><div class="table-contents">
	<table summary="&#36827;&#21046;&#21069;&#32512;" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#36827;&#21046;&#31867;&#22411;</th><th>&#25903;&#25345;&#30340;&#21069;&#32512;</th></tr></thead><tbody><tr><td>&#21313;&#36827;&#21046;</td><td>&#26080;</td></tr><tr><td>&#21313;&#20845;&#36827;&#21046;</td><td>0x/0X</td></tr><tr><td>&#20843;&#36827;&#21046;</td><td>0</td></tr><tr><td>&#20108;&#36827;&#21046;</td><td>0b/0B</td></tr></tbody></table>
	</div></div><p><br class="table-break">
	</p>	
</div>
<div class="sect2" title="3.2. &#23492;&#23384;&#22120;&#23547;&#22336;"><div class="titlepage"><div><div><h3 class="title"><a name="idp80226124"></a>3.2. &#23492;&#23384;&#22120;&#23547;&#22336;</h3></div></div></div>
	<p>
	</p><div class="figure"><a name="idp80226508"></a><p class="title"><b>&#22270; 7. &#23492;&#23384;&#22120;&#23547;&#22336;&#31034;&#20363;</b></p><div class="figure-contents"><div><img src="images/addr_register.jpg" alt="&#23492;&#23384;&#22120;&#23547;&#22336;&#31034;&#20363;"></div></div></div><p><br class="figure-break">		
&#25805;&#20316;&#25968;&#30340;&#20540;&#22312;&#23492;&#23384;&#22120;&#20013;&#65292;&#25351;&#20196;&#20013;&#30340;&#22320;&#22336;&#30721;&#23383;&#27573;&#25351;&#20986;&#30340;&#26159;&#23492;&#23384;&#22120;&#32534;&#21495;&#65292;&#25351;&#20196;&#25191;&#34892;&#26102;&#30452;&#25509;&#21462;&#20986;&#23492;&#23384;&#22120;&#20540;&#26469;&#25805;&#20316;&#12290;&#23492;&#23384;&#22120;&#23547;&#22336;&#25351;&#20196;&#20030;&#20363;&#22914;&#19979;&#65306; 
</p><pre class="programlisting">
mov r1, r2      @&#23558;r2&#30340;&#20540;&#23384;&#20837;r1
sub r0, r1, r2  @&#23558;r1&#30340;&#20540;&#20943;&#21435;r2&#30340;&#20540;&#65292;&#32467;&#26524;&#20445;&#23384;&#21040;r0 
</pre><p>	
	</p>	
</div>
<div class="sect2" title="3.3. &#23492;&#23384;&#22120;&#38388;&#25509;&#23547;&#22336;"><div class="titlepage"><div><div><h3 class="title"><a name="idp80227844"></a>3.3. &#23492;&#23384;&#22120;&#38388;&#25509;&#23547;&#22336;</h3></div></div></div>
	<p>
	</p><div class="figure"><a name="idp80228228"></a><p class="title"><b>&#22270; 8. &#23492;&#23384;&#22120;&#38388;&#25509;&#23547;&#22336;&#31034;&#20363;</b></p><div class="figure-contents"><div><img src="images/addr_inimmed.jpg" alt="&#23492;&#23384;&#22120;&#38388;&#25509;&#23547;&#22336;&#31034;&#20363;"></div></div></div><p><br class="figure-break">		
&#23492;&#23384;&#22120;&#38388;&#25509;&#23547;&#22336;&#25351;&#20196;&#20013;&#30340;&#22320;&#22336;&#30721;&#32473;&#20986;&#30340;&#26159;&#19968;&#20010;&#36890;&#29992;&#23492;&#23384;&#22120;&#30340;&#32534;&#21495;&#65292;&#25152;&#38656;&#30340;&#25805;&#20316;&#25968;&#20445;&#23384;&#22312;&#23492;&#23384;&#22120;&#25351;&#23450;&#22320;&#22336;&#30340;&#23384;&#20648;&#21333;&#20803;&#20013;&#65292;&#21363;&#23492;&#23384;&#22120;&#20026;&#25805;&#20316;&#25968;&#30340;&#22320;&#22336;&#25351;&#38024;&#12290;&#23492;&#23384;&#22120;&#38388;&#25509;&#23547;&#22336;&#25351;&#20196;&#20030;&#20363;&#22914;&#19979;&#65306; 
</p><pre class="programlisting">
ldr	r1,[r2]	@&#23558;r2&#25351;&#21521;&#30340;&#23384;&#20648;&#21333;&#20803;&#30340;&#25968;&#25454;&#35835;&#20986;&#20445;&#23384;&#22312;r1&#20013; 
str r1,[r2] @&#23558;r1&#30340;&#20869;&#23481;&#20445;&#23384;&#21040;r2&#25351;&#21521;&#30340;&#23384;&#20648;&#21333;
</pre><p>
	</p>		
</div>
<div class="sect2" title="3.4. &#22522;&#22336;&#23547;&#22336;"><div class="titlepage"><div><div><h3 class="title"><a name="idp80229820"></a>3.4. &#22522;&#22336;&#23547;&#22336;</h3></div></div></div>
	<p>
	</p><div class="figure"><a name="idp80230204"></a><p class="title"><b>&#22270; 9. &#22522;&#22336;&#23547;&#22336;&#31034;&#20363;</b></p><div class="figure-contents"><div><img src="images/addr_base.jpg" alt="&#22522;&#22336;&#23547;&#22336;&#31034;&#20363;"></div></div></div><p><br class="figure-break">		
&#22522;&#22336;&#23547;&#22336;&#26159;&#23545;&#23492;&#23384;&#22120;&#38388;&#25509;&#23547;&#22336;&#30340;&#25193;&#23637;&#65292;&#23427;&#23558;&#22522;&#22336;&#23492;&#23384;&#22120;&#30340;&#20869;&#23481;&#19982;&#25351;&#20196;&#20013;&#32473;&#20986;&#30340;&#20559;&#31227;&#37327;&#30456;&#21152;&#65292;&#24418;&#25104;&#25805;&#20316;&#25968;&#30340;&#26377;&#25928;&#22320;&#22336;&#12290;&#22522;&#22336;&#23547;&#22336;&#29992;&#20110;&#35775;&#38382;&#22522;&#22336;&#38468;&#36817;&#30340;&#23384;&#20648;&#21333;&#20803;&#65292;&#24120;&#29992;&#20110;&#26597;&#34920;&#12289;&#25968;&#32452;&#25805;&#20316;&#12289;&#21151;&#33021;&#37096;&#20214;&#23492;&#23384;&#22120;&#35775;&#38382;&#31561;&#12290;&#22522;&#22336;&#23547;&#22336;&#25351;&#20196;&#20030;&#20363;&#22914;&#19979;&#65306; 
</p><pre class="programlisting">
ldr	r1,[r2, #0x08]	  @&#35835;&#21462;r2+0x08&#22320;&#22336;&#19978;&#30340;&#23384;&#20648;&#21333;&#20803;&#30340;&#20869;&#23481;&#65292;&#25918;&#20837;r1&#12290;
</pre><p>
</p><pre class="programlisting">
/* &#21069;&#32034;&#24341;&#23547;&#22336; */
ldr	r1,[r2, #0x08]	  @r1 &lt;- [r2 + 0x08]
ldr	r1,[r2, #0x08]!	  @r1 &lt;- [r2 + 0x08], r2 &lt;- r2 + 0x08

/* &#21518;&#32034;&#24341;&#23547;&#22336; */
ldr r1, [r2], #0x08    @r1 &lt;- r2, r2 &lt;- r2 + 0x08
</pre><p>
&#22522;&#22336;&#23547;&#22336;&#26681;&#25454;&#25968;&#25454;&#20256;&#36865;&#21644;&#22522;&#22320;&#22336;&#30340;&#21464;&#21160;&#39034;&#24207;&#21448;&#20998;&#20026;&#20004;&#31867;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#21069;&#32034;&#24341;&#23547;&#22336;&#26159;&#23558;&#22522;&#22336;&#19982;&#20559;&#31227;&#37327;&#30456;&#21152;&#20316;&#20026;&#20256;&#36865;&#25968;&#25454;&#30340;&#22320;&#22336;&#65292;&#20256;&#36865;&#25968;&#25454;&#21518;&#33258;&#21160;&#23558;&#25968;&#25454;&#30340;&#22320;&#22336;&#20256;&#36865;&#32473;&#22522;&#22336;&#23492;&#23384;&#22120;&#12290;</li><li class="listitem">&#21518;&#32034;&#24341;&#23547;&#22336;&#26159;&#23558;&#22522;&#22336;&#20316;&#20026;&#20256;&#36865;&#25968;&#25454;&#30340;&#22320;&#22336;&#65292;&#20256;&#36865;&#25968;&#25454;&#21518;&#33258;&#21160;&#23558;&#22522;&#22336;&#30340;&#20869;&#23481;&#19982;&#20559;&#31227;&#37327;&#30456;&#21152;&#20256;&#36865;&#32473;&#22522;&#22336;&#23492;&#23384;&#22120;&#12290;</li></ul></div><p> 
	</p>		
</div>
<div class="sect2" title="3.5. &#23492;&#23384;&#22120;&#31227;&#20301;&#23547;&#22336;"><div class="titlepage"><div><div><h3 class="title"><a name="idp80232692"></a>3.5. &#23492;&#23384;&#22120;&#31227;&#20301;&#23547;&#22336;</h3></div></div></div>
	<p>
	</p><div class="figure"><a name="idp80233924"></a><p class="title"><b>&#22270; 10. &#23492;&#23384;&#22120;&#31227;&#20301;&#23547;&#22336;&#31034;&#20363;</b></p><div class="figure-contents"><div><img src="images/addr_offset.jpg" alt="&#23492;&#23384;&#22120;&#31227;&#20301;&#23547;&#22336;&#31034;&#20363;"></div></div></div><p><br class="figure-break">		
&#23492;&#23384;&#22120;&#31227;&#20301;&#23547;&#22336;&#26159;ARM&#25351;&#20196;&#38598;&#29305;&#26377;&#30340;&#23547;&#22336;&#26041;&#24335;&#12290;&#24403;&#31532;2&#20010;&#25805;&#20316;&#25968;&#26159;&#23492;&#23384;&#22120;&#31227;&#20301;&#26041;&#24335;&#26102;&#65292;&#31532;2&#20010;&#23492;&#23384;&#22120;&#25805;&#20316;&#25968;&#22312;&#19982;&#31532;1&#20010;&#25805;&#20316;&#25968;&#32467;&#21512;&#20043;&#21069;&#65292;&#36873;&#25321;&#36827;&#34892;&#31227;&#20301;&#25805;&#20316;&#12290;&#23492;&#23384;&#22120;&#31227;&#20301;&#23547;&#22336;&#25351;&#20196;&#20030;&#20363;&#22914;&#19979;&#65306;
</p><pre class="programlisting">
mov	 r1, r2, lsl #r0   ;r2&#30340;&#20540;&#24038;&#31227;r0&#20301;&#65292;&#32467;&#26524;&#25918;&#20837;r1&#65292;&#21363;&#26159;r1 = r2 * 8
mov	 r1, r2, lsl #4    ;&#36825;&#37324;&#30340;r2&#30340;&#20540;&#24038;&#31227;4&#20301;&#65292;&#32467;&#26524;&#25918;&#20837;r1
</pre><p>
&#23454;&#38469;&#32534;&#35793;&#36807;&#31243;&#20013;&#34987;&#36716;&#21270;&#20026;&#31227;&#20301;&#25351;&#20196;&#65306;
</p><pre class="programlisting">
lsl	r1, r2, r0
lsl	r1, r2, #4
</pre><p>
&#19982;&#19978;&#23545;&#24212;&#65292;&#19981;&#21516;&#30340;&#31227;&#20301;&#25351;&#20196;&#23558;&#23545;&#24212;&#19981;&#21516;&#30340;&#23492;&#23384;&#22120;&#31227;&#20301;&#23547;&#22336;&#26041;&#24335;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">lsl&#36923;&#36753;&#24038;&#31227;&#25805;&#20316;&#65306;&#21487;&#23436;&#25104;&#23545;&#36890;&#29992;&#23492;&#23384;&#22120;&#20013;&#30340;&#20869;&#23481;&#36827;&#34892;&#36923;&#36753;&#24038;&#31227;&#25805;&#20316;&#65292;&#25353;&#25805;&#20316;&#25968;&#25152;&#25351;&#23450;&#30340;&#25968;&#37327;&#21521;&#24038;&#31227;&#20301;&#65292;&#20302;&#20301;&#29992;&#38646;&#26469;&#22635;&#20805;&#12290;&#20854;&#20013;&#65292;&#25805;&#20316;&#25968;&#21487;&#20197;&#26159;&#36890;&#29992;&#23492;&#23384;&#22120;&#65292;&#20063;&#21487;&#20197;&#26159;&#31435;&#21363;&#25968;&#12290;</li><li class="listitem">lsr&#36923;&#36753;&#21491;&#31227;&#25805;&#20316;&#65306;&#21487;&#23436;&#25104;&#23545;&#36890;&#29992;&#23492;&#23384;&#22120;&#20013;&#30340;&#20869;&#23481;&#36827;&#34892;&#21491;&#31227;&#25805;&#20316;&#65292;&#25353;&#25805;&#20316;&#25968;&#25152;&#25351;&#23450;&#30340;&#25968;&#37327;&#21521;&#21491;&#31227;&#20301;&#65292;&#24038;&#31471;&#29992;&#38646;&#26469;&#22635;&#20805;&#12290;&#20854;&#20013;&#65292;&#25805;&#20316;&#25968;&#21487;&#20197;&#26159;&#36890;&#29992;&#23492;&#23384;&#22120;&#65292;&#20063;&#21487;&#20197;&#26159;&#31435;&#21363;&#25968;</li><li class="listitem">asr&#31639;&#26415;&#21491;&#31227;&#25805;&#20316;&#65306;&#21487;&#23436;&#25104;&#23545;&#36890;&#29992;&#23492;&#23384;&#22120;&#20013;&#30340;&#20869;&#23481;&#36827;&#34892;&#21491;&#31227;&#25805;&#20316;&#65292;&#25353;&#25805;&#20316;&#25968;&#25152;&#25351;&#23450;&#30340;&#25968;&#37327;&#21521;&#21491;&#31227;&#20301;&#65292;&#24038;&#31471;&#29992;&#31532;31&#20301;&#30340;&#20540;&#26469;&#22635;&#20805;&#12290;&#20854;&#20013;&#65292;&#25805;&#20316;&#25968;&#21487;&#20197;&#26159;&#36890;&#29992;&#23492;&#23384;&#22120;&#65292;&#20063;&#21487;&#20197;&#26159;&#31435;&#21363;&#25968;&#12290;</li><li class="listitem">ror&#24490;&#29615;&#21491;&#31227;&#25805;&#20316;&#65306;&#21487;&#23436;&#25104;&#23545;&#36890;&#29992;&#23492;&#23384;&#22120;&#20013;&#30340;&#20869;&#23481;&#36827;&#34892;&#24490;&#29615;&#21491;&#31227;&#25805;&#20316;&#65292;&#25353;&#25805;&#20316;&#25968;&#25152;&#25351;&#23450;&#30340;&#25968;&#37327;&#21521;&#21491;&#24490;&#29615;&#31227;&#20301;&#65292;&#24038;&#31471;&#29992;&#21491;&#31471;&#31227;&#20986;&#30340;&#20301;&#26469;&#22635;&#20805;&#12290;&#20854;&#20013;&#65292;&#25805;&#20316;&#25968;&#21487;&#20197;&#26159;&#36890;&#29992;&#23492;&#23384;&#22120;&#65292;&#20063;&#21487;&#20197;&#26159;&#31435;&#21363;&#25968;&#12290;</li><li class="listitem">rrx&#24102;&#25193;&#23637;&#30340;&#24490;&#29615;&#21491;&#31227;&#25805;&#20316;&#65306;&#21487;&#23436;&#25104;&#23545;&#36890;&#29992;&#23492;&#23384;&#22120;&#20013;&#30340;&#20869;&#23481;&#36827;&#34892;&#24102;&#25193;&#23637;&#30340;&#24490;&#29615;&#21491;&#31227;&#25805;&#20316;&#65292;&#21521;&#21491;&#24490;&#29615;&#31227;1&#20301;&#65292;&#24038;&#31471;&#29992;&#36827;&#20301;&#26631;&#24535;&#20301;C&#26469;&#22635;&#20805;&#12290;
</li></ul></div><p>
&#30446;&#21069;ARM&#25903;&#25345;&#30340;&#31227;&#20301;&#25351;&#20196;&#21644;&#23427;&#20204;&#30340;&#21306;&#21035;&#22914;&#19979;&#22270;&#65306;
	</p><div class="figure"><a name="idp80238308"></a><p class="title"><b>&#22270; 11. ARM&#31227;&#20301;&#36816;&#31639;</b></p><div class="figure-contents"><div><img src="images/arm_offset.jpg" alt="ARM&#31227;&#20301;&#36816;&#31639;"></div></div></div><p><br class="figure-break">		
	</p>
</div>
<div class="sect2" title="3.6. &#22534;&#26632;&#23547;&#22336;"><div class="titlepage"><div><div><h3 class="title"><a name="idp80239060"></a>3.6. &#22534;&#26632;&#23547;&#22336;</h3></div></div></div>
	<p>
&#22312;2.3. &#25968;&#25454;&#26632;&#30340;&#20351;&#29992;&#20013;&#20171;&#32461;&#20102;&#22235;&#31181;&#22534;&#26632;&#31867;&#22411;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#28385;&#36882;&#22686;&#65306;&#22534;&#26632;&#21521;&#19978;&#22686;&#38271;&#65292;&#22534;&#26632;&#25351;&#38024;&#25351;&#21521;&#20869;&#21547;&#26377;&#25928;&#25968;&#25454;&#39033;&#30340;&#26368;&#39640;&#22320;&#22336;&#12290;&#25351;&#20196;&#22914;ldmfa&#65292;stmfa&#31561;&#65307;</li><li class="listitem">&#31354;&#36882;&#22686;&#65306;&#22534;&#26632;&#21521;&#19978;&#22686;&#38271;&#65292;&#22534;&#26632;&#25351;&#38024;&#25351;&#21521;&#22534;&#26632;&#19978;&#30340;&#31532;&#19968;&#20010;&#31354;&#20301;&#32622;&#12290;&#25351;&#20196;&#22914;ldmea&#12289;stmea&#31561;&#65307; </li><li class="listitem">&#28385;&#36882;&#20943;&#65306;&#22534;&#26632;&#21521;&#19979;&#22686;&#38271;&#65292;&#22534;&#26632;&#25351;&#38024;&#25351;&#21521;&#20869;&#21547;&#26377;&#25928;&#25968;&#25454;&#39033;&#30340;&#26368;&#20302;&#22320;&#22336;&#12290;&#25351;&#20196;&#22914;ldmfd&#12289;stmfd&#31561;&#65307;</li><li class="listitem">&#31354;&#36882;&#20943;&#65306;&#22534;&#26632;&#21521;&#19979;&#22686;&#38271;&#65292;&#22534;&#26632;&#25351;&#38024;&#25351;&#21521;&#22534;&#26632;&#19979;&#30340;&#31532;&#19968;&#20010;&#31354;&#20301;&#32622;&#12290;&#25351;&#20196;&#22914;ldmed&#12289;stmed&#31561;&#12290; </li></ul></div><p>
</p><pre class="programlisting">
stmfd sp!, {r1-r7, lr} @&#23558;r1-r7&#65292; lr&#20837;&#26632;, &#28385;&#36882;&#20943;&#22534;&#26632;
ldmfd sp! ,{r1-r7, pc} @&#25968;&#25454;&#20986;&#26632;&#65292;&#25918;&#20837;r1-r7&#65292;pc&#23492;&#23384;&#22120;&#65292;&#28385;&#36882;&#20943;&#22534;&#26632;
</pre><p>
sp&#21363;&#32422;&#23450;&#30340;r13&#23492;&#23384;&#22120;&#65292;&#23427;&#24635;&#26159;&#25351;&#21521;&#26632;&#39030;&#22320;&#22336;&#65292;&#25110;&#32773;&#26632;&#39030;&#30340;&#19979;&#19968;&#22320;&#22336;&#12290;!&#21495;&#20351;&#25968;&#25454;&#20986;&#20837;&#26632;&#21518;&#65292;sp&#33258;&#21160;&#35843;&#25972;&#21040;&#26632;&#39030;&#12290;
	</p>
</div>
<div class="sect2" title="3.7. &#22810;&#23492;&#23384;&#22120;&#23547;&#22336;"><div class="titlepage"><div><div><h3 class="title"><a name="idp80241860"></a>3.7. &#22810;&#23492;&#23384;&#22120;&#23547;&#22336;</h3></div></div></div>
&#22810;&#23492;&#23384;&#22120;&#23547;&#22336;&#19968;&#27425;&#21487;&#20256;&#36865;&#20960;&#20010;&#23492;&#23384;&#22120;&#20540;&#65292;&#20801;&#35768;&#19968;&#26465;&#25351;&#20196;&#20256;&#36865;16&#20010;&#23492;&#23384;&#22120;&#30340;&#20219;&#20309;&#23376;&#38598;&#25110;&#25152;&#26377;&#23492;&#23384;&#22120;&#12290;&#22810;&#23492;&#23384;&#22120;&#23547;&#22336;&#25351;&#20196;&#20030;&#20363;&#22914;&#19979;&#65306;
<pre class="programlisting">
ldmia	r1, {r2-r4, r6}   @&#23558;r1&#25351;&#21521;&#30340;&#21333;&#20803;&#20013;&#30340;&#25968;&#25454;&#35835;&#20986;&#21040;r2-r4&#12289;r6&#20013; 
</pre>
&#27880;&#24847;&#23492;&#23384;&#22120;&#30340;&#32534;&#21495;&#36830;&#32493;&#21644;&#19981;&#36830;&#32493;&#30340;&#24773;&#20917;&#12290;&#31867;&#20284;&#30340;&#25351;&#20196;&#36824;&#26377;ldmib&#65292;ldmda&#21644;ldmdb&#12290;
<div class="figure"><a name="idp80242836"></a><p class="title"><b>&#22270; 12. ldmia&#25351;&#20196;&#31034;&#20363;</b></p><div class="figure-contents"><div><img src="images/addr_multi.jpg" alt="ldmia&#25351;&#20196;&#31034;&#20363;"></div></div></div><br class="figure-break">		
</div>
<div class="sect2" title="3.8. &#22359;&#25335;&#36125;&#23547;&#22336;"><div class="titlepage"><div><div><h3 class="title"><a name="idp80243628"></a>3.8. &#22359;&#25335;&#36125;&#23547;&#22336;</h3></div></div></div>
	<p>
&#22359;&#25335;&#36125;&#26159;&#23558;&#23492;&#23384;&#22120;&#20869;&#23481;&#22797;&#21046;&#21040;&#22522;&#22336;&#23492;&#23384;&#22120;&#30340;&#22320;&#22336;&#25152;&#25351;&#31034;&#30340;&#23384;&#20648;&#22120;&#20013;,&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#22312;&#23384;&#20648;&#31532;&#19968;&#20010;&#20540;&#20043;&#21518;&#25110;&#20043;&#21069;&#23384;&#20648;&#22120;&#22320;&#22336;&#26159;&#22686;&#21152;&#36824;&#26159;&#20943;&#23569;.&#22686;&#20540;&#31867;&#22411;&#22914;&#19979;:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">IA&#65306;&#27599;&#27425;&#20256;&#36865;&#21518;,&#22320;&#22336;&#21152;4</li><li class="listitem">IB&#65306;&#27599;&#27425;&#20256;&#36865;&#21069;,&#22320;&#22336;&#21152;4</li><li class="listitem">DA&#65306;&#27599;&#27425;&#20256;&#36865;&#21518;,&#22320;&#22336;&#20943;4</li><li class="listitem">DB&#65306;&#27599;&#27425;&#20256;&#36865;&#21069;,&#22320;&#22336;&#20943;4</li></ul></div><p>
&#20854;&#20013;I&#25351;Increment&#65307;A&#25351;After&#65307;D&#25351;Decrement&#65307;B&#25351;Before&#12290;
</p><pre class="programlisting">
stmia	r0!, {r1-r7}  @&#23558;r1&#65374;r7&#30340;&#25968;&#25454;&#20445;&#23384;&#21040;&#23384;&#20648;&#22120;&#20013;,&#23384;&#20648;&#25351;&#38024;&#22312;&#20445;&#23384;&#31532;&#19968;&#20010;&#20540;&#20043;&#21518;&#22686;&#21152;&#65292;&#22686;&#38271;&#26041;&#21521;&#20026;&#21521;&#19978;&#22686;&#38271;&#12290;
stmib	r0!, {r1-r7}  @&#23558;r1&#65374;r7&#30340;&#25968;&#25454;&#20445;&#23384;&#21040;&#23384;&#20648;&#22120;&#20013;,&#23384;&#20648;&#25351;&#38024;&#22312;&#20445;&#23384;&#31532;&#19968;&#20010;&#20540;&#20043;&#21069;&#22686;&#21152;&#65292;&#22686;&#38271;&#26041;&#21521;&#20026;&#21521;&#19978;&#22686;&#38271;&#12290; 
stmda	r0!, {r1-r7}  @&#23558;R1&#65374;R7&#30340;&#25968;&#25454;&#20445;&#23384;&#21040;&#23384;&#20648;&#22120;&#20013;,&#23384;&#20648;&#25351;&#38024;&#22312;&#20445;&#23384;&#31532;&#19968;&#20010;&#20540;&#20043;&#21518;&#22686;&#21152;, &#22686;&#38271;&#26041;&#21521;&#20026;&#21521;&#19979;&#22686;&#38271;&#12290;
stmdb	r0!, {r1-r7}  @&#23558;r1&#65374;r7&#30340;&#25968;&#25454;&#20445;&#23384;&#21040;&#23384;&#20648;&#22120;&#20013;,&#23384;&#20648;&#25351;&#38024;&#22312;&#20445;&#23384;&#31532;&#19968;&#20010;&#20540;&#20043;&#21069;&#22686;&#21152;&#65292;&#22686;&#38271;&#26041;&#21521;&#20026;&#21521;&#19979;&#22686;&#38271;&#12290;
</pre><p>
</p>
</div>
<div class="sect2" title="3.9. &#30456;&#23545;&#23547;&#22336;"><div class="titlepage"><div><div><h3 class="title"><a name="idp80246556"></a>3.9. &#30456;&#23545;&#23547;&#22336;</h3></div></div></div>
	<p>
&#30456;&#23545;&#23547;&#22336;&#26159;&#22522;&#22336;&#23547;&#22336;&#30340;&#19968;&#31181;&#21464;&#36890;&#12290;&#30001;&#31243;&#24207;&#35745;&#25968;&#22120;pc&#25552;&#20379;&#22522;&#20934;&#22320;&#22336;&#65292;&#25351;&#20196;&#20013;&#30340;&#22320;&#22336;&#30721;&#23383;&#27573;&#20316;&#20026;&#20559;&#31227;&#37327;&#65292;&#20004;&#32773;&#30456;&#21152;&#21518;&#24471;&#21040;&#30340;&#22320;&#22336;&#21363;&#20026;&#25805;&#20316;&#25968;&#30340;&#26377;&#25928;&#22320;&#22336;&#12290;&#36890;&#24120;&#30340;adr&#20266;&#25351;&#20196;&#20013;&#30340;&#25805;&#20316;&#25968;&#23601;&#26159;&#30456;&#23545;&#20110;&#24403;&#21069;pc&#30340;&#20540;&#12290;&#30456;&#23545;&#23547;&#22336;&#25351;&#20196;&#20030;&#20363;&#22914;&#19979;&#65306;
</p><pre class="programlisting">
.section .data
msg: .asciz "hello"

.section .text
.align 2
.global _start
_start:
 mov r0, #10
 ......
 adr r0, msg
</pre><p>
adr r0, msg&#23545;&#24212;&#30340;&#21453;&#27719;&#32534;&#32467;&#26524;&#20026;sub r0, pc, #8&#12290;
</p>
</div>
&#24635;&#32467;&#65306;&#23492;&#23384;&#22120;&#38388;&#25509;&#23547;&#22336;&#21644;&#22522;&#22336;&#23547;&#22336;&#36890;&#24120;&#29992;&#22312;ldr/str&#25351;&#20196;&#20013;&#65292;&#29992;&#26469;&#23454;&#29616;&#20869;&#23384;&#21644;&#23492;&#23384;&#22120;&#38388;&#30340;&#25968;&#25454;&#25644;&#31227;&#12290;&#22534;&#26632;&#23547;&#22336;&#20013;&#30340;ldmfd/ldmed/stmfd/stm
ed&#25351;&#20196;&#23454;&#29616;&#23492;&#23384;&#22120;&#21644;&#25968;&#25454;&#26632;&#30340;&#25968;&#25454;&#20132;&#20114;&#12290;&#22810;&#23492;&#23384;&#22120;&#23547;&#22336;&#23454;&#38469;&#19978;&#23601;&#26159;&#22359;&#25335;&#36125;&#23547;&#22336;&#30340;&#21453;&#25805;&#20316;&#12290;
</div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s02.html">&#19978;&#19968;&#39029;</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ar01s04.html">&#19979;&#19968;&#39029;</a></td></tr><tr><td width="40%" align="left" valign="top">2. ARM&#21644;&#27719;&#32534; </td><td width="20%" align="center"><a accesskey="h" href="index.html">&#36215;&#22987;&#39029;</a></td><td width="40%" align="right" valign="top"> 4. &#25209;&#37327;&#21152;&#36733;&#21644;&#23384;&#20648;&#25351;&#20196;&#23454;&#36341;</td></tr></table></div></body></html>
