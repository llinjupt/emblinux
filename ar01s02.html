<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>2. ARM&#21644;&#27719;&#32534;</title><link rel="stylesheet" href="styles.css" type="text/css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="index.html" title="Linux&#20869;&#26680;&#23398;&#20064;&#21644;&#30740;&#31350;&#21450;&#23884;&#20837;&#24335;(ARM)&#23398;&#20064;&#21644;&#30740;&#31350;&#30340;&#24320;&#25918;&#25991;&#26723;"><link rel="up" href="index.html" title="Linux&#20869;&#26680;&#23398;&#20064;&#21644;&#30740;&#31350;&#21450;&#23884;&#20837;&#24335;(ARM)&#23398;&#20064;&#21644;&#30740;&#31350;&#30340;&#24320;&#25918;&#25991;&#26723;"><link rel="prev" href="index.html" title="Linux&#20869;&#26680;&#23398;&#20064;&#21644;&#30740;&#31350;&#21450;&#23884;&#20837;&#24335;(ARM)&#23398;&#20064;&#21644;&#30740;&#31350;&#30340;&#24320;&#25918;&#25991;&#26723;"><link rel="next" href="ar01s03.html" title="3. ARM&#23547;&#22336;&#26041;&#24335;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2. ARM&#21644;&#27719;&#32534;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="index.html">&#19978;&#19968;&#39029;</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ar01s03.html">&#19979;&#19968;&#39029;</a></td></tr></table><hr></div><div class="sect1" title="2. ARM&#21644;&#27719;&#32534;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp80106852"></a>2. ARM&#21644;&#27719;&#32534;</h2></div></div></div>
<div class="sect2" title="2.1. ARM&#26159;&#20160;&#20040;"><div class="titlepage"><div><div><h3 class="title"><a name="idp80108116"></a>2.1. ARM&#26159;&#20160;&#20040;</h3></div></div></div>
<p>ARM&#26159;Acorn RISC Machine&#30340;&#32553;&#20889;&#65292;&#26159;&#20856;&#22411;&#30340;RISC(Reduced Instruction Set Computer)&#26550;&#26500;&#30340;CPU&#12290;</p>
<p>1978&#24180;12&#26376;5&#26085;&#65292;&#29289;&#29702;&#23398;&#23478;&#36203;&#23572;&#26364;·&#35946;&#27901;&#65288;Hermann Hauser&#65289;&#21644;&#24037;&#31243;&#24072;Chris Curry&#65292;
&#22312;&#33521;&#22269;&#21073;&#26725;&#21019;&#21150;&#20102;CPU&#20844;&#21496;&#65288;Cambridge Processing Unit&#65289;&#65292;&#20027;&#35201;&#19994;&#21153;&#26159;&#20026;&#24403;&#22320;&#24066;&#22330;&#20379;&#24212;&#30005;&#23376;&#35774;&#22791;&#12290;
1979&#24180;&#65292;CPU&#20844;&#21496;&#25913;&#21517;&#20026;Acorn&#20844;&#21496;&#12290;</p>
<p>1985&#24180;&#65292;Roger Wilson&#21644;Steve Furber&#35774;&#35745;&#20102;&#20182;&#20204;&#33258;&#24049;&#30340;&#31532;&#19968;&#20195;32&#20301;6MHz&#30340;&#22788;&#29702;&#22120;&#65292;&#29992;&#23427;&#20570;&#20986;&#20102;&#19968;&#21488;RISC&#25351;&#20196;&#38598;&#30340;&#35745;&#31639;&#26426;&#65292;&#31616;&#31216;ARM&#65288;Acorn RISC Machine&#65289;&#12290;
&#36825;&#23601;&#26159;ARM&#36825;&#20010;&#21517;&#23383;&#30340;&#30001;&#26469;&#12290;</p>
<p>RISC&#25351;&#20196;&#27604;&#36739;&#31616;&#21333;&#65292;&#25152;&#20197;&#21151;&#32791;&#23567;&#12289;&#20215;&#26684;&#20415;&#23452;&#65292;&#29305;&#21035;&#36866;&#21512;&#31227;&#21160;&#35774;&#22791;&#12290;&#26089;&#26399;&#20351;&#29992;ARM&#33455;&#29255;&#30340;&#20856;&#22411;&#35774;&#22791;&#65292;&#23601;&#26159;&#33529;&#26524;&#20844;&#21496;&#30340;&#29275;&#39039;PDA&#12290;</p>
<p>1990&#24180;11&#26376;27&#26085;&#65292;Acorn&#20844;&#21496;&#27491;&#24335;&#25913;&#32452;&#20026;ARM&#35745;&#31639;&#26426;&#20844;&#21496;&#12290;&#33529;&#26524;&#20844;&#21496;&#20986;&#36164;150&#19975;&#33521;&#38225;&#65292;&#33455;&#29255;&#21378;&#21830;VLSI&#20986;&#36164;25&#19975;&#33521;&#38225;&#65292;Acorn&#26412;&#36523;&#21017;&#20197;150&#19975;&#33521;&#38225;&#30340;&#30693;&#35782;&#20135;&#26435;&#21644;12&#21517;&#24037;&#31243;&#24072;&#20837;&#32929;&#12290;
&#20844;&#21496;&#30340;&#21150;&#20844;&#22320;&#28857;&#38750;&#24120;&#31616;&#38475;&#65292;&#23601;&#26159;&#19968;&#20010;&#35895;&#20179;&#12290;</p>
<p>20&#19990;&#32426;90&#24180;&#20195;&#65292;ARM&#22788;&#29702;&#22120;&#25193;&#23637;&#21040;&#19990;&#30028;&#33539;&#22260;&#65292;&#21344;&#25454;&#20102;&#20302;&#21151;&#32791;&#12289;&#20302;&#25104;&#26412;&#21644;&#39640;&#24615;&#33021;&#30340;&#23884;&#20837;&#24335;&#31995;&#32479;&#24212;&#29992;&#39046;&#22495;&#30340;&#39046;&#20808;&#22320;&#20301;&#12290;ARM&#20844;&#21496;&#26082;&#19981;&#29983;&#20135;&#33455;&#29255;&#20063;&#19981;&#38144;&#21806;&#33455;&#29255;&#65292;&#23427;&#21482;&#20986;&#21806;&#33455;&#29255;&#25216;&#26415;&#25480;&#26435;&#12290;</p>
</div>
<div class="sect2" title="2.2. ARM&#21629;&#21517;&#35268;&#21017;"><div class="titlepage"><div><div><h3 class="title"><a name="idp80111260"></a>2.2. ARM&#21629;&#21517;&#35268;&#21017;</h3></div></div></div>
ARM&#30340;&#29256;&#26412;&#25511;&#21046;&#30340;&#21629;&#21517;&#35268;&#21017;&#20998;&#25104;&#20004;&#31867;&#12290;
&#19968;&#31867;&#26159;&#22522;&#20110;ARM &#26550;&#26500;&#30340;&#29256;&#26412;&#21629;&#21517;&#35268;&#21017;&#65292;&#23427;&#26159;&#19968;&#31181;&#26550;&#26500;&#35774;&#35745;&#30340;&#24635;&#21644;&#65307;&#21478;&#19968;&#31867;&#26159;&#22522;&#20110;&#26576;ARM&#26550;&#26500;&#29256;&#26412;&#30340;&#31995;&#21015;&#22788;&#29702;&#22120;&#30340;&#21629;&#21517;&#35268;&#21017;&#12290;
<div class="sect3" title="2.2.1. ARM&#26550;&#26500;&#21629;&#21517;&#35268;&#21017;"><div class="titlepage"><div><div><h4 class="title"><a name="idp80111516"></a>2.2.1. ARM&#26550;&#26500;&#21629;&#21517;&#35268;&#21017;</h4></div></div></div>
<pre class="programlisting">
| ARMv | n | variants | x&#65288;variants&#65289; | 
</pre>
ARM&#26550;&#26500;&#30340;&#21629;&#21517;&#30001;&#22235;&#37096;&#20998;&#32452;&#25104;&#65306;
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">ARMv&#23383;&#31526;&#20018;&#65292;&#36825;&#37096;&#20998;&#22266;&#23450;&#19981;&#21464;&#12290;</li><li class="listitem">n&#65292;ARM&#25351;&#20196;&#38598;&#29256;&#26412;&#21495;&#65292;ARM&#26550;&#26500;&#29256;&#26412;&#21457;&#24067;&#20102;7&#20010;&#31995;&#21015;&#65292;&#25152;&#20197;n=[1:7]&#12290;&#20854;&#20013;&#26368;&#26032;&#30340;&#29256;&#26412;&#26159;&#31532;7&#29256;&#65292;Cortex&#31995;&#21015;CPU&#37319;&#29992;&#35813;&#29256;&#26412;&#12290;</li><li class="listitem">variants&#65292;&#21464;&#31181;&#65292;&#36890;&#24120;&#29992;&#22823;&#20889;&#23383;&#27597;&#26469;&#34920;&#31034;&#23545;&#19968;&#31867;&#25351;&#20196;&#25110;&#32773;&#25351;&#20196;&#38598;&#65292;&#21464;&#31181;&#23601;&#26159;&#36825;&#20123;&#22823;&#20889;&#23383;&#27597;&#30340;&#36830;&#20889;&#12290;</li><li class="listitem">x&#65288;variants&#65289;&#65292;&#19981;&#25903;&#25345;x&#21518;&#25351;&#23450;&#30340;&#21464;&#31181;&#12290;</li></ul></div>
&#24120;&#35265;&#30340;&#21464;&#31181;&#26377;&#65306;
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">T&#65292;Thumb&#25351;&#20196;&#38598;</li><li class="listitem">M&#65292;&#38271;&#20056;&#27861;&#25351;&#20196;</li><li class="listitem">E&#65292;&#22686;&#24378;&#22411;DSP&#25351;&#20196;</li><li class="listitem">J&#65292;Java&#34394;&#25311;&#26426;Jazelle&#25351;&#20196;&#38598;</li><li class="listitem">P&#65292;LDRD, MCRR, MRRC, PLD&#21644;STRD&#25351;&#20196;</li></ul></div>
&#20363;&#22914;&#65292;ARMv5TxP&#34920;&#31034;ARM&#25351;&#20196;&#38598;&#29256;&#26412;&#20026;5&#65292;&#25903;&#25345;Thumb&#25351;&#20196;&#38598;&#65292;&#19981;&#25903;&#25345;LDRD, MCRR, MRRC, PLD&#21644;STRD&#25351;&#20196;&#12290;
<div class="table"><a name="idp80115252"></a><p class="title"><b>&#34920; 2. ARM&#26550;&#26500;&#29256;&#26412;</b></p><div class="table-contents">
<table summary="ARM&#26550;&#26500;&#29256;&#26412;" border="1"><colgroup><col><col></colgroup><thead><tr><th>&#29256;&#26412;</th><th>&#35828;&#26126;</th></tr></thead><tbody><tr><td>ARMv1<sup>[<a name="idp80116916" href="#ftn.idp80116916" class="footnote">a</a>]</sup></td><td>&#35813;&#29256;&#26412;&#30340;&#21407;&#22411;&#26426;&#26159;ARM1&#65292;&#27809;&#26377;&#29992;&#20110;&#21830;&#19994;&#20135;&#21697;</td></tr><tr><td>ARMv2</td><td>&#23545;v1&#29256;&#36827;&#34892;&#20102;&#25193;&#23637;&#65292;&#21253;&#21547;&#20102;&#23545;32&#20301;&#32467;&#26524;&#30340;&#20056;&#27861;&#25351;&#20196;&#21644;&#21327;&#22788;&#29702;&#22120;&#25351;&#20196;&#30340;&#25903;&#25345;&#12290;</td></tr><tr><td>ARMv3</td><td>ARM&#20844;&#21496;&#31532;&#19968;&#20010;&#24494;&#22788;&#29702;&#22120;ARM6&#26680;&#24515;&#26159;&#29256;&#26412;3&#30340;&#65292;&#23427;&#20316;&#20026;IP&#26680;&#12289;&#29420;&#31435;&#30340;&#22788;&#29702;&#22120;&#12289;&#20855;&#26377;&#29255;&#19978;&#39640;&#36895;&#32531;&#23384;&#12289;MMU&#21644;&#20889;&#32531;&#20914;&#30340;&#38598;&#25104;CPU&#12290;
</td></tr><tr><td>ARMv4</td><td>&#24212;&#29992;&#38750;&#24120;&#24191;&#27867;&#65292;&#20294;&#20165;&#25903;&#25345;32&#20301;ARM&#25351;&#20196;&#38598;&#12290;</td></tr><tr><td>ARMv4T</td><td>&#21516;&#26102;&#25903;&#25345;ARM&#25351;&#20196;&#38598;4&#21644;Thumb&#25351;&#20196;&#38598;1&#12290;</td></tr><tr><td>ARMv5T</td><td>&#21516;&#26102;&#25903;&#25345;ARM&#25351;&#20196;&#38598;5&#21644;Thumb&#25351;&#20196;&#38598;2&#12290;&#28155;&#21152;&#35745;&#31639;&#24320;&#22987;0&#20010;&#25968;&#30340;clz&#25351;&#20196;&#21644;&#36719;&#20013;&#26029;bkpt&#25351;&#20196;</td></tr><tr><td>ARMv5TExP</td><td>&#22312;ARMv5T&#22522;&#30784;&#19978;&#28155;&#21152;&#22686;&#24378;&#22411;DSP&#25351;&#20196;&#65292;&#20294;&#19981;&#25903;&#25345;LDRD, MCRR, MRRC, PLD,
&#21644;STRD&#25351;&#20196;</td></tr><tr><td>ARMv5TE</td><td>&#22312;ARMv5T&#22522;&#30784;&#19978;&#28155;&#21152;&#22686;&#24378;&#22411;DSP&#25351;&#20196;&#12290;</td></tr><tr><td>ARMv5TEJ</td><td>&#22312;ARMv5TE&#22522;&#30784;&#19978;&#25903;&#25345;Jazelle&#25351;&#20196;&#38598;&#12290;</td></tr><tr><td>ARMv6</td><td>&#21516;&#26102;&#25903;&#25345;ARM&#25351;&#20196;&#38598;6&#21644;Thumb&#25351;&#20196;&#38598;3&#12290;&#22686;&#21152;&#21644;&#22686;&#24378;&#20102;&#30456;&#24403;&#22810;&#30340;&#21333;&#25351;&#20196;&#22810;&#25968;&#25454;&#22788;&#29702;&#25351;&#20196;&#12290;</td></tr><tr><td>ARMv6K</td><td>&#28155;&#21152;&#25903;&#25345;&#22810;&#22788;&#29702;&#30340;ARM&#25351;&#20196;&#38598;&#65292;&#20197;&#21450;&#19968;&#20123;&#39069;&#22806;&#30340;&#20869;&#23384;&#27169;&#22411;&#30340;&#29305;&#24615;&#12290;</td></tr><tr><td>ARMv6T2</td><td>&#25512;&#20986;Thumb-2&#25216;&#26415;&#12290;&#20026;16&#20301;&#21644;32&#20301;&#25351;&#20196;&#30721;&#30340;&#32467;&#21512;&#65292;&#20813;&#21435;&#20102;&#29366;&#24577;&#20999;&#25442;&#20043;&#22797;&#26434;&#24230;&#12290;</td></tr><tr><td>ARMv7A</td><td>&#39640;&#24615;&#33021;&#36816;&#31639;&#65292;&#38024;&#23545;&#25163;&#26426;&#65292;PDA&#31561;&#25163;&#25345;&#20415;&#25658;&#35774;&#22791;&#12290;&#22686;&#21152;&#35270;&#39057;&#32534;&#35299;&#30721;&#21644;3D&#22788;&#29702;&#30340;NEON&#22810;&#23186;&#20307;&#25216;&#26415;&#12290;</td></tr><tr><td>ARMv7R</td><td>&#20943;&#23569;&#36755;&#20837;&#36755;&#20986;&#24310;&#36831;&#65292;&#25552;&#39640;&#25351;&#20196;&#39044;&#27979;&#31934;&#24230;&#65292;&#37325;&#35270;&#23454;&#26102;&#22788;&#29702;&#65292;&#38024;&#23545;&#32593;&#30053;&#35774;&#22791;&#65292;&#27773;&#36710;&#20202;&#34920;&#31561;&#24212;&#29992;&#12290;&#25903;&#25345;PMSA&#12290;</td></tr><tr><td>ARMv7M</td><td>&#20302;&#25104;&#26412;&#24494;&#22788;&#29702;&#22120;&#24212;&#29992;&#65292;&#21435;&#38500;NEON&#25351;&#20196;&#38598;&#12290;</td></tr></tbody><tbody class="footnotes"><tr><td colspan="2"><div class="footnote"><p><sup>[<a name="ftn.idp80116916" href="#idp80116916" class="para">a</a>] </sup>ARMv1&#33267;ARMv3&#29256;&#26412;&#24050;&#32463;&#24223;&#24323;&#65292;&#19981;&#20877;&#34987;&#20351;&#29992;&#12290;</p></div></td></tr></tbody></table>
</div></div><br class="table-break">
<p>
ARM&#30340;&#19981;&#21516;&#26550;&#26500;&#30340;&#21306;&#21035;&#20027;&#35201;&#22312;&#20110;&#25351;&#20196;&#38598;&#30340;&#21464;&#21270;&#65292;&#21487;&#20197;&#35270;&#20026;&#23545;&#25351;&#20196;&#38598;&#30340;&#21629;&#21517;&#12290;
</p>
</div>
<div class="sect3" title="2.2.2. ARM&#22788;&#29702;&#22120;&#21629;&#21517;&#35268;&#21017;"><div class="titlepage"><div><div><h4 class="title"><a name="idp80125300"></a>2.2.2. ARM&#22788;&#29702;&#22120;&#21629;&#21517;&#35268;&#21017;</h4></div></div></div>
ARM&#22788;&#29702;&#22120;&#30340;&#21629;&#21517;&#35268;&#21017;&#22914;&#19979;&#65306;
<pre class="programlisting">
ARM{x}{y}{z}{T}{D}{M}{I}{E}{J}{F}{-S}
</pre>   
&#21508;&#32452;&#25104;&#37096;&#20998;&#35299;&#37322;&#22914;&#19979;&#65306;
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">x&#65292;&#22788;&#29702;&#22120;&#31995;&#21015;</li><li class="listitem">y&#65292;&#23384;&#20648;&#31649;&#29702;/&#20445;&#25252;&#21333;&#20803;</li><li class="listitem">z&#65292;cache</li><li class="listitem">T&#65292;&#25903;&#25345;Thumb&#25351;&#20196;&#38598;</li><li class="listitem">D&#65292;&#25903;&#25345;&#29255;&#19978;&#35843;&#35797;</li><li class="listitem">M&#65292;&#25903;&#25345;&#24555;&#36895;&#20056;&#27861;&#22120;</li><li class="listitem">I&#65292;&#25903;&#25345;Embedded ICE&#65292;&#25903;&#25345;&#23884;&#20837;&#24335;&#36319;&#36394;&#35843;&#35797;</li><li class="listitem">E&#65292;&#25903;&#25345;&#22686;&#24378;&#22411;DSP&#25351;&#20196;</li><li class="listitem">J&#65292;&#25903;&#25345;Jazelle</li><li class="listitem">F&#65292;&#20855;&#22791;&#21521;&#37327;&#28014;&#28857;&#21333;&#20803;VFP</li><li class="listitem">-S&#65292; &#21487;&#32508;&#21512;&#29256;&#26412;</li></ul></div>
<p>
ARM&#20351;&#29992;&#19968;&#31181;&#22522;&#20110;&#25968;&#23383;&#30340;&#21629;&#21517;&#27861;&#12290;&#22312;&#26089;&#26399;&#65288;1990s&#65289;&#65292;&#36824;&#22312;&#25968;&#23383;&#21518;&#38754;&#28155;&#21152;&#23383;&#27597;&#21518;&#32512;&#65292;&#29992;&#26469;&#36827;&#19968;&#27493;&#26126;&#32454;&#35813;&#22788;&#29702;&#22120;&#25903;&#25345;&#30340;&#29305;&#24615;&#12290;&#23601;&#25343;ARM7TDMI&#26469;&#35828;&#65292;T&#20195;&#34920;Thumb&#25351;&#20196;&#38598;&#65292;D&#26159;&#35828;&#25903;&#25345;JTAG&#35843;&#35797;(Debugging)&#65292;M&#24847;&#25351;&#24555;&#36895;&#20056;&#27861;&#22120;&#65292;I&#21017;&#23545;&#24212;&#19968;&#20010;&#23884;&#20837;&#24335;ICE&#27169;&#22359;&#12290;&#21518;&#26469;&#65292;&#36825;4&#39033;&#22522;&#26412;&#21151;&#33021;&#25104;&#20102;&#20219;&#20309;&#26032;&#20135;&#21697;&#30340;&#26631;&#37197;&#65292;&#20110;&#26159;&#23601;&#19981;&#20877;&#20351;&#29992;&#36825;4&#20010;&#21518;&#32512;&#30456;&#24403;&#20110;&#40664;&#35768;&#20102;&#12290;&#20294;&#26159;&#26032;&#30340;&#21518;&#32512;&#19981;&#26029;&#21152;&#20837;&#65292;&#21253;&#25324;&#23450;&#20041;&#23384;&#20648;&#22120;&#25509;&#21475;&#30340;&#65292;&#23450;&#20041;&#39640;&#36895;&#32531;&#23384;&#30340;&#65292;&#20197;&#21450;&#23450;&#20041;"&#32039;&#32806;&#21512;&#23384;&#20648;&#22120;&#65288;TCM&#65289;"&#30340;&#65292;&#20110;&#26159;&#24418;&#25104;&#20102;&#26032;&#19968;&#22871;&#21629;&#21517;&#27861;&#65292;&#36825;&#22871;&#21629;&#21517;&#27861;&#19968;&#30452;&#20351;&#29992;&#33267;&#20170;&#12290;&#27604;&#22914;ARM1176JZF-S&#65292;&#23427;&#23454;&#38469;&#19978;&#40664;&#35748;&#23601;&#25903;&#25345;TDMI&#21151;&#33021;&#65292;&#38500;&#27492;&#20043;&#22806;&#36824;&#25903;&#25345;JZF&#12290;</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">ARM7TDMI&#12289;ARM720T&#12289;ARM9TDMI&#12289;ARM940T&#12289;ARM920T&#12289;Intel&#30340;StrongARM&#31561;&#26159;&#22522;&#20110;ARMv4T&#29256;&#26412;&#12290;</li><li class="listitem">ARM9E-S&#12289;ARM966E-S&#12289;ARM1020E&#12289;ARM1022E&#20197;&#21450;XScale&#26159;ARMv5TE&#30340;&#12290;</li><li class="listitem">ARM9EJ-S&#12289;ARM926EJ-S&#12289;ARM7EJ-S&#12289;ARM1026EJ-S&#26159;&#22522;&#20110;ARMv5EJ&#30340;&#12290;ARM10&#20063;&#37319;&#29992;ARMv5TE&#12290;</li><li class="listitem">ARM1136J(F)-S&#22522;&#20110;ARMv6&#20027;&#35201;&#29305;&#24615;&#26377;SIMD&#12289;Thumb&#12289;Jazelle&#12289;DBX&#12289;(VFP)&#12289;MMU&#12290;</li><li class="listitem">ARM1156T2(F)-S&#22522;&#20110;ARMv6T2 &#20027;&#35201;&#29305;&#24615;&#26377;SIMD&#12289;Thumb-2&#12289;(VFP)&#12289;MPU&#12290;</li><li class="listitem">ARM1176JZ(F)-S&#22522;&#20110;ARMv6KZ &#22312; ARM1136EJ(F)-S &#22522;&#30784;&#19978;&#22686;&#21152;MMU&#12289;TrustZone&#12290;</li><li class="listitem">ARM11MPCore&#22522;&#20110;ARMv6K &#22312;ARM1136EJ(F)-S&#22522;&#30784;&#19978;&#21487;&#20197;&#21253;&#25324;1-4 &#26680;SMP&#12289;MMU&#12290;</li></ul></div>
&#20174;ARMv6&#25351;&#20196;&#38598;&#25165;&#24320;&#22987;&#25903;&#25345;SMP&#65292;&#36825;&#26159;&#30001;&#20110;&#20174;&#35813;&#25351;&#20196;&#38598;&#24320;&#22987;&#25552;&#20379;ldrex&#21644;strex&#31995;&#21015;&#29420;&#21344;(Exclusive)&#35775;&#38382;&#25351;&#20196;&#65292;&#35813;&#31995;&#21015;&#25351;&#20196;&#21487;&#20197;&#20445;&#35777;&#22810;CPU&#22312;&#21516;&#26102;&#35775;&#38382;&#20869;&#23384;&#26102;&#26159;&#20114;&#26021;&#30340;&#12290;&#36825;&#20063;&#21487;&#20197;&#20174;&#20869;&#26680;&#20195;&#30721;&#20013;&#24471;&#21040;&#24212;&#24449;&#65306;
<pre class="programlisting">
arch/arm/include/asm/atomic.h
#if __LINUX_ARM_ARCH__ &gt;= 6
......
#else /* ARM_ARCH_6 */
#include &lt;asm/system.h&gt;

#ifdef CONFIG_SMP
#error SMP not supported on pre-ARMv6 CPUs
#endif
......
</pre>
<p>&#22522;&#20110;ARMv7&#26550;&#26500;&#30340;ARM&#22788;&#29702;&#22120;&#19981;&#20877;&#27839;&#29992;&#36807;&#21435;&#30340;&#25968;&#23383;&#21629;&#21517;&#26041;&#24335;&#65292;&#32780;&#26159;&#20896;&#20197;Cortex&#21069;&#32512;&#65292;&#22522;&#20110;ARMv7A&#30340;&#22788;&#29702;&#22120;&#25104;&#20026;Cortex-A&#31995;&#21015;&#65292;&#22522;&#20110;ARMv7R&#30340;&#22788;&#29702;&#22120;&#25104;&#20026;Cortex-R&#31995;&#21015;&#65292;&#22522;&#20110;ARMv7M&#30340;&#22788;&#29702;&#22120;&#25104;&#20026;Cortex-M&#31995;&#21015;&#65292;ARMv7&#20043;&#21069;&#30340;&#26550;&#26500;&#21017;&#34987;&#21629;&#21517;&#20026;Classic&#31995;&#21015;&#12290;</p>
<p></p>
</div>
<div class="sect3" title="2.2.3. ARM&#25351;&#20196;&#27969;&#27700;"><div class="titlepage"><div><div><h4 class="title"><a name="idp80132204"></a>2.2.3. ARM&#25351;&#20196;&#27969;&#27700;</h4></div></div></div>
<p>CPU&#20026;&#20102;&#25191;&#34892;&#19968;&#26465;&#25351;&#20196;&#65292;&#36890;&#24120;&#38656;&#35201;&#19977;&#20010;&#27493;&#39588;&#65306;&#21462;&#25351;(Fetch)&#65292;&#35793;&#30721;(Decode)&#21644;&#25191;&#34892;(Execute)&#12290;&#36825;&#19977;&#20010;&#27493;&#39588;&#30340;&#21327;&#35843;&#24037;&#20316;&#26159;&#20381;&#38752;&#25351;&#20196;&#26102;&#38047;&#26469;&#23436;&#25104;&#30340;&#65292;&#20026;&#20102;CPU&#33021;&#22815;&#22312;&#27599;&#20010;&#25351;&#20196;&#21608;&#26399;&#37117;&#21487;&#20197;&#25191;&#34892;&#25351;&#20196;&#65292;&#24403;&#21069;&#30340;CPU&#36890;&#24120;&#36890;&#36807;&#25351;&#20196;&#27969;&#27700;&#32447;&#30340;&#26041;&#24335;&#26469;&#25552;&#39640;&#25191;&#34892;&#25351;&#20196;&#30340;&#25928;&#29575;&#12290;
&#20855;&#20307;&#26469;&#35762;&#23601;&#26159;&#65306;&#31532;&#19968;&#26465;&#25351;&#20196;&#22312;&#25191;&#34892;&#26102;&#65292;&#31532;&#20108;&#26465;&#25351;&#20196;&#22788;&#20110;&#35299;&#30721;&#38454;&#27573;&#65292;&#32780;&#31532;&#19977;&#26465;&#25351;&#20196;&#27491;&#22312;&#34987;&#21462;&#25351;&#20196;&#65307;&#24403;&#25191;&#34892;&#31532;&#20108;&#26465;&#25351;&#20196;&#26102;&#65292;&#31532;&#19977;&#26465;&#25351;&#20196;&#22788;&#20110;&#35299;&#30721;&#38454;&#27573;&#65292;&#32780;&#31532;&#22235;&#26465;&#25351;&#20196;&#27491;&#22312;&#34987;&#21462;&#25351;&#20196;&#12290;&#36825;&#26679;&#23545;&#25351;&#20196;&#30340;&#25191;&#34892;&#23601;&#22788;&#20110;&#27969;&#27700;&#32447;&#25805;&#20316;&#29366;&#24577;&#12290;
</p>
<div class="figure"><a name="idp80133356"></a><p class="title"><b>&#22270; 1. &#19977;&#32423;&#25351;&#20196;&#27969;&#27700;</b></p><div class="figure-contents"><div><img src="images/asm/flow3.png" alt="&#19977;&#32423;&#25351;&#20196;&#27969;&#27700;"></div></div></div><br class="figure-break">
<p>
</p>
<div class="figure"><a name="idp80134052"></a><p class="title"><b>&#22270; 2. ARM CPU&#23545;&#25351;&#20196;&#27969;&#27700;&#32423;&#25968;&#30340;&#25903;&#25345;</b></p><div class="figure-contents"><div><img src="images/asm/iflow.jpg" alt="ARM CPU&#23545;&#25351;&#20196;&#27969;&#27700;&#32423;&#25968;&#30340;&#25903;&#25345;"></div></div></div><br class="figure-break">
<p>&#27969;&#27700;&#32447;&#25216;&#26415;&#36890;&#36807;&#22810;&#20010;&#21151;&#33021;&#37096;&#20214;&#24182;&#34892;&#24037;&#20316;&#26469;&#32553;&#30701;&#31243;&#24207;&#25191;&#34892;&#26102;&#38388;&#65292;&#25552;&#39640;&#22788;&#29702;&#22120;&#26680;&#30340;&#25928;&#29575;&#21644;&#21534;&#21520;&#29575;&#65292;&#20174;&#32780;&#25104;&#20026;&#24494;&#22788;&#29702;&#22120;&#35774;&#35745;&#20013;&#26368;&#20026;&#37325;&#35201;&#30340;&#25216;&#26415;&#20043;&#19968;&#12290;ARM7&#22788;&#29702;&#22120;&#26680;&#20351;&#29992;&#20102;&#20856;&#22411;&#19977;&#32423;&#27969;&#27700;&#32447;&#30340;&#20911;·&#35834;&#20234;&#26364;&#32467;&#26500;&#65292;ARM9&#31995;&#21015;&#21017;&#37319;&#29992;&#20102;&#22522;&#20110;&#20116;&#32423;&#27969;&#27700;&#32447;&#30340;&#21704;&#20315;&#32467;&#26500;&#12290;&#36890;&#36807;&#22686;&#21152;&#27969;&#27700;&#32447;&#32423;&#25968;&#31616;&#21270;&#20102;&#27969;&#27700;&#32447;&#21508;&#32423;&#30340;&#36923;&#36753;&#65292;&#36827;&#19968;&#27493;&#25552;&#39640;&#20102;&#22788;&#29702;&#22120;&#30340;&#24615;&#33021;&#12290;S3C6410&#20026;ARM11&#31995;&#21015;CPU&#65292;&#25317;&#26377;8&#32423;&#25351;&#20196;&#27969;&#27700;&#12290;</p>
</div>
</div>
<div class="sect2" title="2.3. &#31243;&#24207;&#29366;&#24577;&#23492;&#23384;&#22120;"><div class="titlepage"><div><div><h3 class="title"><a name="idp80135348"></a>2.3. &#31243;&#24207;&#29366;&#24577;&#23492;&#23384;&#22120;</h3></div></div></div>
&#24403;&#21069;&#31243;&#24207;&#29366;&#24577;&#23492;&#23384;&#22120;CPSR(Current Program Status Register)&#21487;&#20197;&#22312;&#20219;&#20309;&#24037;&#20316;&#27169;&#24335;&#19979;&#36890;&#36807;mrs&#25351;&#20196;&#35775;&#38382;&#12290;&#23427;&#21253;&#21547;&#20102;&#26465;&#20214;&#30721;(Condition code)&#26631;&#24535;&#20301;&#65292;&#31105;&#27490;&#20013;&#26029;&#26631;&#24535;&#20301;&#65292;&#22788;&#29702;&#22120;&#24037;&#20316;&#27169;&#24335;&#20301;&#20197;&#21450;&#20854;&#20182;&#29366;&#24577;&#21644;&#25511;&#21046;&#20449;&#24687;&#12290;&#27599;&#19968;&#20010;&#20013;&#26029;&#27169;&#24335;&#36824;&#25317;&#26377;&#19968;&#20010;&#21333;&#29420;&#30340;&#20445;&#23384;&#30340;&#31243;&#24207;&#29366;&#24577;&#23492;&#23384;&#22120;SPSR(Saved Program Status Register)&#65292;&#24403;&#21457;&#29983;&#35813;&#27169;&#24335;&#30340;&#20013;&#26029;&#26102;&#65292;&#23427;&#34987;&#29992;&#26469;&#22791;&#20221;CPSR&#30340;&#20540;&#12290;&#29992;&#25143;&#27169;&#24335;&#21644;&#31995;&#32479;&#36825;&#20004;&#31181;&#27169;&#24335;&#19981;&#26159;&#20013;&#26029;&#27169;&#24335;&#65292;&#25152;&#20197;&#27809;&#26377;SPSR&#23492;&#23384;&#22120;&#12290;&#22312;&#36825;&#20004;&#31181;&#27169;&#24335;&#19979;&#23581;&#35797;&#35775;&#38382;SPSR&#32467;&#26524;&#26410;&#30693;&#12290;
<div class="figure"><a name="idp80136180"></a><p class="title"><b>&#22270; 3. CPSR&#21644;SPSR&#27604;&#29305;&#20301;</b></p><div class="figure-contents"><div><img src="images/cpsr.jpg" alt="CPSR&#21644;SPSR&#27604;&#29305;&#20301;"></div></div></div><br class="figure-break">
&#22914;&#19978;&#22270;&#25152;&#31034;&#65292;&#31243;&#24207;&#29366;&#24577;&#23492;&#23384;&#22120;&#27604;&#29305;&#20301;&#25353;&#35775;&#38382;&#26435;&#38480;&#20998;&#20026;&#22235;&#31181;&#65306;
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Reserved bits: &#20445;&#30041;&#20301;</li><li class="listitem">User-writable bits: Usr&#27169;&#24335;&#21487;&#20197;&#26356;&#26032;&#30340;&#20301;&#65306;N,Z,C,V,Q,GE[3:0]&#21644;E.</li><li class="listitem">Privileged bits: &#29305;&#26435;&#27169;&#24335;&#25165;&#21487;&#26356;&#26032;&#30340;&#20301;&#65306;A,I,F&#21644;M[4:0]</li><li class="listitem">Execution state bits: &#25191;&#34892;&#29366;&#24577;&#20301;J&#21644;T&#65306;&#20998;&#21035;&#34920;&#31034;&#24037;&#20316;&#22312;&#25351;&#20196;&#38598;Jazilla&#21644;Thumb&#65292;&#22914;&#26524;J&#21644;T&#21516;&#20026;0&#65292;&#21017;&#24037;&#20316;&#22312;ARM&#25351;&#20196;&#38598;&#12290;&#19981;&#35201;&#36890;&#36807;MSR&#25351;&#20196;&#25913;&#21464;&#23427;&#65292;&#21542;&#21017;&#32467;&#26524;&#26410;&#30693;&#12290;&#21482;&#21487;&#22312;&#29305;&#26435;&#27169;&#24335;&#26356;&#25913;&#12290;</li></ul></div>
&#20851;&#20110;J&#21644;T&#30340;&#35814;&#32454;&#32452;&#21512;&#22914;&#19979;&#34920;&#25152;&#31034;&#65306;
<div class="table"><a name="idp80138172"></a><p class="title"><b>&#34920; 3. Memory Hierarchy</b></p><div class="table-contents">
<table summary="Memory Hierarchy" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>J</th><th>T</th><th>&#25351;&#20196;&#38598;</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>ARM</td></tr><tr><td>0</td><td>1</td><td>Thumb</td></tr><tr><td>1</td><td>0</td><td>Jazelle</td></tr><tr><td>1</td><td>1</td><td>&#20445;&#30041;</td></tr></tbody></table>
</div></div><br class="table-break">
</div>
<div class="sect2" title="2.4. ARM&#25351;&#20196;&#26684;&#24335;"><div class="titlepage"><div><div><h3 class="title"><a name="idp80141740"></a>2.4. ARM&#25351;&#20196;&#26684;&#24335;</h3></div></div></div>
  <p>
ARM&#25351;&#20196;&#30340;&#22522;&#26412;&#26684;&#24335;&#22914;&#19979;&#65306;
</p><pre class="programlisting">
&lt;opcode&gt;{&lt;cond&gt;}{S}    &lt;Rd&gt;, &lt;Rn/#Num&gt;{, &lt;operand2&gt;} 
</pre><p>
&#20854;&#20013;&lt;&gt;&#21495;&#20869;&#30340;&#39033;&#26159;&#24517;&#39035;&#30340;&#65292;{}&#21495;&#20869;&#30340;&#39033;&#26159;&#21487;&#36873;&#30340;&#65292;/&#34920;&#31034;&#20219;&#36873;&#20854;&#20013;&#20043;&#19968;&#12290;&#21508;&#39033;&#30340;&#35828;&#26126;&#22914;&#19979;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">opcode&#65306;&#25351;&#20196;&#21161;&#35760;&#31526;,  &#22914;mov&#65292;ldr&#31561;</li><li class="listitem">cond&#65306;&#25191;&#34892;&#26465;&#20214;&#65292;&#22914;eq&#65292;ne&#31561;</li><li class="listitem">S&#65306;&#26159;&#21542;&#24433;&#21709;CPSR&#23492;&#23384;&#22120;&#30340;&#20540;</li><li class="listitem">Rd&#65306;&#30446;&#26631;&#23492;&#23384;&#22120;</li><li class="listitem">Rn/#Num&#65306;&#31532;1&#20010;&#25805;&#20316;&#25968;&#30340;&#23492;&#23384;&#22120;&#25110;&#32773;&#31435;&#21363;&#25968;</li><li class="listitem">operand2&#65306;&#31532;2&#20010;&#25805;&#20316;&#25968;</li></ul></div><p>
&#28789;&#27963;&#30340;&#20351;&#29992;&#31532;2&#20010;&#25805;&#20316;&#25968;&#8220;operand2&#8221;&#33021;&#22815;&#25552;&#39640;&#20195;&#30721;&#25928;&#29575;&#12290;&#23427;&#26377;&#22914;&#19979;&#30340;&#24418;&#24335;&#65306;
  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">#immed_n&#8212;&#8212;&#24120;&#25968;&#34920;&#36798;&#24335;&#65292;n&#34920;&#31034;&#31435;&#21363;&#25968;&#30340;&#20301;&#25968;&#65292;&#36890;&#24120;&#20026;12&#65292;&#20063;&#21363;&#26368;&#22823;&#20026;4096&#65292;&#20363;&#22914;&#65306;#0x1000&#12290;</li><li class="listitem">Rm&#8212;&#8212;&#23492;&#23384;&#22120;&#26041;&#24335;&#65307;&#20363;&#22914;&#65306;r1</li><li class="listitem">[Rm, shift]&#8212;&#8212;&#23492;&#23384;&#22120;&#31227;&#20301;&#26041;&#24335;&#65307;&#20363;&#22914;&#65306;[pc, #-4]</li></ul></div><p>
&#27604;&#22914;&#65306;subnes r1, r1, #0xd; &#22914;&#26524;Z&#26631;&#24535;&#20026;0(&#19981;&#31561;)&#65292;&#21017;&#25191;&#34892;sub r1, r1, #0xd&#24182;&#26681;&#25454;&#32467;&#26524;&#26356;&#26032;CPSR&#23492;&#23384;&#22120;&#12290;
<span class="emphasis"><em>&#21442;&#32771;&#36164;&#26009;&#65306;ARM&#23884;&#20837;&#24335;&#31995;&#32479;&#22522;&#30784;&#25945;&#31243;&#65288;&#31532;2&#29256;&#65289;PPT</em></span>
  </p>
&#25351;&#20196;&#20013;&#30340;&#25191;&#34892;&#26465;&#20214;&#30001;CPSR&#23492;&#23384;&#22120;&#20013;&#30340;&#29366;&#24577;&#20301;&#25511;&#21046;&#65292;&#21442;&#32771;<a class="xref" href="ar01s05.html#cpsr_state">&#29366;&#24577;&#20301;</a>&#12290;
  <div class="table"><a name="idp80145908"></a><p class="title"><b>&#34920; 4. &#26465;&#20214;&#30721;&#34920;</b></p><div class="table-contents">
  <table summary="&#26465;&#20214;&#30721;&#34920;" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>&#26465;&#20214;&#30721;(&#20108;&#36827;&#21046;)</th><th>&#26465;&#20214;&#21161;&#35760;&#31526;</th><th>&#26631;&#24535;&#20301;</th><th>&#21547;&#20041;</th></tr></thead><tbody><tr><td>0000</td><td>eq</td><td>Z==1</td><td>&#30456;&#31561;</td></tr><tr><td>0001</td><td>ne</td><td>Z==0</td><td>&#19981;&#31561;</td></tr><tr><td>0010</td><td>cs/hs</td><td>C==1</td><td>&#26080;&#31526;&#21495;&#25968;&#22823;&#20110;&#25110;&#31561;&#20110;</td></tr><tr><td>0011</td><td>cc/lo</td><td>C==0</td><td>&#26080;&#31526;&#21495;&#25968;&#23567;&#20110;</td></tr><tr><td>0100</td><td>mi</td><td>N==1</td><td>&#36127;&#25968;</td></tr><tr><td>0101</td><td>pl</td><td>N==0</td><td>&#27491;&#25968;&#25110;0</td></tr><tr><td>0110</td><td>vs</td><td>V==1</td><td>&#28322;&#20986;</td></tr><tr><td>0111</td><td>vc</td><td>V==0</td><td>&#26080;&#28322;&#20986;</td></tr><tr><td>1000</td><td>hi</td><td>C==1 &#19988; Z==0</td><td>&#26080;&#31526;&#21495;&#25968;&#22823;&#20110;</td></tr><tr><td>1001</td><td>ls</td><td>C==0 &#19988; Z==1</td><td>&#26080;&#31526;&#21495;&#25968;&#23567;&#20110;&#25110;&#31561;&#20110;</td></tr><tr><td>1010</td><td>ge</td><td>N==V</td><td>&#26377;&#31526;&#21495;&#25968;&#22823;&#20110;&#25110;&#31561;&#20110;</td></tr><tr><td>1011</td><td>lt</td><td>N!=V</td><td>&#26377;&#31526;&#21495;&#25968;&#23567;&#20110;</td></tr><tr><td>1100</td><td>gt</td><td>Z==0 &#19988; N==V</td><td>&#26377;&#31526;&#21495;&#25968;&#22823;&#20110;</td></tr><tr><td>1101</td><td>le</td><td>Z==1 &#25110; N!=V</td><td>&#26377;&#31526;&#21495;&#25968;&#23567;&#20110;&#25110;&#31561;&#20110;</td></tr><tr><td>1110</td><td>al</td><td>&#26080;&#26465;&#20214;</td><td>&#26080;&#26465;&#20214;&#25191;&#34892;(&#40664;&#35748;)</td></tr></tbody></table>
  </div></div><br class="table-break">
  <p>
  </p>
</div>
<div class="sect2" title="2.5. &#27979;&#35797;&#29992;&#20363;"><div class="titlepage"><div><div><h3 class="title"><a name="idp80157332"></a>2.5. &#27979;&#35797;&#29992;&#20363;</h3></div></div></div>
&#20026;&#20102;&#36827;&#34892;&#26631;&#24535;&#20301;&#31561;&#30340;&#39564;&#35777;&#65292;&#36825;&#37324;&#20351;&#29992;&#19968;&#20010;&#36890;&#29992;&#30340;&#31034;&#20363;&#31243;&#24207;&#65292;&#23427;&#21253;&#21547;&#20004;&#20010;&#25991;&#20214;&#65306;
<pre class="programlisting">
main.S
.section .text
.align 2

.global main
main:
 mov r0, #12
 mov r1, #34
 mov r2, #56
 bl print
 mov r0, #0
 bl quit
</pre>
&#27880;&#24847;&#21040;main.S&#20013;&#30340;&#23376;&#31243;&#24207;&#21517;&#20026;main&#65292;&#36825;&#26159;&#22240;&#20026;GCC&#32534;&#35793;&#22120;&#24517;&#39035;&#23558;main&#20316;&#20026;&#20837;&#21475;&#65292;&#21542;&#21017;&#26080;&#27861;&#20351;&#29992;Glibc&#30340;&#24211;&#20989;&#25968;&#12290;&#27880;&#24847;&#21040;mov&#21629;&#20196;&#65292;&#26681;&#25454;ATPS&#35268;&#21017;&#65292;&#36825;&#37324;&#26159;&#32473;print&#20989;&#25968;&#20934;&#22791;&#21442;&#25968;&#65292;&#36825;&#37324;&#21487;&#20197;&#26356;&#25913;r0&#21644;r1&#20013;&#30340;&#20540;&#65292;&#36890;&#36807;print&#26469;&#25171;&#21360;&#20986;&#23427;&#20204;&#12290;
<pre class="programlisting">
print.c
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

char regs[32][8] = 
{
  "M0", "M1", "M2",  "M3",  "M4",  "T", "F",  "I", /* 0-7 */
  "A", "E", " ", " ", " ", "CV", " ", " ", /* 8-15 */
  "|", "G", "E", "|", " ", " ", " ", " ", /* 16-23 */
  "J", " ", " ", "Q", "V", "C", "Z", "N"  /* 24-31 */
};

void format(char *regname, int reg)
{
  int i = 0;
  
  if(!reg)
    return;
  
  printf("%3s", regname);
  for(i = 31; i &gt;= 0; i--)
    printf("%3x", reg &amp; (1 &lt;&lt; i) ? 1 : 0);
  printf("\n");
}

void print(int r0, int r1, int r2)
{
  int i = 0;
  
  printf(" General out:\n");
  printf(" Hex\tr0 0x%08x\tr1 0x%08x\tr2 0x%08x\n", r0, r1, r2);
  printf(" Oct\tr0 %8d\tr1 %8x\tr2 %8d\n\n", r0, r1, r2);

  
  if(r0 || r1 || r2)
  {
    printf(" Format out:\n   ");    
    for(i = 31; i &gt;= 0; i--)
      printf("%3d", i);
    printf("\n   ");
    for(i = 31; i &gt;= 0; i--)
      printf("%3s", regs[i]);
    printf("\n");
  }
  
  format("r0", r0);
  format("r1", r1);
  format("r2", r2);
}

void quit(int err)
{
  exit(err);
}
</pre>
print.c&#20013;&#30340;print&#36890;&#36807;Glibc&#24211;&#20989;&#25968;printf&#25171;&#21360;&#20986;&#32467;&#26524;&#65292;&#32780;quit&#21017;&#36890;&#36807;&#26631;&#20934;&#24211;&#20989;&#25968;exit&#36864;&#20986;&#36816;&#34892;&#12290;&#21478;&#22806;&#32534;&#35793;&#21629;&#20196;&#21644;&#27979;&#35797;&#32467;&#26524;&#22914;&#19979;&#65306;
<pre class="programlisting">
arm-linux-gcc  print.c  main.S -o test

# ./test
 General out:
 r0 0x0000000c  r1 0x00000022   r2 0x00000038

 Format out:
    31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
     N  Z  C  V  O                                        CV                 I  F  T M4 M3 M2 M1 M0
 r0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  1  0  0
 r1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  1  0
 r2  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  1  1  0  0  0
</pre>
&#20511;&#21161;c&#35821;&#35328;&#30340;&#26684;&#24335;&#21270;&#36755;&#20986;&#65292;&#33021;&#22815;&#24456;&#22909;&#30340;&#35266;&#23519;&#29366;&#24577;&#20301;&#30340;&#21464;&#21270;&#12290;
<div class="sect3" title="2.5.1. pc"><div class="titlepage"><div><div><h4 class="title"><a name="idp80161060"></a>2.5.1. pc</h4></div></div></div>
pc &#26159; r15&#23492;&#23384;&#22120;&#30340;&#21035;&#21517;&#65292;&#36890;&#24120;&#34987;&#31216;&#20026;&#31243;&#24207;&#35745;&#25968;&#22120;(Program Counter)&#12290;&#29992;&#26469;&#25351;&#31034;CPU&#27491;&#22312;&#25191;&#34892;&#30340;&#25351;&#20196;&#30340;&#22320;&#22336;&#12290;&#20294;&#26159;&#24403;CPU&#24341;&#20837;&#25351;&#20196;&#27969;&#27700;&#26102;&#65292;&#30452;&#25509;&#35835;&#21462;&#23492;&#23384;&#22120; pc &#30340;&#20540;&#23601;&#19981;&#20877;&#26159;&#24403;&#21069;&#27491;&#22312;&#25191;&#34892;&#30340;&#25351;&#20196;&#30340;&#22320;&#22336;&#65292;&#32780;&#26159;&#24403;&#21069;&#26102;&#21051;&#27491;&#22312;&#34987;&#21462;&#25351;&#30340;&#37027;&#26465;&#25351;&#20196;&#30340;&#22320;&#22336;&#20102;&#12290;ARM7&#37319;&#29992;&#19977;&#32423;&#27969;&#27700;&#32447;&#65292;&#24403;&#21069;&#25191;&#34892;&#30340;pc(execute)&#19982;&#24403;&#21069;&#25351;&#20196;&#21608;&#26399;&#27491;&#22312;&#21462;&#25351;&#30340;pc(fetch)&#23601;&#30456;&#24046;&#20102;8&#20010;Bytes&#65292;&#20063;&#21363;&#20855;&#26377;&#20197;&#19979;&#20851;&#31995;&#65306;
<pre class="programlisting">
pc(fetch) = pc(execute) + 8
r15 = pc(fetch)
</pre>
ARM&#20026;&#20102;&#21521;&#21069;&#20860;&#23481;&#65292;&#22312;&#24341;&#20837;&#22810;&#32423;&#27969;&#27700;&#21518;&#65292;&#20381;&#28982;&#20445;&#25345;&#20102;&#21482;&#19968;&#20010;&#20851;&#31995;&#65292;&#21487;&#20197;&#22312;S3C6410&#19978;&#39564;&#35777;&#36825;&#19968;&#28857;&#65306;
<pre class="programlisting">
main:
 mov r0, pc     @ pc always indicates pc(fetch)
 bl print
 bl quit
 ......
</pre>
&#36825;&#27573;&#31243;&#24207;&#23558;pc&#30340;&#20540;&#25918;&#20837;r0,&#28982;&#21518;&#20511;&#21161;c&#35821;&#35328;&#30340;print&#20989;&#25968;&#26684;&#24335;&#21270;&#25171;&#21360;&#65306;
<pre class="programlisting">
 General out:
 Hex    r0 0x00008618  
</pre>
&#21453;&#27719;&#32534;&#29983;&#25104;&#30340;&#31243;&#24207;&#65306;
<pre class="programlisting">
00008610 &lt;main&gt;:
    // &#24403;&#25191;&#34892;&#27492;&#26465;&#25351;&#20196;&#26102;&#65292;r15(pc)&#30340;&#20540;&#20026;pc(fetch) = pc(execute) + 8
    8610:       e1a0000f        mov     r0, pc      
    8614:       ebffffa1        bl      84a0 &lt;print&gt;
    8618:       ebfffff6        bl      85f8 &lt;quit&gt;
</pre>
&#21487;&#20197;&#30475;&#21040; r0 &#30340;&#20540; 0x00008618 &#23601;&#26159;&#33719;&#21462; pc &#20540;&#30340; mov &#25351;&#20196;&#30340;&#22320;&#22336; 0x00008610 + 8&#12290; 
</div>
<div class="sect3" title="2.5.2. cpsr"><div class="titlepage"><div><div><h4 class="title"><a name="idp80163836"></a>2.5.2. cpsr</h4></div></div></div>
&#20462;&#25913;main.S&#25351;&#20196;&#30340;&#22914;&#19979;&#65292;&#33719;&#21462;cpsr&#21644;spsr&#23492;&#23384;&#22120;&#26631;&#24535;&#20301;&#65306;
<pre class="programlisting">
main:
 mrs r0, cpsr 
 mrs r1, spsr 
 mov r2, #0 
 ......
</pre>
&#36825;&#37324;&#20027;&#35201;&#29992;&#21040;&#20102;mrs&#21629;&#20196;&#65292;&#23427;&#21487;&#20197;&#30452;&#25509;&#33719;&#21462;&#24403;&#21069;&#31243;&#24207;&#29366;&#24577;&#23492;&#23384;&#22120;cpsr&#21644;&#20445;&#23384;&#30340;&#31243;&#24207;&#29366;&#24577;&#23492;&#23384;&#22120;spsr&#65292;&#29992;&#25143;&#27169;&#24335;&#24182;&#27809;&#26377;spsr&#65292;&#25152;&#20197;&#23427;&#30340;&#20540;&#23601;&#26159;cpsr&#12290;&#20197;&#19978;&#31243;&#24207;&#32467;&#26524;&#22914;&#19979;&#25152;&#31034;&#65306;
<pre class="programlisting">
 General out:
 r0 0x20000010  r1 0x20000010   r2 0x00000000

 Format out:
    31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
     N  Z  C  V  O                                        CV                 I  F  T M4 M3 M2 M1 M0
 r0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0
 r1  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0
</pre>
&#21487;&#20197;&#30475;&#21040;r0&#21644;r1&#30340;&#20540;&#30456;&#21516;&#65292;&#24182;&#19988;&#21482;&#35774;&#32622;&#20102;C&#26631;&#24535;&#12290;&#32780;M&#27169;&#24335;&#20301;&#20026;0x10&#65292;&#20026;&#29992;&#25143;&#27169;&#24335;&#12290;&#36890;&#24120;&#26377;&#20123;&#24773;&#20917;&#19979;&#38656;&#35201;&#35774;&#32622;cpsr&#65292;&#21487;&#20197;&#36890;&#36807;msr&#25351;&#20196;&#23454;&#29616;&#12290;
<pre class="programlisting">
 mov r0, #0
 msr cpsr_f, r0
 ......
</pre>
&#27880;&#24847;&#36825;&#37324;&#30340;cpsr_f&#25351;&#26126;&#25805;&#20316;&#26631;&#24535;&#20301;[31:24]&#65292;&#36825;&#37324;&#23558;&#29992;&#25143;&#27169;&#24335;&#21487;&#20197;&#35774;&#32622;&#30340;&#20301;&#20110;[31:24]&#20013;&#30340;&#25152;&#26377;&#20301;&#28165;&#38646;&#12290;&#36825;&#37324;&#30340;f&#25351;&#26126;&#20102;&#20256;&#36865;&#30340;&#21306;&#22495;&#65292;&#23427;&#21487;&#20197;&#20026;&#20197;&#19979;&#20960;&#31181;&#20540;&#65306;
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">c&#65306;&#25511;&#21046;&#26631;&#24535;&#20301;[7:0]</li><li class="listitem">x&#65306;&#25193;&#23637;&#22495;&#26631;&#24535;&#20301;[15:8]</li><li class="listitem">s&#65306;&#29366;&#24577;&#22495;&#26631;&#24535;&#20301;[23:16]</li><li class="listitem">f: &#26465;&#20214;&#22495;&#26631;&#24535;&#20301;[31:24]</li></ul></div>
</div>
<div class="sect3" title="2.5.3. &#21547;s&#32622;&#20301;&#30340;&#25351;&#20196;"><div class="titlepage"><div><div><h4 class="title"><a name="idp80167284"></a>2.5.3. &#21547;s&#32622;&#20301;&#30340;&#25351;&#20196;</h4></div></div></div>
&#20462;&#25913;main.S&#25351;&#20196;&#30340;&#20197;&#27979;&#35797;&#21547;s&#32622;&#20301;&#25351;&#20196;&#65306;
<pre class="programlisting">
main:
 mov r0, #0      /* without 's' */
 mrs r1, cpsr
 movs r0, #0    /* with s */
 mrs r2, cpsr
 bl print
 mov r0, #0
 bl quit
</pre>
&#27979;&#35797;&#30340;&#32467;&#26524;&#22914;&#19979;&#25152;&#31034;&#65306;
<pre class="programlisting">
 General out:
 r0 0x00000000  r1 0x20000010   r2 0x60000010

 Format out:
    31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
     N  Z  C  V  O                                        CV                 I  F  T M4 M3 M2 M1 M0
 r1  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0
 r2  0  1  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0
</pre>
&#21487;&#20197;&#30475;&#21040;&#31532;&#19968;&#26465;&#25351;&#20196;&#24182;&#27809;&#26377;&#24433;&#21709;&#26631;&#24535;&#20301;&#65292;&#32780;movs&#25351;&#20196;&#21017;&#25913;&#21464;&#20102;Z&#26631;&#24535;&#20301;&#65292;&#20063;&#21363;&#24403;&#21069;&#30340;&#36816;&#31639;&#32467;&#26524;&#20026;0&#12290;
</div>
<div class="sect3" title="2.5.4. Z&#26631;&#24535;&#26465;&#20214;&#32534;&#30721;"><div class="titlepage"><div><div><h4 class="title"><a name="idp80169036"></a>2.5.4. Z&#26631;&#24535;&#26465;&#20214;&#32534;&#30721;</h4></div></div></div>
&#39318;&#20808;&#36890;&#36807;movs&#36171;&#20540;r1&#20026;0&#65292;&#27492;&#26102;Z&#26631;&#24535;&#20301;1&#65292;r1&#35760;&#24405;&#27492;&#26102;&#30340;cpsr&#20540;&#12290;&#28982;&#21518;&#25913;&#21464;r2&#30340;&#20540;&#20026;0&#65292;&#20197;&#23454;&#29616;&#27979;&#35797;moveq&#21644;movne&#30340;&#27979;&#35797;&#12290;
<pre class="programlisting">
.macro  testz, cmd
 movs r0, #0
 mrs r1, cpsr
 mov r2, #0
 \cmd r2, #1
 bl print
.endm

.global main
main:
 testz moveq
 testz movne
 mov r0, #0
 bl quit
</pre>
moveq&#24403;Z==1&#26102;&#25165;&#34987;&#25191;&#34892;&#65292;&#26174;&#28982;&#27492;&#26102;&#34987;&#25191;&#34892;&#65292;r2&#30340;&#20540;&#34987;&#36171;&#20540;&#20026;1&#12290;&#25509;&#30528;&#27979;&#35797;movne&#65292;&#23427;&#21482;&#26377;&#22312;Z==0&#26102;&#25165;&#34987;&#25191;&#34892;&#65292;&#25152;&#20197;&#36825;&#37324;r2&#30340;&#20540;&#24182;&#27809;&#26377;&#34987;&#36171;&#20540;&#20026;1&#65292;&#32780;&#20381;&#28982;&#26159;0&#12290;
<pre class="programlisting">
 General out:
 r0 0x00000000  r1 0x60000010   r2 0x00000001

 Format out:
    31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
     N  Z  C  V  O                                        CV                 I  F  T M4 M3 M2 M1 M0
 r1  0  1  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0
 r2  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1
 General out:
 r0 0x00000000  r1 0x60000010   r2 0x00000000

 Format out:
    31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
     N  Z  C  V  O                                        CV                 I  F  T M4 M3 M2 M1 M0
 r1  0  1  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0
</pre>
&#20854;&#20182;&#26631;&#24535;&#20301;&#21487;&#20197;&#20351;&#29992;&#30456;&#21516;&#26041;&#27861;&#36827;&#34892;&#27979;&#35797;&#12290;
</div>
</div>
<div class="sect2" title="2.6. &#21407;&#30721;&#21644;&#34917;&#30721;"><div class="titlepage"><div><div><h3 class="title"><a name="idp80171436"></a>2.6. &#21407;&#30721;&#21644;&#34917;&#30721;</h3></div></div></div>
&#23545;&#20110;&#35745;&#31639;&#26426;&#32780;&#35328;&#65292;&#26368;&#26681;&#26412;&#30340;&#21160;&#20316;&#23601;&#26159;&#39640;&#20302;&#30005;&#20301;&#30340;&#36339;&#21464;&#65292;&#20174;&#32780;&#34920;&#31034;0&#21644;1&#20004;&#31181;&#29366;&#24577;&#12290;&#22312;&#35745;&#31639;&#26426;&#20013;&#65292;&#25152;&#26377;&#30340;&#36127;&#25968;&#37117;&#29992;&#34917;&#30721;&#34920;&#31034;&#65292;&#32780;&#36127;&#25968;&#30340;&#21407;&#30721;&#23545;&#20110;&#35745;&#31639;&#26426;&#26469;&#35828;&#27809;&#26377;&#20219;&#20309;&#24847;&#20041;&#12290;&#23545;&#20110;&#20154;&#26469;&#35828;&#65292;&#36890;&#24120;&#20351;&#29992;&#21313;&#36827;&#21046;&#65292;&#21313;&#36827;&#21046;&#22312;&#34920;&#31034;&#36127;&#25968;&#26102;&#26377;&#31526;&#21495;-&#26469;&#34920;&#31034;&#12290;&#20294;&#26159;&#23545;&#20110;&#38024;&#23545;&#35745;&#31639;&#26426;&#32780;&#35774;&#35745;&#30340;&#20108;&#36827;&#21046;&#26469;&#35828;&#65292;&#24182;&#27809;&#26377;&#25152;&#35859;&#30340;&#31526;&#21495;-&#26469;&#34920;&#31034;&#36127;&#25968;&#65292;&#32780;&#26159;&#35201;&#25343;&#20986;&#19968;&#20301;&#26469;&#34920;&#31034;&#25968;&#30340;&#27491;&#36127;&#8212;&#8212;&#26368;&#39640;&#20301;&#12290;&#32771;&#34385;&#20197;&#19979;&#30340;&#20195;&#30721;&#65306;
<pre class="programlisting">
int main()
{
        int tmp = -0x1;
        printf("tmp:%x\n", tmp);
        return 0;
}
</pre>
&#23613;&#31649;&#32534;&#35793;&#26102;&#27809;&#26377;&#38169;&#35823;&#65292;&#20294;&#26159;&#36890;&#24120;&#20154;&#20204;&#24182;&#19981;&#20351;&#29992;&#38024;&#23545;&#35745;&#31639;&#26426;&#35774;&#35745;&#30340;&#20108;&#65292;&#20843;&#25110;&#32773;&#21313;&#20845;&#36827;&#21046;&#28155;&#21152;&#31526;&#21495;-&#26469;&#34920;&#31034;&#36127;&#25968;&#65292;&#32780;&#26159;&#20351;&#29992;&#21313;&#36827;&#21046;-1&#65292;&#25110;&#32773;&#30452;&#25509;&#25351;&#23450;&#31526;&#21495;&#20301;&#65306;0x80000001&#12290;&#20294;&#26159;&#27880;&#24847;&#36890;&#36807;&#20108;&#65292;&#20843;&#25110;&#32773;&#21313;&#20845;&#36827;&#21046;&#34920;&#31034;&#30340;&#27809;&#26377;&#31526;&#21495;-&#30340;&#36127;&#25968;&#65292;&#27704;&#36828;&#37117;&#34987;&#30452;&#25509;&#32534;&#35793;&#36827;&#25351;&#20196;&#20013;&#20316;&#20026;&#34917;&#30721;&#20351;&#29992;&#65292;&#21542;&#21017;&#32534;&#35793;&#22120;&#23558;&#25226;&#23427;&#20204;&#36716;&#25442;&#20026;&#34917;&#30721;&#21518;&#20877;&#25918;&#20837;&#25351;&#20196;&#20013;&#12290;&#25152;&#20197;0x80000001&#24182;&#19981;&#34920;&#31034;-1&#65292;&#32780;&#26159;-2147483647&#36825;&#26679;&#19968;&#20010;&#25968;&#23383;&#65292;&#36825;&#26159;&#22240;&#20026;0x80000001&#26159;&#23427;&#30340;&#34917;&#30721;&#65292;&#32780;&#38750;-1&#30340;&#12290;&#30475;&#26469;&#34917;&#30721;&#30340;&#24341;&#20837;&#24182;&#27809;&#26377;&#31526;&#21512;&#20154;&#30340;&#20351;&#29992;&#20064;&#24815;&#65292;&#37027;&#20040;&#24341;&#20837;&#34917;&#30721;&#30340;&#24847;&#20041;&#26159;&#20160;&#20040;&#21602;&#65311;
<p>
&#27169;&#30340;&#27010;&#24565;&#65306;&#25226;&#19968;&#20010;&#35745;&#37327;&#21333;&#20301;&#31216;&#20043;&#20026;&#27169;&#25110;&#27169;&#25968;&#12290;&#20363;&#22914;&#65292;&#26102;&#38047;&#26159;&#20197;12&#36827;&#21046;&#36827;&#34892;&#35745;&#25968;&#24490;&#29615;&#30340;&#65292;&#21363;&#20197;12&#20026;&#27169;&#12290;&#22312;&#26102;&#38047;&#19978;&#65292;&#26102;&#38024;&#21152;&#19978;&#65288;&#27491;&#25320;&#65289;12&#30340;&#25972;&#25968;&#20301;&#25110;&#20943;&#21435;&#65288;&#21453;&#25320;&#65289;12&#30340;&#25972;&#25968;&#20301;&#65292;&#26102;&#38024;&#30340;&#20301;&#32622;&#19981;&#21464;&#12290;14&#28857;&#38047;&#22312;&#33293;&#21435;&#27169;12&#21518;&#65292;&#25104;&#20026;&#65288;&#19979;&#21320;&#65289;2&#28857;&#38047;&#65288;14=14-12=2&#65289;&#12290;&#20174;0&#28857;&#20986;&#21457;&#36870;&#26102;&#38024;&#25320;10&#26684;&#21363;&#20943;&#21435;10&#23567;&#26102;&#65292;&#20063;&#21487;&#30475;&#25104;&#20174;0&#28857;&#20986;&#21457;&#39034;&#26102;&#38024;&#25320;2&#26684;&#65288;&#21152;&#19978;2&#23567;&#26102;&#65289;&#65292;&#21363;2&#28857;&#65288;0-10=-10=-10+12=2&#65289;&#12290;&#22240;&#27492;&#65292;&#22312;&#27169;12&#30340;&#21069;&#25552;&#19979;&#65292;-10&#21487;&#26144;&#23556;&#20026;+2&#12290;&#30001;&#27492;&#21487;&#35265;&#65292;&#23545;&#20110;&#19968;&#20010;&#27169;&#25968;&#20026;12&#30340;&#24490;&#29615;&#31995;&#32479;&#26469;&#35828;&#65292;&#21152;2&#21644;&#20943;10&#30340;&#25928;&#26524;&#26159;&#19968;&#26679;&#30340;&#65307;&#22240;&#27492;&#65292;&#22312;&#20197;12&#20026;&#27169;&#30340;&#31995;&#32479;&#20013;&#65292;&#20961;&#26159;&#20943;10&#30340;&#36816;&#31639;&#37117;&#21487;&#20197;&#29992;&#21152;2&#26469;&#20195;&#26367;&#65292;&#36825;&#23601;&#25226;&#20943;&#27861;&#38382;&#39064;&#36716;&#21270;&#25104;&#21152;&#27861;&#38382;&#39064;&#20102;&#65288;&#27880;&#65306;&#35745;&#31639;&#26426;&#30340;&#30828;&#20214;&#32467;&#26500;&#20013;&#21482;&#26377;&#21152;&#27861;&#22120;&#65292;&#25152;&#20197;&#22823;&#37096;&#20998;&#30340;&#36816;&#31639;&#37117;&#24517;&#39035;&#26368;&#32456;&#36716;&#25442;&#20026;&#21152;&#27861;&#65289;&#12290;10&#21644;2&#23545;&#27169;12&#32780;&#35328;&#20114;&#20026;&#34917;&#25968;&#12290; &#12288;&#12288;</p>
<p>&#21516;&#29702;&#65292;&#35745;&#31639;&#26426;&#30340;&#36816;&#31639;&#37096;&#20214;&#19982;&#23492;&#23384;&#22120;&#37117;&#26377;&#19968;&#23450;&#23383;&#38271;&#30340;&#38480;&#21046;&#65288;&#20551;&#35774;&#23383;&#38271;&#20026;8&#65289;&#65292;&#22240;&#27492;&#23427;&#30340;&#36816;&#31639;&#20063;&#26159;&#19968;&#31181;&#27169;&#36816;&#31639;&#12290;&#24403;&#35745;&#25968;&#22120;&#35745;&#28385;8&#20301;&#20063;&#23601;&#26159;256&#20010;&#25968;&#21518;&#20250;&#20135;&#29983;&#28322;&#20986;&#65292;&#21448;&#20174;&#22836;&#24320;&#22987;&#35745;&#25968;&#12290;&#20135;&#29983;&#28322;&#20986;&#30340;&#37327;&#23601;&#26159;&#35745;&#25968;&#22120;&#30340;&#27169;&#65292;&#26174;&#28982;&#65292;8&#20301;&#20108;&#36827;&#21046;&#25968;&#65292;&#23427;&#30340;&#27169;&#25968;&#20026;2<sup>8</sup>=256&#12290;&#22312;&#35745;&#31639;&#20013;&#65292;&#20004;&#20010;&#20114;&#34917;&#30340;&#25968;&#31216;&#20026;"&#34917;&#30721;"&#12290; &#35745;&#31639;&#26426;&#24341;&#20837;&#34917;&#30721;&#21518;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#21487;&#20197;&#26041;&#20415;&#22320;&#23558;&#20943;&#27861;&#36816;&#31639;&#36716;&#21270;&#25104;&#21152;&#27861;&#36816;&#31639;&#65292;&#36816;&#31639;&#36807;&#31243;&#24471;&#21040;&#31616;&#21270;&#12290;&#27491;&#25968;&#30340;&#34917;&#30721;&#21363;&#26159;&#23427;&#25152;&#34920;&#31034;&#30340;&#25968;&#30340;&#30495;&#20540;&#65292;&#32780;&#36127;&#25968;&#30340;&#34917;&#30721;&#30340;&#25968;&#20540;&#37096;&#20221;&#21364;&#19981;&#26159;&#23427;&#25152;&#34920;&#31034;&#30340;&#25968;&#30340;&#30495;&#20540;&#12290;&#37319;&#29992;&#34917;&#30721;&#36827;&#34892;&#36816;&#31639;&#65292;&#25152;&#24471;&#32467;&#26524;&#20173;&#20026;&#34917;&#30721;&#12290; </li><li class="listitem">0&#30340;&#34917;&#30721;&#20026;0b00000000&#12290;&#20294;&#26159;&#31526;&#21495;&#20301;&#24102;&#26469;&#20102;&#36127;0&#20540;&#65292;&#23427;&#30340;&#34917;&#30721;&#19982;&#21407;&#30721;&#30456;&#21516;&#20026;0b10000000&#65292;&#25152;&#34920;&#31034;&#30340;&#20540;&#20026;-2<sup>N - 1 </sup>&#12290;&#23545;&#20110;8&#20301;&#25968;&#26469;&#35828;&#65292;&#20026;-128&#12290;</li><li class="listitem">&#33509;&#23383;&#38271;&#20026;8&#20301;&#65292;&#21017;&#34917;&#30721;&#25152;&#34920;&#31034;&#30340;&#33539;&#22260;&#20026;-128&#65374;+127&#65307;&#36827;&#34892;&#34917;&#30721;&#36816;&#31639;&#26102;&#65292;&#24212;&#27880;&#24847;&#25152;&#24471;&#32467;&#26524;&#19981;&#24212;&#36229;&#36807;&#34917;&#30721;&#25152;&#33021;&#34920;&#31034;&#25968;&#30340;&#33539;&#22260;&#12290;</li></ul></div><p>
</p>
<div class="figure"><a name="idp80177116"></a><p class="title"><b>&#22270; 4. &#21407;&#30721;&#21644;&#34917;&#30721;&#30340;&#20851;&#31995;</b></p><div class="figure-contents"><div><img src="images/ori_cmp.gif" alt="&#21407;&#30721;&#21644;&#34917;&#30721;&#30340;&#20851;&#31995;"></div></div></div><br class="figure-break">

</div>
<div class="sect2" title="2.7. &#26465;&#20214;&#30721;&#26631;&#24535;&#20301;"><div class="titlepage"><div><div><h3 class="title"><a name="idp80174668"></a>2.7. &#26465;&#20214;&#30721;&#26631;&#24535;&#20301;</h3></div></div></div>
N(Negative)&#12289;Z(Zero)&#12289;C(Carry)&#21450;V(oVerflow)&#32479;&#31216;&#20026;&#26465;&#20214;&#26631;&#24535;&#20301;&#12290;&#22823;&#37096;&#20998;&#30340;ARM &#25351;&#20196;&#21487;&#20197;&#26681;&#25454;CPSR &#20013;&#30340;&#36825;&#20123;&#26465;&#20214;&#26631;&#24535;&#20301;&#26469;&#36873;&#25321;&#24615;&#22320;&#25191;&#34892;&#12290;&#23427;&#20204;&#22312;&#20197;&#19979;&#20004;&#31181;&#24773;&#20917;&#19979;&#34987;&#25913;&#21464;&#65306;
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#27604;&#36739;&#25351;&#20196;:CMN,CMP,TEQ&#21644;TST</li><li class="listitem">&#19968;&#20123;&#25968;&#23398;&#36816;&#31639;&#25351;&#20196;&#65292;&#36923;&#36753;&#21644;&#25968;&#25454;&#20256;&#36755;&#25351;&#20196;&#26377;&#20004;&#31181;&#21464;&#20307;&#65306;&#26631;&#24535;&#20445;&#25345;&#65307;&#26631;&#24535;&#25913;&#21464;&#65292;&#20854;&#20013;&#26631;&#24535;&#25913;&#21464;&#30340;&#25351;&#20196;&#21518;&#32512;&#20026;S&#12290;&#26377;&#20123;&#25351;&#20196;&#27809;&#26377;&#26631;&#24535;&#25913;&#21464;&#30340;&#21464;&#20307;&#12290;&#26631;&#24535;&#25913;&#21464;&#21464;&#20307;&#25351;&#20196;&#36890;&#24120;&#21482;&#26377;&#22312;&#30446;&#26631;&#23492;&#23384;&#22120;&#19981;&#20026;R15(pc)&#26102;&#25165;&#20250;&#25913;&#21464;&#26631;&#24535;&#20301;&#12290;</li></ul></div>
&#22312;&#20219;&#20309;&#19968;&#31181;&#24773;&#20917;&#19979;&#65292;&#36825;&#20123;&#26631;&#24535;&#20301;&#21457;&#29983;&#20102;&#25913;&#21464;&#65292;&#36825;&#24847;&#21619;&#30528;&#65306;
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">N&#65306;&#23427;&#34987;&#35774;&#32622;&#20026;&#32467;&#26524;&#30340;bit[31]&#20301;&#65292;&#24403;&#20004;&#20010;&#34917;&#30721;&#34920;&#31034;&#30340;&#26377;&#31526;&#21495;&#25972;&#25968;&#36816;&#31639;&#26102;&#65292;N=1 &#34920;&#31034;&#36816;&#31639;&#30340;&#32467;&#26524;&#20026;&#36127;&#25968;&#65307;N=0 &#34920;&#31034;&#32467;&#26524;&#20026;&#27491;&#25968;&#25110;&#38646;&#12290;</li><li class="listitem">Z&#65306;Z=0 &#34920;&#31034;&#36816;&#31639;&#30340;&#32467;&#26524;&#19981;&#20026;&#38646;&#12290;&#23545;&#20110;CMP &#25351;&#20196;&#65292;Z=1&#34920;&#31034;&#36827;&#34892;&#27604;&#36739;&#30340;&#20004;&#20010;&#25968;&#22823;&#23567;&#30456;&#31561;&#12290;</li><li class="listitem">C&#65306;&#20998;4 &#31181;&#24773;&#20917;&#35752;&#35770;C&#30340;&#35774;&#32622;&#26041;&#27861;&#65306;<br>&#22312;&#21152;&#27861;&#25351;&#20196;&#20013;(&#21253;&#25324;&#27604;&#36739;&#25351;&#20196;CMN)&#65292;&#24403;&#32467;&#26524;&#20135;&#29983;&#20102;&#36827;&#20301;&#65292;&#21017;C=1&#65292;&#34920;&#31034;&#26080;&#31526;&#21495;&#25968;&#36816;&#31639;&#21457;&#29983;&#19978;&#28322;&#20986;&#65307;&#20854;&#20182;&#24773;&#20917;&#19979;C=0&#12290;<br>
&#22312;&#20943;&#27861;&#25351;&#20196;&#20013;(&#21253;&#25324;&#27604;&#36739;&#25351;&#20196;CMP)&#65292;&#24403;&#36816;&#31639;&#20013;&#21457;&#29983;&#20511;&#20301;&#21017;C=0&#34920;&#31034;&#26080;&#31526;&#21495;&#25968;&#36816;&#31639;&#21457;&#29983;&#19979;&#28322;&#20986;&#65307;&#20854;&#20182;&#24773;&#20917;&#19979;C=1&#12290;<br>
&#23545;&#20110;&#21253;&#21547;&#31227;&#20301;&#25805;&#20316;&#30340;&#38750;&#21152;&#65295;&#20943;&#27861;&#36816;&#31639;&#25351;&#20196;&#65292;C&#20013;&#21253;&#21547;&#26368;&#21518;&#19968;&#27425;&#28322;&#20986;&#30340;&#20301;&#25968;&#25968;&#20540;&#12290;<br>
&#23545;&#20110;&#20854;&#20182;&#38750;&#21152;&#65295;&#20943;&#27861;&#36816;&#31639;&#25351;&#20196;&#65292;C&#20301;&#30340;&#20540;&#36890;&#24120;&#19981;&#21463;&#24433;&#21709;&#12290;</li><li class="listitem">V&#65306;&#23545;&#20110;&#21152;&#65295;&#20943;&#27861;&#36816;&#31639;&#25351;&#20196;&#65292;&#24403;&#25805;&#20316;&#25968;&#21644;&#36816;&#31639;&#32467;&#26524;&#20026;&#20108;&#36827;&#21046;&#30340;&#34917;&#30721;&#34920;&#31034;&#30340;&#24102;&#31526;&#21495;&#25968;&#26102;V&#65309;1 &#34920;&#31034;&#31526;&#21495;&#20301;&#28322;&#20986;&#12290;&#36890;&#24120;&#20854;&#20182;&#30340;&#25351;&#20196;&#19981;&#24433;&#21709;V &#20301;&#65292;&#20855;&#20307;&#21487;&#21442;&#32771;&#21508;&#25351;&#20196;&#30340;&#35828;&#26126;&#12290;</li></ul></div>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#36890;&#36807;msr&#25351;&#20196;&#30452;&#25509;&#25913;&#21464;CPSR/SPSR&#26631;&#24535;&#20301;&#12290;</li><li class="listitem">mrc&#35835;&#21327;&#22788;&#29702;&#22120;&#25351;&#20196;&#65292;&#24403;&#30446;&#30340;&#23492;&#23384;&#22120;&#20026;r15(pc)&#26102;&#65292;&#29992;&#26469;&#23558;&#21327;&#22788;&#29702;&#22120;&#20013;&#30340;&#26465;&#20214;&#26631;&#24535;&#20301;&#25335;&#36125;&#21040;ARM&#22788;&#29702;&#22120;&#20013;&#12290;</li><li class="listitem">ldm&#31995;&#21015;&#25351;&#20196;&#65292;&#36890;&#24120;&#29992;&#26469;&#25335;&#36125;SPSR&#21040;CPSR&#65292;&#29992;&#20110;&#20013;&#26029;&#36820;&#22238;&#12290;</li><li class="listitem">rfe&#25351;&#20196;&#22312;&#29305;&#26435;&#27169;&#24335;&#19979;&#20174;&#20869;&#23384;&#24674;&#22797;CPSR&#12290;</li><li class="listitem">&#25968;&#23398;&#21644;&#36923;&#36753;&#36923;&#36753;&#25351;&#20196;&#22312;&#30446;&#30340;&#23492;&#23384;&#22120;&#20026;r15&#26102;&#65292;&#21487;&#33021;&#25335;&#36125;SPSR&#21040;CPSR&#20013;&#12290;&#21487;&#20197;&#29992;&#20110;&#20174;&#20013;&#26029;&#20013;&#36820;&#22238;&#12290;</li></ul></div>
<div class="sect3" title="2.7.1. N&#36127;&#25968;&#26631;&#24535;&#20301;&#27979;&#35797;"><div class="titlepage"><div><div><h4 class="title"><a name="idp80181996"></a>2.7.1. N&#36127;&#25968;&#26631;&#24535;&#20301;&#27979;&#35797;</h4></div></div></div>
&#27979;&#35797;N&#26631;&#24535;&#20301;&#30340;&#24605;&#24819;&#24456;&#31616;&#21333;&#65292;&#23601;&#26159;&#26681;&#25454;&#25351;&#20196;&#32467;&#26524;&#30340;&#31526;&#21495;&#20301;&#20026;0&#21644;1&#26469;&#26597;&#30475;N&#26631;&#24535;&#20301;&#12290;
<pre class="programlisting">
main:
 /* save orig cpsr-&gt;r0 */
 mrs r0, cpsr 

 /* give a non-Neg value get cpsr-&gt;r1 */
 movs r3, #1  
 mrs r1, cpsr 

 /* give a Neg value get cpsr-&gt;r2 */
 movs r3, #-1
 mrs r2, cpsr

 ......
</pre>
&#36755;&#20986;&#32467;&#26524;&#22914;&#19979;&#25152;&#31034;&#65292;&#26174;&#28982;r1&#30340;N&#26631;&#24535;&#20301;&#20026;0&#65292;&#32780;r2&#21017;&#21464;&#20026;&#20102;1&#12290;
<pre class="programlisting">
 General out:
 Hex    r0 0x20000010   r1 0x20000010   r2 0xa0000010
 Oct    r0 536870928    r1 20000010     r2 -1610612720

 Format out:
    31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
     N  Z  C  V  Q        J              |  E  G  |       CV           E  A  I  F  T M4 M3 M2 M1 M0
 r0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0
 r1  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0
 r2  1  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0
</pre>
</div>
<div class="sect3" title="2.7.2. Z&#38646;&#26631;&#24535;&#20301;&#27979;&#35797;"><div class="titlepage"><div><div><h4 class="title"><a name="idp80185836"></a>2.7.2. Z&#38646;&#26631;&#24535;&#20301;&#27979;&#35797;</h4></div></div></div>
&#27979;&#35797;N&#26631;&#24535;&#20301;&#30340;&#24605;&#24819;&#24456;&#31616;&#21333;&#65292;&#23601;&#26159;&#26681;&#25454;&#25351;&#20196;&#32467;&#26524;&#30340;&#26159;&#21542;&#20026;0&#26469;&#26597;&#30475;Z&#26631;&#24535;&#20301;&#12290;
<pre class="programlisting">
main:
 /* save orig cpsr-&gt;r0 */
 mrs r0, cpsr 

 /* give a non-Zero let cpsr-&gt;r1 */
 movs r3, #1  
 mrs r1, cpsr 

 /* give a Zero let cpsr-&gt;r2 */
 movs r3, #0
 mrs r2, cpsr

 ......
</pre>
&#36755;&#20986;&#32467;&#26524;&#22914;&#19979;&#25152;&#31034;&#65292;&#26174;&#28982;r1&#30340;Z&#26631;&#24535;&#20301;&#20026;0&#65292;&#32780;r2&#21017;&#21464;&#20026;&#20102;1&#12290;
<pre class="programlisting">
 General out:
 Hex    r0 0x20000010   r1 0x20000010   r2 0x60000010
 Oct    r0 536870928    r1 20000010     r2 1610612752

 Format out:
    31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
     N  Z  C  V  Q        J              |  E  G  |       CV           E  A  I  F  T M4 M3 M2 M1 M0
 r0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0
 r1  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0
 r2  0  1  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0
</pre>
</div>
<div class="sect3" title="2.7.3. C&#36827;&#20301;&#26631;&#24535;&#20301;&#27979;&#35797;"><div class="titlepage"><div><div><h4 class="title"><a name="idp80187884"></a>2.7.3. C&#36827;&#20301;&#26631;&#24535;&#20301;&#27979;&#35797;</h4></div></div></div>
&#27979;&#35797;C&#26631;&#24535;&#20301;&#30456;&#23545;&#22797;&#26434;&#65292;&#21253;&#25324;&#22235;&#31181;&#24773;&#20917;&#12290;
<div class="sect4" title="2.7.3.1. &#21152;&#27861;&#25351;&#20196;&#36827;&#20301;"><div class="titlepage"><div><div><h5 class="title"><a name="idp80188252"></a>2.7.3.1. &#21152;&#27861;&#25351;&#20196;&#36827;&#20301;</h5></div></div></div>
&#21152;&#27861;&#25351;&#20196;add&#23558;&#25152;&#26377;&#25805;&#20316;&#25968;&#24403;&#20570;&#26080;&#31526;&#21495;&#22788;&#29702;&#65292;CPU&#20869;&#37096;&#20351;&#29992;CarryFrom(Rn + shifter_operand)&#26469;&#35745;&#31639;&#26159;&#21542;&#36827;&#20301;&#65292;&#20854;&#20013;rn&#21644;shifter_operand&#20998;&#21035;&#20026;&#31532;&#19968;&#25805;&#20316;&#25968;&#21644;&#31532;&#20108;&#25805;&#20316;&#25968;&#12290;&#27979;&#35797;&#24605;&#24819;&#20026;&#32473;&#31532;&#19968;&#25805;&#20316;&#25968;&#36171;&#20540;&#20026;0xfffffffe&#65292;&#36825;&#20445;&#35777;&#22312;&#31532;&#19968;&#27425;&#21152;1&#21518;&#65292;&#19981;&#20250;&#36827;&#20301;&#65292;&#20877;&#27425;&#21152;1&#21518;&#24517;&#23450;&#36827;&#20301;&#12290;&#21478;&#22806;&#27880;&#24847;&#21040;r0&#23384;&#25968;&#20102;0xfffffffe + 2&#30340;&#32467;&#26524;&#12290;CarryFrom&#30340;&#31639;&#27861;&#24456;&#31616;&#21333;&#65292;&#22312;ARM&#25351;&#20196;&#38598;&#20013;&#23427;&#36890;&#36807;&#27604;&#36739;Rn + shifter_operand &gt; 2<sup>32-1</sup>&#30340;&#20540;&#20915;&#23450;&#26159;&#21542;&#19978;&#28322;&#12290;&#23545;&#20110;8&#20301;&#21644;16&#20301;&#30340;&#35821;&#20986;&#25805;&#20316;&#35760;&#20316;CarryFrom8&#21644;CarryFrom16&#65292;&#23427;&#20204;&#36890;&#24120;&#34987;&#29992;&#22312;&#23383;&#33410;&#21644;&#21322;&#23383;&#25805;&#20316;&#20013;<sup>[<a name="idp80189436" href="#ftn.idp80189436" class="footnote">1</a>]</sup>&#12290;
<pre class="programlisting">
main:
 /* clean all condition flags */
 msr cpsr_f, #0

 /* make sure the add result won't carry and 
  let cpsr-&gt;r1 */
 mov r3, #0xfffffffe  
 adds r3, r3, #1
 mrs r1, cpsr

 /* carried and let cpsr-&gt;r2 */
 adds r3, r3, #1
 mov r0, r3
 
 ......
</pre>
&#36755;&#20986;&#32467;&#26524;&#22914;&#19979;&#25152;&#31034;&#65292;&#26174;&#28982;r1&#30340;C&#26631;&#24535;&#20301;&#20026;0&#65292;&#32780;&#30001;&#20110;&#20986;&#29616;&#36827;&#20301;r2&#21017;&#21464;&#20026;&#20102;1&#12290;
<pre class="programlisting">
 Hex    r0 0x00000000   r1 0x80000010   r2 0xbeb62ebc
 Oct    r0        0     r1 80000010     r2 -1095356740

 Format out:
    31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
     N  Z  C  V  Q        J              |  E  G  |       CV           E  A  I  F  T M4 M3 M2 M1 M0
 r1  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0
 r2  1  0  1  1  1  1  1  0  1  0  1  1  0  1  1  0  0  0  1  0  1  1  1  0  1  0  1  1  1  1  0  0
</pre>
</div>
<div class="sect4" title="2.7.3.2. &#20943;&#27861;&#25351;&#20196;&#20511;&#20301;"><div class="titlepage"><div><div><h5 class="title"><a name="idp80191516"></a>2.7.3.2. &#20943;&#27861;&#25351;&#20196;&#20511;&#20301;</h5></div></div></div>
<p>
&#20943;&#27861;&#25351;&#20196;add&#23558;&#25152;&#26377;&#25805;&#20316;&#25968;&#24403;&#20570;&#26080;&#31526;&#21495;&#22788;&#29702;&#65292;CPU&#20869;&#37096;&#20351;&#29992;NOT BorrowFrom(Rn - shifter_operand)&#26469;&#35745;&#31639;&#26159;&#21542;&#20511;&#20301;&#65292;&#20854;&#20013;rn&#21644;shifter_operand&#20998;&#21035;&#20026;&#31532;&#19968;&#25805;&#20316;&#25968;&#21644;&#31532;&#20108;&#25805;&#20316;&#25968;&#12290;BorrowFrom&#30340;&#31639;&#27861;&#24456;&#31616;&#21333;&#65292;&#22312;ARM&#25351;&#20196;&#38598;&#20013;&#23427;&#36890;&#36807;&#27604;&#36739;Rn - shifter_operand &lt; 0&#30340;&#20540;&#20915;&#23450;&#26159;&#21542;&#20511;&#20301;&#12290;&#22914;&#26524;&#21457;&#29983;&#20511;&#20301;&#65292;&#37027;&#20040;C&#26631;&#24535;&#20026;0&#65292;&#21542;&#21017;&#20026;1&#12290;</p>
<pre class="programlisting">
 /* clean all condition flags */
 msr cpsr_f, #0
 
 /* make sure the sub result won't borrow and 
  let cpsr-&gt;r1 */
 mov r3, #0x1
 subs r3, r3, #1
 mrs r1, cpsr 

 /* borrowed let cpsr-&gt;r2 */
 subs r3, r3, #1
 mrs r2, cpsr

 mov r0, r3
 ......
</pre>
&#27979;&#35797;&#21407;&#29702;&#65306;&#23558;&#20316;&#20986;&#30340;&#34987;&#20943;&#25968;&#35774;&#32622;&#20026;1&#65292;&#31532;&#19968;&#27425;&#20943;1&#26102;&#65292;&#19981;&#21457;&#29983;&#20511;&#20301;&#32622;C&#20026;1&#65292;&#27492;&#26102;r3&#20869;&#23481;&#20026;0&#65292;&#28982;&#21518;&#20877;&#20943;&#21435;1&#65292;&#26174;&#28982;&#21457;&#29983;&#20511;&#20301;&#65292;&#25152;&#20197;&#32622;C&#20026;1&#12290;
<pre class="programlisting">
 General out:
 Hex    r0 0xffffffff   r1 0x60000010   r2 0x80000010
 Oct    r0       -1     r1 60000010     r2 -2147483632

 Format out:
    31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
     N  Z  C  V  Q        J              |  E  G  |       CV           E  A  I  F  T M4 M3 M2 M1 M0
 r0  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
 r1  0  1  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0
 r2  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0
</pre>
&#27880;&#24847;r0&#20013;&#20026;1-2&#30340;&#20540;&#65292;&#20063;&#21363;&#20026;-1&#30340;&#34917;&#30721;&#12290;
</div>
<div class="sect4" title="2.7.3.3. &#31227;&#20301;&#25351;&#20196;"><div class="titlepage"><div><div><h5 class="title"><a name="idp80194196"></a>2.7.3.3. &#31227;&#20301;&#25351;&#20196;</h5></div></div></div>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">asr&#65306;&#31639;&#26415;&#21491;&#31227;&#25351;&#20196;&#65292;&#23558;&#31526;&#21495;&#20301;&#25335;&#36125;&#21040;&#31354;&#20301;&#65292;&#33509;&#31227;&#20301;&#37327;&#20026;32&#65292;&#21017;&#30446;&#26631;&#23492;&#23384;&#22120;&#28165;0&#65292;&#19988;&#26368;&#21518;&#31227;&#38500;&#30340;&#20301;&#20445;&#30041;&#22312;C&#20013;&#65307;&#33509;&#31227;&#20301;&#37327;&#22823;&#20110;32&#65292;&#21017;&#30446;&#26631;&#23492;&#23384;&#22120;&#21644;C&#22343;&#34987;&#28165;0&#12290;</li><li class="listitem">lsl&#65306;&#36923;&#36753;&#24038;&#31227;&#25351;&#20196;&#65292;&#31354;&#20301;&#34917;0&#65292;&#33509;&#31227;&#20301;&#37327;&#20026;32&#65292;&#21017;&#30446;&#26631;&#23492;&#23384;&#22120;&#28165;0&#65292;&#19988;&#26368;&#21518;&#31227;&#20986;&#30340;&#20301;&#20445;&#30041;&#22312;C&#20013;&#65307;&#33509;&#31227;&#20301;&#37327;&#22823;&#20110;32&#65292;&#21017;&#30446;&#26631;&#23492;&#23384;&#22120;&#21644;C&#22343;&#34987;&#28165;0&#12290;&#33509;&#20301;&#31227;&#37327;&#20026;0&#65292;&#19981;&#24433;&#21709;C&#26631;&#24535;&#12290;</li><li class="listitem">lsr&#65306;&#36923;&#36753;&#21491;&#31227;&#25351;&#20196;&#65292;&#31354;&#20301;&#34917;0&#65292;&#33509;&#31227;&#20301;&#37327;&#20026;32&#65292;&#21017;&#30446;&#26631;&#23492;&#23384;&#22120;&#28165;0&#65292;&#19988;&#26368;&#21518;&#31227;&#20986;&#30340;&#20301;&#20445;&#30041;&#22312;C&#20013;&#65307;&#33509;&#31227;&#20301;&#37327;&#22823;&#20110;32&#65292;&#21017;&#30446;&#26631;&#23492;&#23384;&#22120;&#21644;C&#22343;&#34987;&#28165;0&#12290;&#33509;&#20301;&#31227;&#37327;&#20026;0&#65292;&#19981;&#24433;&#21709;C&#26631;&#24535;&#12290;</li><li class="listitem">ror&#65306;&#25968;&#25454;&#24490;&#29615;&#21491;&#31227;&#25351;&#20196;&#65292;&#24433;&#21709;C&#26631;&#24535;&#12290;</li></ul></div>
</div>
<div class="sect4" title="2.7.3.4. V&#28322;&#20986;&#20301;"><div class="titlepage"><div><div><h5 class="title"><a name="idp80196500"></a>2.7.3.4. V&#28322;&#20986;&#20301;</h5></div></div></div>
&#22312;&#21152;&#20943;&#36816;&#31639;&#20013;&#65292;&#36890;&#36807;OverflowFrom(Rn + shifter_operand)&#26469;&#21028;&#26029;&#26159;&#21542;&#28322;&#20986;&#12290;OverflowFrom&#20998;&#20026;&#20004;&#31181;&#24773;&#20917;&#65306;&#21152;&#27861;&#36816;&#31639;&#20013;&#65292;&#22914;&#26524;&#25805;&#20316;&#25968;&#30340;&#31526;&#21495;&#20301;&#30456;&#21516;&#65292;&#20294;&#26159;&#32467;&#26524;&#30340;&#31526;&#21495;&#20301;&#21457;&#29983;&#25913;&#21464;&#65307;&#22312;&#20943;&#27861;&#36816;&#31639;&#20013;&#65292;&#22914;&#26524;&#20004;&#25805;&#20316;&#25968;&#31526;&#21495;&#20301;&#19981;&#21516;&#65292;&#32467;&#26524;&#19982;&#31532;&#19968;&#20010;&#25805;&#20316;&#25968;&#30340;&#31526;&#21495;&#20301;&#20063;&#19981;&#21516;&#65292;&#21017;&#28322;&#20986;&#65292;&#20063;&#21363;&#36229;&#20986;&#34917;&#30721;&#34920;&#31034;&#33539;&#22260;&#12290;
<pre class="programlisting">
main:
 /* clean all condition flags */
 msr cpsr_f, #0

 /* make sure the adds result won't overflow */
 mov r3, #0x6ffffffe
 adds r3, r3, #1
 mrs r1, cpsr

 /* overflowed let cpsr-&gt;r2 */
 adds r3, r3, #1
 mrs r2, cpsr

 mov r0, r3
 ......
</pre>
&#36825;&#37324;&#20197;&#21152;&#27861;&#20026;&#20363;&#65292;&#39318;&#20808;&#35774;&#32622;r3&#20026;0x7ffffffe&#65292;&#30830;&#20445;&#31532;&#19968;&#27425;&#21152;1&#26102;&#65292;&#19981;&#20250;&#28322;&#20986;&#65292;&#32780;&#31532;&#20108;&#27425;&#21017;&#20250;&#21457;&#29983;&#32467;&#26524;&#31526;&#21495;&#20301;&#30340;&#25913;&#21464;&#12290;
<pre class="programlisting">
 General out:
 Hex    r0 0x80000000   r1 0x00000010   r2 0x90000010
 Oct    r0 -2147483648  r1       10     r2 -1879048176

 Format out:
    31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0
     N  Z  C  V  Q        J              |  E  G  |       CV           E  A  I  F  T M4 M3 M2 M1 M0
 r0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
 r1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0
 r2  1  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0
</pre>
&#26174;&#28982;r1&#20013;&#30340;V&#20026;0&#65292;&#32780;r2&#20013;&#30340;V&#20026;1&#12290;
</div>
</div>
</div>
<div class="sect2" title="2.8. &#36339;&#36716;&#25351;&#20196;"><div class="titlepage"><div><div><h3 class="title"><a name="idp80198932"></a>2.8. &#36339;&#36716;&#25351;&#20196;</h3></div></div></div>
<div class="sect3" title="2.8.1. b&#21644;bl&#25351;&#20196;"><div class="titlepage"><div><div><h4 class="title"><a name="idp80199188"></a>2.8.1. b&#21644;bl&#25351;&#20196;</h4></div></div></div>
b(Branch)&#21644;bl(Branch and Link)&#25351;&#20196;&#23454;&#29616;&#20998;&#26525;&#36339;&#36716;&#65292;&#24182;&#19988;&#25903;&#25345;&#26465;&#20214;&#36339;&#36716;&#12290;bl&#25351;&#20196;&#19982;b&#25351;&#20196;&#30340;&#21306;&#21035;&#26159;&#23427;&#22312;&#36339;&#36716;&#21069;&#20250;&#23558;&#24403;&#21069;pc&#30340;&#19979;&#19968;&#26465;&#25351;&#20196;&#22320;&#22336;&#23384;&#20837;lr&#23492;&#23384;&#22120;&#65292;&#25351;&#20196;&#32534;&#30721;&#30340;&#21306;&#21035;&#23601;&#22312;&#20110;L&#20301;&#26159;&#21542;&#20026;1&#12290;&#25152;&#20197;bl&#36866;&#21512;&#23376;&#31243;&#24207;&#35843;&#29992;&#12290;bl&#30340;&#25351;&#20196;&#26684;&#24335;&#22914;&#19979;&#65292;signed_immed_24&#34920;&#31034;24&#20301;&#26377;&#31526;&#21495;&#31435;&#21363;&#25968;&#65292;&#26174;&#28982;&#23427;&#21487;&#20197;&#34920;&#31034;&#30340;&#22823;&#23567;&#20026;+-8M&#65292;&#30001;&#20110;ARM&#30340;&#25351;&#20196;&#38271;&#24230;&#24635;&#26159;32bits&#65292;&#25152;&#20197;&#21487;&#20197;&#34920;&#31034;+/-32MB&#30340;&#22320;&#22336;&#31354;&#38388;&#12290;
<pre class="programlisting">
31   28 27 26 25 24
+-----+--------+---+--------------------------------+
|cond | 1  0  1| L |        signed_immed_24         |
+-----+--------+---+--------------------------------+
</pre>
bl&#25351;&#20196;&#30340;&#20266;&#20195;&#30721;&#34920;&#31034;&#22914;&#19979;&#65306;
<pre class="programlisting">
if ConditionPassed(cond) then
  if L == 1 then
    LR = address of the instruction after the branch instruction
PC = PC + (SignExtend_30(signed_immed_24) &lt;&lt; 2)
</pre>
bl&#25351;&#20196;&#26684;&#24335;&#22914;&#19979;&#65292;&#23427;&#30340;&#21442;&#25968;&#26159;&#23376;&#31243;&#24207;&#30340;&#26631;&#31614;&#65292;&#24182;&#19981;&#25509;&#21463;&#31435;&#21363;&#25968;&#65292;&#25152;&#20197;&#36825;&#29301;&#28041;&#21040;signed_immed_24&#35745;&#31639;&#26041;&#27861;&#12290;&#26174;&#28982;&#65292;&#23427;&#26159;&#22312;&#32534;&#35793;&#22120;&#32534;&#35793;&#36807;&#31243;&#20013;&#30830;&#23450;&#12290;
<pre class="programlisting">
bl{cond} label
</pre>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#39318;&#20808;&#30830;&#23450;bl&#25351;&#20196;&#30340;&#22320;&#22336;&#12290;</li><li class="listitem">&#28982;&#21518;&#30830;&#23450;bl&#21442;&#25968;label&#20195;&#34920;&#30340;&#22320;&#22336;&#12290;</li><li class="listitem">&#35745;&#31639;label&#19982;bl&#25351;&#20196;&#20043;&#38388;&#30340;&#20559;&#31227;offset&#65292;&#26174;&#28982;&#35813;&#20559;&#31227;&#30340;&#21333;&#20301;&#20026;&#23383;&#33410;&#12290;</li><li class="listitem">&#26681;&#25454;&#20844;&#24335;(offset - 8) &gt;&gt; 2 &#35745;&#31639;&#25351;&#20196;&#20559;&#31227;&#25968;&#65292;&#36825;&#37324;&#23601;&#26159;signed_immed_24&#12290;</li><li class="listitem">&#22914;&#26524;&#24471;&#21040;&#30340;signed_immed_24&#20540;&#19981;&#22312;&#8722;33554432 &#21644; 33554428&#33539;&#22260;&#20869;&#65292;&#21017;&#32534;&#35793;&#22120;&#25253;&#38169;&#12290;</li></ul></div>
offset&#20043;&#25152;&#20197;&#35201;&#20943;&#21435;8&#65292;&#26159;&#22240;&#20026;PC + (SignExtend_30(signed_immed_24) &lt;&lt; 2)&#20013;&#30340;pc&#26159;&#25351;&#24403;&#21069;&#27491;&#22312;&#25191;&#34892;&#30340;pc(excute)&#65292;&#32780;pc(excute)= pc(fetch) + 8&#12290;&#25351;&#20196;&#20013;&#30340;label&#23545;&#24212;&#30340;&#22320;&#22336;&#30456;&#24403;&#20110;pc(fetch)&#12290;&#36825;&#37324;&#29992;&#19968;&#20010;&#31616;&#21333;&#30340;&#20363;&#23376;&#35828;&#26126;&#65306;
<pre class="programlisting">
.section .text
.align 2

.global main
main:
 mov r0, #12
 mov r1, #34
 mov r2, #56
 bl over
.global over
over:
 mov r0, #0
</pre>
&#20197;&#19978;&#26159;&#19968;&#20010;&#31616;&#21333;&#30340;&#36339;&#36716;&#27979;&#35797;&#65292;over&#26631;&#31614;&#19982;bl&#25351;&#20196;&#22320;&#22336;&#30456;&#24046;1&#20010;&#25351;&#20196;&#65292;4&#20010;&#23383;&#33410;&#12290;&#21453;&#27719;&#32534;&#20195;&#30721;&#22914;&#19979;&#65306;
<pre class="programlisting">
00008790 &lt;main&gt;:
    8790:       e3a0000c        mov     r0, #12 ; 0xc
    8794:       e3a01022        mov     r1, #34 ; 0x22
    8798:       e3a02038        mov     r2, #56 ; 0x38
    879c:       ebffffff        bl      87a0 &lt;over&gt;

000087a0 &lt;over&gt;:
    87a0:       e3a00000        mov     r0, #0  ; 0x0
</pre>
ebffffff&#23601;&#26159;&#25351;&#20196;&#30721;&#65292;eb&#26080;&#38656;&#35299;&#37322;&#20102;&#65292;&#32780;0xffffff&#23601;&#26159;signed_immed_24&#65292;&#23427;&#36890;&#36807;(0x87a0 - 0x879c - 8) &gt;&gt; 2&#35745;&#31639;&#32780;&#24471;&#65292;&#36825;&#20010;&#20540;&#23601;&#26159;-1&#65292;&#30001;&#20110;&#25351;&#20196;&#20013;&#30340;&#25805;&#20316;&#25968;&#37117;&#26159;&#37319;&#29992;&#34917;&#30721;&#34920;&#31034;&#65292;&#25152;&#20197;0xffffff&#23601;&#26159;-1&#30340;&#34917;&#30721;&#12290;&#20462;&#25913;&#20363;&#23376;&#22914;&#19979;&#65292;&#27492;&#26102;&#22320;&#22336;&#30456;&#24046;3&#20010;&#25351;&#20196;&#65292;&#36825;&#20445;&#35777;&#20559;&#31227;&#30340;&#25351;&#20196;&#25968;&#20026;&#27491;&#25972;&#25968;1&#12290;
<pre class="programlisting">
.section .text
.align 2

.global main
main:
 mov r0, #12
 bl over
 mov r1, #34
 mov r2, #56 
.global over
over:
 mov r0, #0
</pre>
&#35266;&#23519;&#21453;&#27719;&#32534;&#30340;&#32467;&#26524;&#65292;&#26174;&#28982;&#25351;&#20196;&#30721;&#20026;eb000001&#65292;&#27491;&#25968;1&#30340;&#34917;&#30721;&#21644;&#21407;&#30721;&#30456;&#21516;&#12290;
<pre class="programlisting">
00008790 &lt;main&gt;:
    8790:       e3a0000c        mov     r0, #12 ; 0xc
    8794:       eb000001        bl      87a0 &lt;over&gt;
    8798:       e3a01022        mov     r1, #34 ; 0x22
    879c:       e3a02038        mov     r2, #56 ; 0x38

000087a0 &lt;over&gt;:
    87a0:       e3a00000        mov     r0, #0  ; 0x0
</pre>
<div class="figure"><a name="idp80206444"></a><p class="title"><b>&#22270; 5. bl&#36339;&#36716;&#31034;&#24847;&#22270;</b></p><div class="figure-contents"><div><img src="images/asm_bl.gif" alt="bl&#36339;&#36716;&#31034;&#24847;&#22270;"></div></div></div><br class="figure-break">
b&#25351;&#20196;&#30340;&#23384;&#22312;&#24847;&#20041;&#22312;&#20110;&#65292;&#26377;&#26102;&#20505;&#26080;&#38656;&#36820;&#22238;&#65292;&#25110;&#32773;lr&#23492;&#23384;&#22120;&#21478;&#20316;&#23427;&#29992;&#65292;&#27492;&#26102;&#22914;&#38656;&#36820;&#22238;&#38656;&#35201;&#26174;&#24335;&#20445;&#23384;&#19979;&#19968;&#26465;&#25351;&#20196;&#22320;&#22336;&#21040;&#20854;&#20182;&#23492;&#23384;&#22120;&#12290;
</div>
<div class="sect3" title="2.8.2. ldr&#21644;adr&#25351;&#20196;"><div class="titlepage"><div><div><h4 class="title"><a name="idp80206852"></a>2.8.2. ldr&#21644;adr&#25351;&#20196;</h4></div></div></div>
ldr&#21644;adr&#26159;&#21478;&#20004;&#20010;&#24120;&#29992;&#26469;&#23454;&#29616;&#36339;&#36716;&#30340;&#25351;&#20196;&#65292;&#20005;&#26684;&#26469;&#35828;ldr&#25351;&#20196;&#26377;&#20004;&#31181;&#65292;&#26681;&#25454;&#25805;&#20316;&#25968;&#65292;&#23427;&#21487;&#20197;&#26159;&#25351;&#20196;&#65292;&#20063;&#21487;&#20197;&#26159;&#20266;&#25351;&#20196;&#12290;
&#20316;&#20026;&#25351;&#20196;&#30340;ldr&#30340;&#35821;&#27861;&#26684;&#24335;&#22914;&#19979;&#65292;&#36890;&#24120;&#23454;&#29616;&#25226;&#19968;&#20010;32&#20301;&#30340;&#23383;&#20174;&#20869;&#23384;&#35013;&#20837;&#19968;&#20010;&#23492;&#23384;&#22120;&#12290;
<pre class="programlisting">
ldr{&lt;cond&gt;} &lt;Rd&gt;&#65292;&lt;addr_mode&gt;
</pre>
&#25351;&#20196;&#32534;&#30721;&#26684;&#24335;&#22914;&#19979;&#65306;
<pre class="programlisting">
31   28 27 26 25242322212019 1615 1211              0 
+-----+------+-+-+-+-+-+-+----+----+----------------+
|cond | 0  1 |1|P|U|0|W|1| Rn | Rd |  addr_mode     |
+-----+------+-+-+-+-+-+-+----+----+----------------+
</pre>
ldr&#25351;&#20196;&#26681;&#25454;addr_mode&#25152;&#30830;&#23450;&#30340;&#22320;&#22336;&#27169;&#24335;&#23558;&#19968;&#20010;32&#20301;&#23383;&#35835;&#21462;&#21040;&#25351;&#20196;&#20013;&#30340;&#30446;&#26631;&#23492;&#23384;&#22120;Rd&#12290;&#22914;&#26524;&#25351;&#20196;&#20013;&#30340;&#23547;&#22336;&#26041;&#24335;&#30830;&#23450;&#30340;&#22320;&#22336;&#19981;&#26159;&#23383;&#23545;&#40784;&#30340;&#65292;&#21017;&#35835;&#20986;&#30340;&#25968;&#20540;&#35201;&#36827;&#34892;&#24490;&#29615;&#21491;&#31227;&#12290;&#25152;&#31227;&#20301;&#25968;&#20026;&#23547;&#22336;&#26041;&#24335;&#30830;&#23450;&#30340;&#22320;&#22336;bits[1:0]&#30340;8&#20493;&#65292;&#20063;&#23601;&#26159;&#35828;&#22788;&#29702;&#22120;&#23558;&#21462;&#21040;&#30340;&#25968;&#20540;&#20316;&#20026;&#23383;&#30340;&#26368;&#20302;&#20301;&#22788;&#29702;&#12290;
<p>
addr_mode&#23427;&#30830;&#23450;&#20102;&#25351;&#20196;&#32534;&#30721;&#20013;&#30340;I&#12289;P&#12289;U&#12289;W&#12289;Rn&#21644;addr_mode&#20301;&#12290;&#25152;&#26377;&#30340;&#23547;&#22336;&#27169;&#24335;&#20013;&#65292;&#37117;&#20250;
&#30830;&#23450;&#19968;&#20010;&#22522;&#22336;&#23492;&#23384;&#22120;Rn&#65292;&#36890;&#24120;&#20026;pc&#12290;&#32771;&#34385;&#22914;&#19979;&#30340;ldr&#27979;&#35797;&#31243;&#24207;&#65306;</p>
<pre class="programlisting">
......
.global main
main:
 mov r0, pc
 ldr r1, [r0]
 ldr r2, main
 ldr r0, =main
 bl print
 b quit
</pre>
&#32534;&#35793;&#21518;&#30340;&#21453;&#27719;&#32534;&#31243;&#24207;&#22914;&#19979;&#65292;&#26174;&#28982;&#23545;&#20110;&#31532;&#19968;&#20010;&#36824;&#26377;&#31532;&#20108;&#20010;&#25351;&#20196;&#26469;&#35828;&#65292;&#23427;&#20204;&#22343;&#26159;&#20316;&#20026;&#25351;&#20196;&#32534;&#35793;&#30340;&#65292;&#24182;&#19988;&#26159;&#30456;&#23545;&#20110;pc(&#24403;&#21069;&#27491;&#22312;&#21462;&#25351;&#30340;&#25351;&#20196;&#22320;&#22336;&#65292;&#32780;&#38750;&#27491;&#22312;&#25191;&#34892;&#30340;&#24403;&#21069;ldr&#25351;&#20196;&#30340;&#22320;&#22336;)&#23492;&#23384;&#22120;&#36827;&#34892;&#20559;&#31227;&#12290;&#32780;&#31532;&#19977;&#22825;&#25351;&#20196;&#21017;&#26159;&#23558;main&#30340;&#32477;&#23545;&#22320;&#22336;0x00008790&#35013;&#36733;&#21040;r0&#12290;&#25152;&#20197;&#21487;&#20197;&#36890;&#36807;ldr&#25351;&#20196;&#36827;&#34892;&#30456;&#23545;&#20559;&#31227;&#26469;&#36339;&#36716;&#21040;C&#20989;&#25968;
<pre class="programlisting">
00008790 &lt;main&gt;:
    8790:       e1a0000f        mov     r0, pc
    8794:       e5901000        ldr     r1, [r0]
    8798:       e51f2010        ldr     r2, [pc, #-16]  ; 8790 &lt;main&gt;
    879c:       e59f0004        ldr     r0, [pc, #4]    ; 87a8 &lt;main+0x18&gt;
    87a0:       ebffff9d        bl      861c &lt;print&gt;
    87a4:       eafffff2        b       8774 &lt;quit&gt;
    87a8:       00008790        .word   0x00008790
</pre>
</div>
</div>
<div class="sect2" title="2.9. &#21327;&#22788;&#29702;&#22120;&#25351;&#20196;"><div class="titlepage"><div><div><h3 class="title"><a name="idp80211364"></a>2.9. &#21327;&#22788;&#29702;&#22120;&#25351;&#20196;</h3></div></div></div>

</div>
<div class="sect2" title="2.10. ARM&#27719;&#32534;&#20266;&#25351;&#20196;"><div class="titlepage"><div><div><h3 class="title"><a name="idp80211684"></a>2.10. ARM&#27719;&#32534;&#20266;&#25351;&#20196;</h3></div></div></div>
<div class="sect3" title="2.10.1. .macro"><div class="titlepage"><div><div><h4 class="title"><a name="idp80211972"></a>2.10.1. .macro</h4></div></div></div>
  <p>  
&#23439;&#25351;&#20196;&#26159;&#30001;.macro&#21644;.endm&#26469;&#23450;&#20041;&#24320;&#22987;&#21644;&#32467;&#26463;&#30340;&#19968;&#32452;&#25351;&#20196;&#30340;&#38598;&#21512;&#12290;&#23427;&#31867;&#20284;&#20110;C&#35821;&#35328;&#20013;&#30340;&#23439;&#20989;&#25968;&#65292;&#20351;&#29992;&#23427;&#23558;&#21487;&#20197;&#65306;
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#20351;&#20195;&#30721;&#21487;&#20197;&#37325;&#29992;&#65292;&#20943;&#23567;&#20195;&#30721;&#37327;&#12290;</li><li class="listitem">&#20351;&#31243;&#24207;&#36923;&#36753;&#26356;&#21152;&#28165;&#26224;</li></ul></div><p>
&#20266;&#25351;&#20196;&#26684;&#24335;&#65306;
</p><pre class="programlisting">
.macro macroname {$param1} {$param2} ...
@commands
.mend
</pre><p>
macroname&#26159;&#23450;&#20041;&#30340;&#23439;&#21517;&#65292;$paramx&#26159;&#23439;&#25351;&#20196;&#30340;&#21442;&#25968;&#65292;&#24403;&#23439;&#25351;&#20196;&#34987;&#23637;&#24320;&#24335;&#23558;&#34987;&#26367;&#25442;&#25104;&#30456;&#24212;&#30340;&#20540;&#65292;&#31867;&#20284;&#20110;&#20989;&#25968;&#20013;&#30340;&#24418;&#24335;&#21442;&#25968;&#12290;&#19968;&#20010;&#20363;&#23376;&#26159;Linux&#20869;&#26680;&#20013;&#29992;&#20110;&#25171;&#21360;&#20449;&#24687;&#30340;kputc&#23439;&#21629;&#20196;&#12290;&#22312;&#20351;&#29992;&#23439;&#21442;&#25968;&#26102;&#24517;&#39035;&#36825;&#26679;&#8220;\$param&#8221;&#34920;&#31034;&#21442;&#25968;&#12290;
</p><pre class="programlisting">
.macro  kphex,val,len
mov     r0, \val
mov     r1, #\len
bl      phex
.endm
</pre><p>
&#22312;C&#35821;&#35328;&#21644;&#27719;&#32534;&#35821;&#35328;&#30340;&#20132;&#20114;&#35843;&#29992;&#20013;&#65292;&#20351;&#29992;&#23439;&#21487;&#20197;&#31616;&#21270;&#21442;&#25968;&#30340;&#20256;&#36882;&#12290;&#21487;&#20197;&#20351;&#29992;.if&#23439;&#24320;&#20851;&#26469;&#23450;&#20041;&#23439;&#25351;&#20196;&#65292;.exitm&#21487;&#20197;&#36339;&#20986;&#23439;&#12290;&#19968;&#20010;&#36827;&#34892;&#31227;&#20301;&#36816;&#31639;&#30340;&#20363;&#23376;&#22914;&#19979;&#65306;
</p><pre class="programlisting">
.macro shiftleft reg, shift
.if \shift &lt; 0
mov \reg, \reg, asr #-\shift
.exitm
.endif
mov \reg, \reg, lsl #\shift
.endm
</pre><p>
  </p>  
  <p>
  </p>  
</div>
<div class="sect3" title="2.10.2. .rept"><div class="titlepage"><div><div><h4 class="title"><a name="idp80215548"></a>2.10.2. .rept</h4></div></div></div>
<p>
.rept &#29992;&#20110;&#37325;&#22797;&#25191;&#34892;&#19968;&#32452;&#25351;&#20196;&#65292;&#23427;&#30340;&#26684;&#24335;&#22914;&#19979;&#65306;
</p><pre class="programlisting">
.rept &lt;repeat&gt;
.endr
</pre><p>  
repeat&#25351;&#26126;&#37325;&#22797;&#25191;&#34892;&#30340;&#27425;&#25968;&#12290;&#19968;&#20010;&#20363;&#23376;&#26159;Linux&#20869;&#26680;&#20013;&#29992;&#20110;nop&#30340;&#25805;&#20316;&#65306;
</p><pre class="programlisting">
.rept 8
mov    r0, r0
.endr
</pre><p>  
</p>  
</div>
  <p>
  </p>  
  <p>
  </p>  
</div>
<div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a name="ftn.idp80189436" href="#idp80189436" class="para">1</a>] </sup>&#23613;&#31649;ARM&#25552;&#20379;&#20102;&#20016;&#23500;&#30340;&#30456;&#20851;&#25351;&#20196;&#65292;&#27604;&#22914;uadd8,uadd16&#31561;&#65292;&#20294;&#24182;&#19981;&#26159;&#25152;&#26377;&#32534;&#35793;&#22120;&#37117;&#33021;&#22815;&#25903;&#25345;&#36825;&#20123;&#25351;&#20196;&#12290;</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="index.html">&#19978;&#19968;&#39029;</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ar01s03.html">&#19979;&#19968;&#39029;</a></td></tr><tr><td width="40%" align="left" valign="top">Linux&#20869;&#26680;&#23398;&#20064;&#21644;&#30740;&#31350;&#21450;&#23884;&#20837;&#24335;(ARM)&#23398;&#20064;&#21644;&#30740;&#31350;&#30340;&#24320;&#25918;&#25991;&#26723; </td><td width="20%" align="center"><a accesskey="h" href="index.html">&#36215;&#22987;&#39029;</a></td><td width="40%" align="right" valign="top"> 3. ARM&#23547;&#22336;&#26041;&#24335;</td></tr></table></div></body></html>
