<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>22. &#32593;&#32476;&#35774;&#22791;&#39537;&#21160;</title><link rel="stylesheet" href="styles.css" type="text/css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="index.html" title="Linux&#20869;&#26680;&#23398;&#20064;&#21644;&#30740;&#31350;&#21450;&#23884;&#20837;&#24335;(ARM)&#23398;&#20064;&#21644;&#30740;&#31350;&#30340;&#24320;&#25918;&#25991;&#26723;"><link rel="up" href="index.html" title="Linux&#20869;&#26680;&#23398;&#20064;&#21644;&#30740;&#31350;&#21450;&#23884;&#20837;&#24335;(ARM)&#23398;&#20064;&#21644;&#30740;&#31350;&#30340;&#24320;&#25918;&#25991;&#26723;"><link rel="prev" href="ar01s21.html" title="21. Linux&#35774;&#22791;&#27169;&#22411;"><link rel="next" href="ar01s23.html" title="23. Linux&#27169;&#24335;&#35774;&#35745;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">22. &#32593;&#32476;&#35774;&#22791;&#39537;&#21160;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s21.html">&#19978;&#19968;&#39029;</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ar01s23.html">&#19979;&#19968;&#39029;</a></td></tr></table><hr></div><div class="sect1" title="22. &#32593;&#32476;&#35774;&#22791;&#39537;&#21160;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp81862180"></a>22. &#32593;&#32476;&#35774;&#22791;&#39537;&#21160;</h2></div></div></div>
<div class="sect2" title="22.1. MAC&#21644;PHY"><div class="titlepage"><div><div><h3 class="title"><a name="idp81862524"></a>22.1. MAC&#21644;PHY</h3></div></div></div>
<p>
&#20197;&#22826;&#32593;&#65288;Ethernet&#65289;&#26159;&#19968;&#31181;&#35745;&#31639;&#26426;&#23616;&#22495;&#32593;&#32452;&#32593;&#25216;&#26415;&#65292;&#35813;&#25216;&#26415;&#22522;&#20110;IEEE&#21046;&#23450;&#30340;IEEE802.3&#26631;&#20934;&#65292;&#23427;&#35268;&#23450;&#20102;&#21253;&#25324;&#29289;&#29702;&#23618;&#30340;&#36830;&#32447;&#12289;&#30005;&#20449;&#21495;&#21644;&#20171;&#36136;&#35775;&#38382;&#23618;&#21327;&#35758;&#30340;&#20869;&#23481;&#12290;&#20197;&#22826;&#32593;&#26159;&#24403;&#21069;&#24212;&#29992;&#26368;&#26222;&#36941;&#30340;&#23616;&#22495;&#32593;&#25216;&#26415;&#12290;&#23427;&#24456;&#22823;&#31243;&#24230;&#19978;&#21462;&#20195;&#20102;&#20854;&#20182;&#23616;&#22495;&#32593;&#26631;&#20934;&#65292;&#22914;&#20196;&#29260;&#29615;&#12289;FDDI&#21644;ARCNET&#12290;&#21382;&#32463;100M&#20197;&#22826;&#32593;&#22312;&#19978;&#19990;&#32426;&#26411;&#30340;&#39134;&#36895;&#21457;&#23637;&#21518;&#65292;&#30446;&#21069;&#21315;&#20806;&#20197;&#22826;&#32593;&#29978;&#33267;10G&#20197;&#22826;&#32593;&#27491;&#22312;&#22269;&#38469;&#32452;&#32455;&#21644;&#39046;&#23548;&#20225;&#19994;&#30340;&#25512;&#21160;&#19979;&#19981;&#26029;&#25299;&#23637;&#24212;&#29992;&#33539;&#22260;&#12290;&#22522;&#20110;&#20197;&#22826;&#32593;&#30340;&#24212;&#29992;&#19968;&#23450;&#26102;&#26399;&#20869;&#26159;&#30740;&#31350;&#24320;&#21457;&#28909;&#28857;&#12290;</p>
<p>
<span class="emphasis"><em>Ethernet&#30340;&#25509;&#21475;&#23454;&#36136;&#26159;MAC&#36890;&#36807;MII&#24635;&#32447;&#25511;&#21046;PHY&#30340;&#36807;&#31243;&#12290;</em></span>
</p>
<p>
MAC&#26159;Media Access Control&#30340;&#32553;&#20889;&#65292;&#21363;&#23186;&#20307;&#35775;&#38382;&#25511;&#21046;&#23376;&#23618;&#21327;&#35758;&#12290;&#35813;&#21327;&#35758;&#20301;&#20110;OSI&#19971;&#23618;&#21327;&#35758;&#20013;&#25968;&#25454;&#38142;&#36335;&#23618;&#30340;&#19979;&#21322;&#37096;&#20998;&#65292;&#20027;&#35201;&#36127;&#36131;&#25511;&#21046;&#19982;&#36830;&#25509;&#29289;&#29702;&#23618;&#30340;&#29289;&#29702;&#20171;&#36136;&#12290;&#22312;&#21457;&#36865;&#25968;&#25454;&#30340;&#26102;&#20505;&#65292;MAC&#21327;&#35758;&#21487;&#20197;&#20107;&#20808;&#21028;&#26029;&#26159;&#21542;&#21487;&#20197;&#21457;&#36865;&#25968;&#25454;&#65292;&#22914;&#26524;&#21487;&#20197;&#21457;&#36865;&#23558;&#32473;&#25968;&#25454;&#21152;&#19978;&#19968;&#20123;&#25511;&#21046;&#20449;&#24687;&#65292;&#26368;&#32456;&#23558;&#25968;&#25454;&#20197;&#21450;&#25511;&#21046;&#20449;&#24687;&#20197;&#35268;&#23450;&#30340;&#26684;&#24335;&#21457;&#36865;&#21040;&#29289;&#29702;&#23618;&#65307;&#22312;&#25509;&#25910;&#25968;&#25454;&#30340;&#26102;&#20505;&#65292;MAC&#21327;&#35758;&#39318;&#20808;&#21028;&#26029;&#36755;&#20837;&#30340;&#20449;&#24687;&#24182;&#26159;&#21542;&#21457;&#29983;&#20256;&#36755;&#38169;&#35823;&#65292;&#22914;&#26524;&#27809;&#26377;&#38169;&#35823;&#65292;&#21017;&#21435;&#25481;&#25511;&#21046;&#20449;&#24687;&#21457;&#36865;&#33267;LLC&#23618;&#12290;&#20197;&#22826;&#32593;MAC&#30001;IEEE-802.3&#20197;&#22826;&#32593;&#26631;&#20934;&#23450;&#20041;&#12290;
</p>
<p>
MII&#21363;&#23186;&#20307;&#29420;&#31435;&#25509;&#21475;, &#8220;&#23186;&#20307;&#29420;&#31435;&#8221;&#34920;&#26126;&#22312;&#19981;&#23545;MAC&#30828;&#20214;&#37325;&#26032;&#35774;&#35745;&#25110;&#26367;&#25442;&#30340;&#24773;&#20917;&#19979;&#65292;&#20219;&#20309;&#31867;&#22411;&#30340;PHY&#35774;&#22791;&#37117;&#21487;&#20197;&#19982;&#20854;&#20860;&#23481;&#24182;&#27491;&#24120;&#24037;&#20316;&#12290;&#21253;&#25324;&#20998;&#21035;&#29992;&#20110;&#21457;&#36865;&#22120;&#21644;&#25509;&#25910;&#22120;&#30340;&#20004;&#26465;&#29420;&#31435;&#20449;&#36947;&#12290;&#27599;&#26465;&#20449;&#36947;&#37117;&#26377;&#33258;&#24049;&#30340;&#25968;&#25454;&#12289;&#26102;&#38047;&#21644;&#25511;&#21046;&#20449;&#21495;&#12290;
</p>
<p>
MII&#20197;4&#20301;&#21322;&#23383;&#33410;&#26041;&#24335;&#20256;&#36865;&#25968;&#25454;&#21452;&#21521;&#20256;&#36755;&#65292;&#26102;&#38047;&#36895;&#29575;25MHz&#12290;&#20854;&#24037;&#20316;&#36895;&#29575;&#21487;&#36798;100Mb/s&#12290;MII&#31649;&#29702;&#25509;&#21475;&#26159;&#20010;&#21452;&#20449;&#21495;&#25509;&#21475;&#65292;&#19968;&#20010;&#26159;&#26102;&#38047;&#20449;&#21495;&#65292;&#21478;&#19968;&#20010;&#26159;&#25968;&#25454;&#20449;&#21495;&#12290;&#36890;&#36807;&#31649;&#29702;&#25509;&#21475;&#65292;&#19978;&#23618;&#33021;&#30417;&#35270;&#21644;&#25511;&#21046;PHY&#12290;&#20854;&#31649;&#29702;&#26159;&#20351;&#29992;SMI&#65288;Serial Management Interface&#65289;&#24635;&#32447;&#36890;&#36807;&#35835;&#20889;PHY&#30340;&#23492;&#23384;&#22120;&#26469;&#23436;&#25104;&#30340;&#12290;PHY&#37324;&#38754;&#30340;&#37096;&#20998;&#23492;&#23384;&#22120;&#26159;IEEE&#23450;&#20041;&#30340;&#65292;&#36825;&#26679;PHY&#25226;&#33258;&#24049;&#30340;&#30446;&#21069;&#30340;&#29366;&#24577;&#21453;&#26144;&#21040;&#23492;&#23384;&#22120;&#37324;&#38754;&#65292;MAC&#36890;&#36807;SMI&#24635;&#32447;&#19981;&#26029;&#30340;&#35835;&#21462;PHY&#30340;&#29366;&#24577;&#23492;&#23384;&#22120;&#20197;&#24471;&#30693;&#30446;&#21069;PHY&#30340;&#29366;&#24577;&#65292;&#20363;&#22914;&#36830;&#25509;&#36895;&#24230;&#65292;&#21452;&#24037;&#30340;&#33021;&#21147;&#31561;&#12290;&#24403;&#28982;&#20063;&#21487;&#20197;&#36890;&#36807;SMI&#35774;&#32622;PHY&#30340;&#23492;&#23384;&#22120;&#36798;&#21040;&#25511;&#21046;&#30340;&#30446;&#30340;&#65292;&#20363;&#22914;&#27969;&#25511;&#30340;&#25171;&#24320;&#20851;&#38381;&#65292;&#33258;&#21327;&#21830;&#27169;&#24335;&#36824;&#26159;&#24378;&#21046;&#27169;&#24335;&#31561;&#12290;&#19981;&#35770;&#26159;&#29289;&#29702;&#36830;&#25509;&#30340;MII&#24635;&#32447;&#21644;SMI&#24635;&#32447;&#36824;&#26159;PHY&#30340;&#29366;&#24577;&#23492;&#23384;&#22120;&#21644;&#25511;&#21046;&#23492;&#23384;&#22120;&#37117;&#26159;&#26377;IEEE&#30340;&#35268;&#33539;&#30340;&#65292;&#22240;&#27492;&#19981;&#21516;&#20844;&#21496;&#30340;MAC&#21644;PHY&#19968;&#26679;&#21487;&#20197;&#21327;&#35843;&#24037;&#20316;&#12290;&#24403;&#28982;&#20026;&#20102;&#37197;&#21512;&#19981;&#21516;&#20844;&#21496;&#30340;PHY&#30340;&#33258;&#24049;&#29305;&#26377;&#30340;&#19968;&#20123;&#21151;&#33021;&#65292;&#39537;&#21160;&#38656;&#35201;&#20570;&#30456;&#24212;&#30340;&#20462;&#25913;&#12290;
</p>
<p>
PHY&#26159;&#29289;&#29702;&#25509;&#21475;&#25910;&#21457;&#22120;&#65292;&#23427;&#23454;&#29616;&#29289;&#29702;&#23618;&#12290;&#21253;&#25324;MII/GMII&#65288;&#20171;&#36136;&#29420;&#31435;&#25509;&#21475;&#65289;&#23376;&#23618;&#12289;PCS&#65288;&#29289;&#29702;&#32534;&#30721;&#23376;&#23618;&#65289;&#12289;PMA&#65288;&#29289;&#29702;&#20171;&#36136;&#38468;&#21152;&#65289;&#23376;&#23618;&#12289;PMD&#65288;&#29289;&#29702;&#20171;&#36136;&#30456;&#20851;&#65289;&#23376;&#23618;&#12289;MDI&#23376;&#23618;&#12290;
</p>
<p>
100BaseTX&#37319;&#29992;4B/5B&#32534;&#30721;&#12290;PHY&#22312;&#21457;&#36865;&#25968;&#25454;&#30340;&#26102;&#20505;&#65292;&#25910;&#21040;MAC&#36807;&#26469;&#30340;&#25968;&#25454;&#65288;&#23545;PHY&#26469;&#35828;&#65292;&#27809;&#26377;&#24103;&#30340;&#27010;&#24565;&#65292;&#23545;&#23427;&#26469;&#35828;&#65292;&#37117;&#26159;&#25968;&#25454;&#32780;&#19981;&#31649;&#20160;&#20040;&#22320;&#22336;&#65292;&#25968;&#25454;&#36824;&#26159;CRC&#65289;&#65292;&#27599;4bit&#23601;&#22686;&#21152;1bit&#30340;&#26816;&#38169;&#30721;&#65292;&#28982;&#21518;&#25226;&#24182;&#34892;&#25968;&#25454;&#36716;&#21270;&#20026;&#20018;&#34892;&#27969;&#25968;&#25454;&#65292;&#20877;&#25353;&#29031;&#29289;&#29702;&#23618;&#30340;&#32534;&#30721;&#35268;&#21017;&#25226;&#25968;&#25454;&#32534;&#30721;&#65292;&#20877;&#21464;&#20026;&#27169;&#25311;&#20449;&#21495;&#25226;&#25968;&#25454;&#36865;&#20986;&#21435;&#12290;&#25910;&#25968;&#25454;&#26102;&#30340;&#27969;&#31243;&#21453;&#20043;&#12290;PHY&#36824;&#26377;&#20010;&#37325;&#35201;&#30340;&#21151;&#33021;&#23601;&#26159;&#23454;&#29616;CSMA/CD&#30340;&#37096;&#20998;&#21151;&#33021;&#12290;&#23427;&#21487;&#20197;&#26816;&#27979;&#21040;&#32593;&#32476;&#19978;&#26159;&#21542;&#26377;&#25968;&#25454;&#22312;&#20256;&#36865;&#65292;&#22914;&#26524;&#26377;&#25968;&#25454;&#22312;&#20256;&#36865;&#20013;&#23601;&#31561;&#24453;&#65292;&#19968;&#26086;&#26816;&#27979;&#21040;&#32593;&#32476;&#31354;&#38386;&#65292;&#20877;&#31561;&#24453;&#19968;&#20010;&#38543;&#26426;&#26102;&#38388;&#21518;&#23558;&#36865;&#25968;&#25454;&#20986;&#21435;&#12290;&#22914;&#26524;&#20004;&#20010;&#30896;&#24039;&#21516;&#26102;&#36865;&#20986;&#20102;&#25968;&#25454;&#65292;&#37027;&#26679;&#24517;&#23558;&#36896;&#25104;&#20914;&#31361;&#65292;&#36825;&#26102;&#20505;&#65292;&#20914;&#31361;&#26816;&#27979;&#26426;&#26500;&#21487;&#20197;&#26816;&#27979;&#21040;&#20914;&#31361;&#65292;&#28982;&#21518;&#21508;&#31561;&#24453;&#19968;&#20010;&#38543;&#26426;&#30340;&#26102;&#38388;&#37325;&#26032;&#21457;&#36865;&#25968;&#25454;&#12290;&#36825;&#20010;&#38543;&#26426;&#26102;&#38388;&#24456;&#26377;&#35762;&#31350;&#30340;&#65292;&#24182;&#19981;&#26159;&#19968;&#20010;&#24120;&#25968;&#65292;&#22312;&#19981;&#21516;&#30340;&#26102;&#21051;&#35745;&#31639;&#20986;&#26469;&#30340;&#38543;&#26426;&#26102;&#38388;&#37117;&#26159;&#19981;&#21516;&#30340;&#65292;&#32780;&#19988;&#26377;&#22810;&#37325;&#31639;&#27861;&#26469;&#24212;&#20184;&#20986;&#29616;&#27010;&#29575;&#24456;&#20302;&#30340;&#21516;&#20004;&#21488;&#20027;&#26426;&#20043;&#38388;&#30340;&#31532;&#20108;&#27425;&#20914;&#31361;&#12290;&#36890;&#20449;&#36895;&#29575;&#36890;&#36807;&#21452;&#26041;&#21327;&#21830;&#65292;&#21327;&#21830;&#30340;&#32467;&#26524;&#26159;&#20004;&#20010;&#35774;&#22791;&#20013;&#33021;&#21516;&#26102;&#25903;&#25345;&#30340;&#26368;&#22823;&#36895;&#24230;&#21644;&#26368;&#22909;&#30340;&#21452;&#24037;&#27169;&#24335;&#12290;&#36825;&#20010;&#25216;&#26415;&#34987;&#31216;&#20026;Auto Negotiation&#25110;&#32773;NWAY&#12290;&#38548;&#31163;&#21464;&#21387;&#22120;&#25226;PHY&#36865;&#20986;&#26469;&#30340;&#24046;&#20998;&#20449;&#21495;&#29992;&#24046;&#27169;&#32806;&#21512;&#30340;&#32447;&#22280;&#32806;&#21512;&#28388;&#27874;&#20197;&#22686;&#24378;&#20449;&#21495;&#65292;&#24182;&#19988;&#36890;&#36807;&#30005;&#30913;&#22330;&#30340;&#36716;&#25442;&#32806;&#21512;&#21040;&#36830;&#25509;&#32593;&#32447;&#30340;&#21478;&#22806;&#19968;&#31471;&#12290;RJ-45&#20013;1&#12289;2&#26159;&#20256;&#36865;&#25968;&#25454;&#30340;&#65292;3&#12289;6&#26159;&#25509;&#25910;&#25968;&#25454;&#30340;&#12290;&#26032;&#30340;PHY&#25903;&#25345;AUTO MDI-X&#21151;&#33021;(&#20063;&#38656;&#35201;&#38548;&#31163;&#21464;&#21387;&#22120;&#25903;&#25345;)&#12290;&#23427;&#21487;&#20197;&#23454;&#29616;RJ-45&#25509;&#21475;&#30340;1&#12289;2&#19978;&#30340;&#20256;&#36865;&#20449;&#21495;&#32447;&#21644;3&#12289;6&#19978;&#30340;&#25509;&#25910;&#20449;&#21495;&#32447;&#30340;&#21151;&#33021;&#33258;&#21160;&#20114;&#30456;&#20132;&#25442;&#12290;
</p>
</div>
<div class="sect2" title="22.2. MDIO&#21644;MII"><div class="titlepage"><div><div><h3 class="title"><a name="idp81869004"></a>22.2. MDIO&#21644;MII</h3></div></div></div>
<p>
  MII(Media Independent Interface)&#21363;&#23186;&#20307;&#29420;&#31435;&#25509;&#21475;&#65292;&#23427;&#26159;IEEE-802.3&#23450;&#20041;&#30340;&#20197;&#22826;&#32593;&#34892;&#19994;&#26631;&#20934;&#12290;MII&#25509;&#21475;&#19968;&#23450;&#20250;&#21253;&#21547;&#20004;&#37096;&#20998;:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#25968;&#25454;&#25509;&#21475;&#65306;&#21253;&#25324;&#20998;&#21035;&#29992;&#20110;&#21457;&#36865;&#22120;&#21644;&#25509;&#25910;&#22120;&#30340;&#20004;&#26465;&#29420;&#31435;&#20449;&#36947;&#12290;&#27599;&#26465;&#20449;&#36947;&#37117;&#26377;&#33258;&#24049;&#30340;&#25968;&#25454;&#12289;&#26102;&#38047;&#21644;&#25511;&#21046;&#20449;&#21495;&#12290;MII&#25968;&#25454;&#25509;&#21475;&#24635;&#20849;&#38656;&#35201;16&#20010;&#20449;&#21495;&#12290;</li><li class="listitem">MAC&#21644;PHY&#20043;&#38388;&#30340;&#31649;&#29702;&#25509;&#21475;(Management Interface)&#65306;&#31649;&#29702;&#25509;&#21475;&#26159;&#20010;&#21452;&#20449;&#21495;&#32447;&#25509;&#21475;&#65292;&#21482;&#26377;&#20004;&#26465;&#20449;&#21495;&#32447;&#65306;&#19968;&#20010;&#26159;&#26102;&#38047;&#20449;&#21495;MDC&#65292;&#21478;&#19968;&#20010;&#26159;&#25968;&#25454;&#20449;&#21495;MDIO&#12290;&#36890;&#36807;&#31649;&#29702;&#25509;&#21475;&#65292;&#19978;&#23618;&#33021;&#30417;&#35270;&#21644;&#25511;&#21046;PHY&#12290;MII&#31649;&#29702;&#25509;&#21475;&#20063;&#31216;&#20026;MDC/MDIO&#25509;&#21475;&#65292;&#25110;&#32773;&#31616;&#31216;&#20026;MDIO&#12290;</li></ul></div><p>
MII&#25509;&#21475;&#30340;&#31867;&#22411;&#26377;&#24456;&#22810;&#65292;&#24120;&#29992;&#30340;&#26377;MII&#12289;RMII&#12289;SMII&#12289;SSMII&#12289;SSSMII&#12289;GMII&#12289;RGMII&#12289;SGMII&#12289;TBI&#12289;RTBI&#12289;XGMII&#12289;XAUI&#12289;XLAUI&#31561;&#12290;&#25105;&#20204;&#22312;&#36825;&#37324;&#21482;&#35752;&#35770;MII&#12289;RMII&#12289;SMII&#12289;GMII&#25509;&#21475;&#12290;</p>
<p>MII &#25903;&#25345;10&#20806;&#21644;100&#20806;&#30340;&#25805;&#20316;&#65292;&#23427;&#35201;&#27714;&#26159;25&#20806;&#30340;&#24635;&#32447;&#26102;&#38047;&#65292;&#19968;&#20010;&#25509;&#21475;&#30001;14&#26681;&#32447;&#32452;&#25104;&#65288;&#27809;&#32771;&#34385;&#25910;&#21457;&#26102;&#38047;&#65289;&#65292;&#23427;&#30340;&#25903;&#25345;&#36824;&#26159;&#27604;&#36739;&#28789;&#27963;&#30340;&#65292;&#20294;&#26159;&#26377;&#19968;&#20010;&#32570;&#28857;&#26159;&#22240;&#20026;&#23427;&#19968;&#20010;&#31471;&#21475;&#29992;&#30340;&#20449;&#21495;&#32447;&#22826;&#22810;&#65292;&#22914;&#26524;&#19968;&#20010;8&#31471;&#21475;&#30340;&#20132;&#25442;&#26426;&#35201;&#29992;&#21040;112&#26681;&#32447;&#65292;16&#31471;&#21475;&#23601;&#35201;&#29992;&#21040;224&#26681;&#32447;&#65292;&#21040;32&#31471;&#21475;&#30340;&#35805;&#23601;&#35201;&#29992;&#21040;448 &#26681;&#32447;&#65292;&#19968;&#33324;&#25353;&#29031;&#36825;&#20010;&#25509;&#21475;&#20570;&#20132;&#25442;&#26426;&#65292;&#26159;&#19981;&#22826;&#29616;&#23454;&#30340;&#65292;&#25152;&#20197;&#29616;&#20195;&#30340;&#20132;&#25442;&#26426;&#30340;&#21046;&#20316;&#37117;&#20250;&#29992;&#21040;&#20854;&#23427;&#30340;&#19968;&#20123;&#20174;MII&#31616;&#21270;&#20986;&#26469;&#30340;&#26631;&#20934;&#65292;&#27604;&#22914;RMII&#12289;SMII&#12289;GMII &#31561;&#12290;</p>
<p>RMII&#26159;&#31616;&#21270;&#30340;MII&#25509;&#21475;&#65292;&#22312;&#25968;&#25454;&#30340;&#25910;&#21457;&#19978;&#23427;&#27604;MII&#25509;&#21475;&#23569;&#20102;&#19968;&#20493;&#30340;&#20449;&#21495;&#32447;&#65292;&#25152;&#20197;&#23427;&#19968;&#33324;&#35201;&#27714;&#26159;50&#20806;&#30340;&#24635;&#32447;&#26102;&#38047;&#12290;RMII&#19968;&#33324;&#29992;&#22312;&#22810;&#31471;&#21475;&#30340;&#20132;&#25442;&#26426;&#65292;&#23427;&#19981;&#26159;&#27599;&#20010;&#31471;&#21475;&#23433;&#25490;&#25910;&#12289;&#21457;&#20004;&#20010;&#26102;&#38047;&#65292;&#32780;&#26159;&#25152;&#26377;&#30340;&#25968;&#25454;&#31471;&#21475;&#20844;&#29992;&#19968;&#20010;&#26102;&#38047;&#29992;&#20110;&#25152;&#26377;&#31471;&#21475;&#30340;&#25910;&#21457;&#65292;&#36825;&#37324;&#23601;&#33410;&#30465;&#20102;&#19981;&#23569;&#30340;&#31471;&#21475;&#25968;&#30446;&#12290;RMII&#30340;&#19968;&#20010;&#31471;&#21475;&#35201;&#27714;7 &#26681;&#25968;&#25454;&#32447;&#65292;&#27604;MII&#23569;&#20102;&#19968;&#20493;&#65292;&#25152;&#20197;&#20132;&#25442;&#26426;&#33021;&#22815;&#25509;&#20837;&#22810;&#19968;&#20493;&#25968;&#25454;&#30340;&#31471;&#21475;&#12290;</p>
<p>SMII&#26159;&#30001;&#24605;&#31185;&#25552;&#20986;&#30340;&#19968;&#31181;&#23186;&#20307;&#25509;&#21475;&#65292;&#23427;&#26377;&#27604;RMII&#26356;&#23569;&#30340;&#20449;&#21495;&#32447;&#25968;&#30446;&#65292;S&#34920;&#31034;&#20018;&#34892;&#30340;&#24847;&#24605;&#12290;&#22240;&#20026;&#23427;&#21482;&#29992;&#19968;&#26681;&#20449;&#21495;&#32447;&#21457;&#36865;&#25968;&#25454;&#65292;&#19968;&#26681;&#20449;&#21495;&#32447;&#25509;&#25910;&#25968;&#25454;&#65292;&#25152;&#20197;&#22312;&#26102;&#38047;&#19978;&#20026;&#20102;&#28385;&#36275;100M&#30340;&#38656;&#27714;&#65292;&#23427;&#30340;&#26102;&#38047;&#39057;&#29575;&#24456;&#39640;&#65292; &#36798;&#21040;&#20102;125&#20806;&#65292;&#37319;&#29992;125&#20806;&#26102;&#38047;&#30340;&#30446;&#30340;&#26159;&#22240;&#20026;&#25968;&#25454;&#32447;&#37324;&#38754;&#20250;&#20256;&#36865;&#19968;&#20123;&#25511;&#21046;&#20449;&#24687;&#12290;SMII&#19968;&#20010;&#31471;&#21475;&#20165;&#29992;4&#26681;&#20449;&#21495;&#32447;&#23436;&#25104;100M&#20449;&#21495;&#30340;&#20256;&#36755;&#65292;&#27604;&#36215;RMII &#24046;&#19981;&#22810;&#21448;&#23569;&#20102;&#19968;&#20493;&#30340;&#20449;&#21495;&#32447;&#12290;SMII &#22312;&#24037;&#19994;&#30028;&#30340;&#25903;&#25345;&#21147;&#24230;&#26159;&#24456;&#39640;&#30340;&#12290;&#21516;&#29702;&#65292;&#25152;&#26377;&#31471;&#21475;&#30340;&#25968;&#25454;&#25910;&#21457;&#37117;&#20844;&#29992;&#21516;&#19968;&#20010;&#22806;&#37096;&#30340;125M&#26102;&#38047;&#12290;</p>
<p>GMII(Gigabit MII) &#26159;&#21315;&#20806;&#32593;&#30340;MII &#25509;&#21475;&#65292;GMII&#37319;&#29992;8&#20301;&#25509;&#21475;&#25968;&#25454;&#65292;&#19968;&#20010;&#25509;&#21475;&#30001;22&#26681;&#32447;&#32452;&#25104;&#65288;&#27809;&#32771;&#34385;&#25910;&#21457;&#26102;&#38047;&#65289;&#24037;&#20316;&#26102;&#38047;125MHz&#65292;&#22240;&#27492;&#20256;&#36755;&#36895;&#29575;&#21487;&#36798;1000Mbps&#12290;&#21516;&#26102;&#20860;&#23481;MII &#25152;&#35268;&#23450;&#30340;10/100 Mbps&#24037;&#20316;&#26041;&#24335;&#12290;</p>
</div>
<div class="sect2" title="22.3. MII&#25968;&#25454;&#25509;&#21475;"><div class="titlepage"><div><div><h3 class="title"><a name="idp81873756"></a>22.3. MII&#25968;&#25454;&#25509;&#21475;</h3></div></div></div>
MII&#25968;&#25454;&#25509;&#21475;&#24635;&#20849;&#38656;&#35201;16&#20010;&#20449;&#21495;&#32447;&#65292;&#22914;&#22270;&#25152;&#31034;&#65306;
<div class="figure"><a name="idp81873820"></a><p class="title"><b>&#22270; 121. MII&#25968;&#25454;&#25509;&#21475;&#25509;&#32447;&#22270;</b></p><div class="figure-contents"><div><img src="images/mdio/mii.gif" alt="MII&#25968;&#25454;&#25509;&#21475;&#25509;&#32447;&#22270;"></div></div></div><br class="figure-break">
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">TXD[3:0]&#65306;&#25968;&#25454;&#21457;&#36865;&#20449;&#21495;&#65292;&#20849;4&#26681;&#20449;&#21495;&#32447;&#65307;</li><li class="listitem">RXD[3:0]&#65306;&#25968;&#25454;&#25509;&#25910;&#20449;&#21495;&#65292;&#20849;4&#26681;&#20449;&#21495;&#32447;&#65307;</li><li class="listitem">TX_ER(Transmit Error)&#65306;&#21457;&#36865;&#25968;&#25454;&#38169;&#35823;&#25552;&#31034;&#20449;&#21495;&#65292;&#21516;&#27493;&#20110;TX_CLK&#65292;&#39640;&#30005;&#24179;&#26377;&#25928;&#65292;&#34920;&#31034;TX_ER&#26377;&#25928;&#26399;&#20869;&#20256;&#36755;&#30340;&#25968;&#25454;&#26080;&#25928;&#12290;&#23545;&#20110;10Mbps&#36895;&#29575;&#19979;&#65292;TX_ER&#19981;&#36215;&#20316;&#29992;&#65307;</li><li class="listitem">RX_ER(Receive Error)&#65306;&#25509;&#25910;&#25968;&#25454;&#38169;&#35823;&#25552;&#31034;&#20449;&#21495;&#65292;&#21516;&#27493;&#20110;RX_CLK&#65292;&#39640;&#30005;&#24179;&#26377;&#25928;&#65292;&#34920;&#31034;RX_ER&#26377;&#25928;&#26399;&#20869;&#20256;&#36755;&#30340;&#25968;&#25454;&#26080;&#25928;&#12290;&#23545;&#20110;10Mbps&#36895;&#29575;&#19979;&#65292;RX_ER&#19981;&#36215;&#20316;&#29992;&#65307;</li><li class="listitem">TX_EN(Transmit Enable)&#65306; &#21457;&#36865;&#20351;&#33021;&#20449;&#21495;&#65292;&#21482;&#26377;&#22312;TX_EN&#26377;&#25928;&#26399;&#20869;&#20256;&#30340;&#25968;&#25454;&#25165;&#26377;&#25928;&#65307;</li><li class="listitem">RX_DV(Reveive Data Valid)&#65306; &#25509;&#25910;&#25968;&#25454;&#26377;&#25928;&#20449;&#21495;&#65292;&#20316;&#29992;&#31867;&#22411;&#20110;&#21457;&#36865;&#36890;&#36947;&#30340;TX_EN&#65307;</li><li class="listitem">TX_CLK&#65306;&#21457;&#36865;&#21442;&#32771;&#26102;&#38047;&#65292;100Mbps&#36895;&#29575;&#19979;&#65292;&#26102;&#38047;&#39057;&#29575;&#20026;25MHz&#65292;10Mbps&#36895;&#29575;&#19979;&#65292;&#26102;&#38047;&#39057;&#29575;&#20026;2.5MHz&#12290;&#27880;&#24847;&#65292;TX_CLK&#26102;&#38047;&#30340;&#26041;&#21521;&#26159;&#20174;PHY&#20391;&#25351;&#21521;MAC&#20391;&#30340;&#65292;&#22240;&#20026;&#27492;&#26102;&#38047;&#26159;&#30001;PHY&#25552;&#20379;&#30340;&#12290;</li><li class="listitem">RX_CLK&#65306;&#25509;&#25910;&#25968;&#25454;&#21442;&#32771;&#26102;&#38047;&#65292;100Mbps&#36895;&#29575;&#19979;&#65292;&#26102;&#38047;&#39057;&#29575;&#20026;25MHz&#65292;10Mbps&#36895;&#29575;&#19979;&#65292;&#26102;&#38047;&#39057;&#29575;&#20026;2.5MHz&#12290;RX_CLK&#20063;&#26159;&#30001;PHY&#20391;&#25552;&#20379;&#30340;&#12290;</li><li class="listitem"> CRS&#65306;Carrier Sense&#65292;&#36733;&#27874;&#20390;&#27979;&#20449;&#21495;&#65292;&#19981;&#38656;&#35201;&#21516;&#27493;&#20110;&#21442;&#32771;&#26102;&#38047;&#65292;&#21482;&#35201;&#26377;&#25968;&#25454;&#20256;&#36755;&#65292;CRS&#23601;&#26377;&#25928;&#65292;&#21478;&#22806;&#65292;CRS&#21482;&#22312;&#21322;&#21452;&#24037;&#27169;&#24335;&#19979;&#26377;&#25928;&#65307;</li><li class="listitem"> COL&#65306;Collision Detectd&#65292;&#20914;&#31361;&#26816;&#27979;&#20449;&#21495;&#65292;&#19981;&#38656;&#35201;&#21516;&#27493;&#20110;&#21442;&#32771;&#26102;&#38047;&#65292;&#21482;&#22312;&#21322;&#21452;&#24037;&#27169;&#24335;&#19979;&#26377;&#25928;&#12290; </li></ul></div>
&#35760;&#20837;TX_CLK&#21644;RX_CLK&#65292;MII&#25509;&#21475;&#19968;&#20849;&#26377;16&#26681;&#32447;&#12290;MII&#20197;4&#20301;&#21322;&#23383;&#33410;&#26041;&#24335;&#20256;&#36865;&#25968;&#25454;&#21452;&#21521;&#20256;&#36755;&#65292;&#26102;&#38047;&#39057;&#29575;25MHz&#65292;&#20854;&#24037;&#20316;&#36895;&#29575;&#21487;&#36798;100Mb/s&#12290;&#24403;&#26102;&#38047;&#39057;&#29575;&#20026;2.5MHz&#26102;&#65292;&#24037;&#20316;&#22312;10Mb/s&#12290;
</div>
<div class="sect2" title="22.4. RMII&#25968;&#25454;&#25509;&#21475;"><div class="titlepage"><div><div><h3 class="title"><a name="idp81874980"></a>22.4. RMII&#25968;&#25454;&#25509;&#21475;</h3></div></div></div>
RMII&#21363;Reduced MII&#65292;&#26159;MII&#30340;&#31616;&#21270;&#29256;&#65292;&#20449;&#21495;&#32447;&#25968;&#37327;&#30001;MII&#30340;14&#26681;&#20943;&#23569;&#20026;7&#26681;&#65292;&#20854;&#20013;CLK_REF&#20026;&#22806;&#37096;&#26102;&#38047;&#28304;&#12290;
<div class="figure"><a name="idp81879308"></a><p class="title"><b>&#22270; 122. RMII&#25968;&#25454;&#25509;&#21475;&#25509;&#32447;&#22270;</b></p><div class="figure-contents"><div><img src="images/mdio/rmii.gif" alt="RMII&#25968;&#25454;&#25509;&#21475;&#25509;&#32447;&#22270;"></div></div></div><br class="figure-break">
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">TXD[1:0]&#65306;&#25968;&#25454;&#21457;&#36865;&#20449;&#21495;&#32447;&#65292;&#25968;&#25454;&#20301;&#23485;&#20026;2&#65292;&#26159;MII&#25509;&#21475;&#30340;&#19968;&#21322;&#65307;</li><li class="listitem">RXD[1:0]&#65306;&#25968;&#25454;&#25509;&#25910;&#20449;&#21495;&#32447;&#65292;&#25968;&#25454;&#20301;&#23485;&#20026;2&#65292;&#26159;MII&#25509;&#21475;&#30340;&#19968;&#21322;&#65307;</li><li class="listitem">TX_EN(Transmit Enable)&#65306;&#25968;&#25454;&#21457;&#36865;&#20351;&#33021;&#20449;&#21495;&#65292;&#19982;MII&#25509;&#21475;&#20013;&#30340;&#35813;&#20449;&#21495;&#32447;&#21151;&#33021;&#19968;&#26679;&#65307;</li><li class="listitem">RX_ER(Receive Error)&#65306;&#25968;&#25454;&#25509;&#25910;&#38169;&#35823;&#25552;&#31034;&#20449;&#21495;&#65292;&#19982;MII&#25509;&#21475;&#20013;&#30340;&#35813;&#20449;&#21495;&#32447;&#21151;&#33021;&#19968;&#26679;&#65307;</li><li class="listitem">CLK_REF&#65306;&#26159;&#30001;&#22806;&#37096;&#26102;&#38047;&#28304;&#25552;&#20379;&#30340;50MHz&#21442;&#32771;&#26102;&#38047;&#65292;&#25910;&#21457;&#20849;&#29992;&#65292;&#19982;MII&#25509;&#21475;&#19981;&#21516;(MII&#25509;&#21475;&#20013;&#30340;&#25509;&#25910;&#26102;&#38047;&#21644;&#21457;&#36865;&#26102;&#38047;&#26159;&#20998;&#24320;&#30340;&#65292;&#32780;&#19988;&#37117;&#26159;&#30001;PHY&#33455;&#29255;&#25552;&#20379;&#32473;MAC&#33455;&#29255;&#30340;)&#12290;&#36825;&#37324;&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;&#30001;&#20110;&#25968;&#25454;&#25509;&#25910;&#26102;&#38047;&#26159;&#30001;&#22806;&#37096;&#26230;&#25391;&#25552;&#20379;&#32780;&#19981;&#26159;&#30001;&#36733;&#27874;&#20449;&#21495;&#25552;&#21462;&#65292;&#25152;&#20197;&#22312;PHY&#23618;&#33455;&#29255;&#20869;&#30340;&#25968;&#25454;&#25509;&#25910;&#37096;&#20998;&#38656;&#35201;&#35774;&#35745;&#19968;&#20010;FIFO&#65292;&#29992;&#26469;&#21327;&#35843;&#20004;&#20010;&#19981;&#21516;&#30340;&#26102;&#38047;&#12290;</li><li class="listitem">CRS_DV&#65306;&#27492;&#20449;&#21495;&#26159;&#30001;MII&#25509;&#21475;&#20013;&#30340;RX_DV&#21644;CRS&#20004;&#20010;&#20449;&#21495;&#21512;&#24182;&#32780;&#25104;&#12290;&#24403;&#20171;&#36136;&#19981;&#31354;&#38386;&#26102;&#65292;CRS_DV&#21644;RE_CLK&#30456;&#24322;&#27493;&#30340;&#26041;&#24335;&#32473;&#20986;&#12290;&#24403;CRS&#27604;RX_DV&#26089;&#32467;&#26463;&#26102;(&#21363;&#36733;&#27874;&#28040;&#22833;&#32780;&#38431;&#21015;&#20013;&#36824;&#26377;&#25968;&#25454;&#35201;&#20256;&#36755;&#26102;)&#65292;&#23601;&#20250;&#20986;&#29616;CRS_DV&#22312;&#21322;&#20301;&#20803;&#32452;&#30340;&#36793;&#30028;25MHz/2.5MHz&#30340;&#39057;&#29575;&#22312;0&#12289;1&#20043;&#38388;&#30340;&#26469;&#22238;&#20999;&#25442;&#12290;&#22240;&#27492;&#65292;MAC&#33021;&#22815;&#20174;CRS_DV&#20013;&#31934;&#30830;&#30340;&#24674;&#22797;&#20986;RX_DV&#21644;CRS&#12290;</li></ul></div>
<p>&#22312;100Mbps&#36895;&#29575;&#26102;&#65292;TX/RX&#27599;&#20010;&#26102;&#38047;&#21608;&#26399;&#37319;&#26679;&#19968;&#20010;&#25968;&#25454;&#65307;&#22312;10Mbps&#36895;&#29575;&#26102;&#65292;TX/RX&#27599;&#38548;10&#20010;&#21608;&#26399;&#37319;&#26679;&#19968;&#20010;&#25968;&#25454;&#65292;&#22240;&#32780;TX/RX&#25968;&#25454;&#38656;&#35201;&#22312;&#25968;&#25454;&#32447;&#19978;&#20445;&#30041;10&#20010;&#21608;&#26399;&#65292;&#30456;&#24403;&#20110;&#19968;&#20010;&#25968;&#25454;&#21457;&#36865;10&#27425;&#12290;</p>
<p>&#24403;PHY&#23618;&#33455;&#29255;&#25910;&#21040;&#26377;&#25928;&#30340;&#36733;&#27874;&#20449;&#21495;&#21518;&#65292;CRS_DV&#20449;&#21495;&#21464;&#20026;&#26377;&#25928;&#65292;&#27492;&#26102;&#22914;&#26524;FIFO&#20013;&#36824;&#27809;&#26377;&#25968;&#25454;&#65292;&#21017;&#23427;&#20250;&#21457;&#36865;&#20986;&#20840;0&#30340;&#25968;&#25454;&#32473;MAC&#65292;&#28982;&#21518;&#24403;FIFO&#20013;&#22635;&#20837;&#26377;&#25928;&#30340;&#25968;&#25454;&#24103;&#65292;&#25968;&#25454;&#24103;&#30340;&#24320;&#22836;&#26159;&#8220;101010---&#8221;&#20132;&#21449;&#30340;&#21069;&#23548;&#30721;&#65292;&#24403;&#25968;&#25454;&#20013;&#20986;&#29616;&#8220;01&#8221;&#30340;&#27604;&#29305;&#26102;&#65292;&#20195;&#34920;&#27491;&#24335;&#25968;&#25454;&#20256;&#36755;&#24320;&#22987;&#65292;MAC&#33455;&#29255;&#26816;&#27979;&#21040;&#36825;&#19968;&#21464;&#21270;&#65292;&#20174;&#32780;&#24320;&#22987;&#25509;&#25910;&#25968;&#25454;&#12290;</p>
<p>&#24403;&#22806;&#37096;&#36733;&#27874;&#20449;&#21495;&#28040;&#22833;&#21518;&#65292;CRS_DV&#20250;&#21464;&#20026;&#26080;&#25928;&#65292;&#20294;&#22914;&#26524;FIFO&#20013;&#36824;&#26377;&#25968;&#25454;&#35201;&#21457;&#36865;&#26102;&#65292;CRS_DV&#22312;&#19979;&#19968;&#21608;&#26399;&#21448;&#20250;&#21464;&#20026;&#26377;&#25928;&#65292;&#28982;&#21518;&#20877;&#26080;&#25928;&#20877;&#26377;&#25928;&#65292;&#30693;&#36947;FIFO&#20013;&#25968;&#25454;&#21457;&#36865;&#23436;&#20026;&#27490;&#12290;</p>
</div>
<div class="sect2" title="22.5. MII&#31649;&#29702;&#25509;&#21475;MDIO"><div class="titlepage"><div><div><h3 class="title"><a name="idp81884068"></a>22.5. MII&#31649;&#29702;&#25509;&#21475;MDIO</h3></div></div></div>
&#31649;&#29702;&#25509;&#21475;&#26377;&#20004;&#26465;&#20449;&#21495;&#32447;&#32452;&#25104;&#65306;MDC&#37197;&#32622;&#25509;&#21475;&#26102;&#38047;&#65292;&#26368;&#39640;&#36895;&#29575;&#21487;&#36798;8.3MHz&#65292;MDIO&#26159;&#31649;&#29702;&#25968;&#25454;&#30340;&#36755;&#20837;&#36755;&#20986;&#21452;&#21521;&#25509;&#21475;&#65292;&#25968;&#25454;&#26159;&#19982;MDC&#26102;&#38047;&#21516;&#27493;&#30340;&#12290;
<p>&#31649;&#29702;&#37197;&#32622;&#25509;&#21475;&#25511;&#21046;PHY&#30340;&#29305;&#24615;&#12290;&#35813;&#25509;&#21475;&#26377;32&#20010;&#23492;&#23384;&#22120;&#22320;&#22336;&#65292;&#27599;&#20010;&#22320;&#22336;16&#20301;&#12290;&#20854;&#20013;&#21069;16&#20010;&#24050;&#32463;&#22312;&#8220;IEEE 802.3,2000-22.2.4 Management Functions&#8221;&#20013;&#35268;&#23450;&#20102;&#29992;&#36884;&#65292;&#20854;&#20313;&#30340;&#21017;&#30001;&#21508;&#22120;&#20214;&#21378;&#21830;&#33258;&#24049;&#25351;&#23450;&#12290;
</p>
<div class="figure"><a name="idp81885036"></a><p class="title"><b>&#22270; 123. MDIO&#25805;&#20316;&#26102;&#24207;</b></p><div class="figure-contents"><div><img src="images/mdio/mdio_opt.gif" alt="MDIO&#25805;&#20316;&#26102;&#24207;"></div></div></div><br class="figure-break">
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">MDIO&#25509;&#21475;&#22312;&#27809;&#26377;&#20256;&#36755;&#25968;&#25454;&#30340;&#31354;&#38386;(IDLE)&#29366;&#24577;&#25968;&#25454;&#32447;MDIO&#22788;&#20110;&#39640;&#38459;&#24577;1&#12290;</li><li class="listitem">MDIO&#20986;&#29616;&#19968;&#20010;2bit&#30340;&#24320;&#22987;&#26631;&#35782;&#30721;(01)&#19968;&#20010;&#35835;/&#20889;&#25805;&#20316;&#24320;&#22987;&#12290; </li><li class="listitem">MDIO&#20986;&#29616;&#19968;&#20010;2bit&#25968;&#25454;&#26469;&#26631;&#35782;&#26159;&#35835;&#25805;&#20316;(10)&#36824;&#26159;&#20889;&#25805;&#20316;(01)&#12290; </li><li class="listitem">MDIO&#20986;&#29616;&#19968;&#20010;5bit&#25968;&#25454;&#26631;&#35782;PHY&#30340;&#22320;&#22336;&#12290; MDIO&#20986;&#29616;&#19968;&#20010;5bitPHY&#23492;&#23384;&#22120;&#22320;&#22336;&#12290;</li><li class="listitem">MDIO&#38656;&#35201;2&#20010;&#26102;&#38047;&#30340;&#35775;&#38382;&#26102;&#38388;&#12290; MDIO&#20018;&#34892;&#35835;&#20986;/&#20889;&#20837;16bit&#30340;&#23492;&#23384;&#22120;&#25968;&#25454;&#12290; </li><li class="listitem">MDIO&#24674;&#22797;&#25104;IDLE&#29366;&#24577;&#65292;&#21516;&#26102;MDIO&#36827;&#20837;&#39640;&#38459;&#29366;&#24577;&#12290;</li></ul></div> 
</div>
<div class="sect2" title="22.6. &#24120;&#29992;&#21333;&#21475;&#20197;&#22826;&#32593;&#25511;&#21046;&#22120;"><div class="titlepage"><div><div><h3 class="title"><a name="idp81887708"></a>22.6. &#24120;&#29992;&#21333;&#21475;&#20197;&#22826;&#32593;&#25511;&#21046;&#22120;</h3></div></div></div>
<p>
&#22823;&#37096;&#20998;&#19981;&#26159;&#19987;&#38376;&#38024;&#23545;&#20197;&#22826;&#32593;&#32593;&#32476;&#24212;&#29992;&#30340;&#23884;&#20837;&#24335;&#35774;&#22791;&#35774;&#22791;&#65292;&#27604;&#22914;GPS&#65292;&#30417;&#27979;&#35774;&#22791;&#31561;&#21482;&#38656;&#35201;&#31616;&#21333;&#30340;&#32593;&#32476;&#25509;&#20837;&#21151;&#33021;&#65292;&#20063;&#21363;&#23558;&#20449;&#24687;&#19978;&#20256;&#25110;&#32773;&#19979;&#36733;&#30340;&#21151;&#33021;&#65292;&#27492;&#26102;&#21482;&#38656;&#35201;&#25903;&#25345;&#21333;RJ45&#21475;&#30340;&#20197;&#22826;&#32593;&#25511;&#21046;&#33455;&#29255;&#21363;&#21487;&#65292;&#36825;&#31867;&#20135;&#21697;&#30340;&#20215;&#26684;&#20415;&#23452;&#65292;&#25509;&#21475;&#31616;&#21333;&#65292;&#26131;&#20110;&#20351;&#29992;&#12290;&#36890;&#24120;&#24320;&#21457;&#26495;&#25152;&#25903;&#25345;&#30340;&#20197;&#22826;&#32593;&#25511;&#21046;&#22120;&#26377;Davicom&#30340;DM9000&#31995;&#21015;&#21644;Cirrus Logic&#30340;CS8900&#31995;&#21015;&#12290;
</p>
<p>
&#23545;&#20110;&#36335;&#30001;&#22120;&#65292;&#20132;&#25442;&#26426;&#65292;&#38450;&#28779;&#22681;&#31561;&#36825;&#20123;&#32593;&#32476;&#35774;&#22791;&#36890;&#24120;&#38656;&#35201;&#22810;&#21475;&#30340;&#21151;&#33021;&#24378;&#22823;&#30340;&#20132;&#25442;&#33455;&#29255;&#12290;&#36825;&#20123;&#33455;&#29255;&#20855;&#26377;&#22823;&#21534;&#21520;&#37327;&#65292;&#25509;&#21475;&#20016;&#23500;&#65292;&#21151;&#33021;&#36873;&#39033;&#20247;&#22810;&#65292;&#32531;&#23384;&#22823;&#31561;&#29305;&#28857;&#12290;&#26377;&#20123;SOC CPU&#24050;&#32463;&#23558;&#20197;&#22826;&#32593;&#25511;&#21046;&#22120;&#20316;&#20026;&#29255;&#19978;&#23376;&#31995;&#32479;&#38598;&#25104;&#21040;CPU&#20869;&#37096;&#65292;&#36825;&#36827;&#19968;&#27493;&#25552;&#39640;&#20102;&#25968;&#25454;&#20256;&#36755;&#25968;&#37327;&#21644;&#31283;&#23450;&#24615;&#12290;&#36825;&#31867;&#33455;&#29255;&#30340;&#21378;&#21830;&#20027;&#35201;&#26377;Broadcom&#65292;Ralink&#65292;Marvell&#31561;&#12290;&#19982;&#27492;&#21516;&#26102;&#36825;&#31867;&#33455;&#29255;&#30340;&#20307;&#31215;&#20063;&#30456;&#23545;&#36739;&#22823;&#65292;&#20215;&#26684;&#36739;&#39640;&#12290;
</p>
&#25645;&#36733;&#19977;&#26143;S3C&#31995;&#21015;CPU&#30340;&#24320;&#21457;&#26495;&#36890;&#24120;&#20250;&#36873;&#29992;DM9000&#25110;&#32773;DM9000A&#12290;&#36825;&#26159;&#30001;&#20110;S3C&#31995;&#21015;&#38024;&#23545;&#22810;&#23186;&#20307;&#35774;&#22791;&#30340;&#24320;&#21457;&#65292;&#32780;&#38750;&#32593;&#32476;&#35774;&#22791;&#65292;&#25152;&#20197;&#23427;&#27809;&#26377;&#25552;&#20379;MII/MDIO&#31561;&#25509;&#21475;&#12290;DM9000A&#26159;&#22312;DM9000&#22522;&#30784;&#19978;&#36827;&#34892;&#20102;&#37096;&#20998;&#21151;&#33021;&#30340;&#20462;&#25913;&#65306;
<div class="table"><a name="idp81889684"></a><p class="title"><b>&#34920; 34. DM9000&#31995;&#21015;&#21151;&#33021;&#27604;&#36739;</b></p><div class="table-contents">
<table summary="DM9000&#31995;&#21015;&#21151;&#33021;&#27604;&#36739;" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>&#21151;&#33021;</th><th>DM9000</th><th>DM9000A</th></tr></thead><tbody><tr><td>&#23553;&#35013;</td><td>LQFP 100Pin</td><td>LQFP 48Pin</td></tr><tr><td>&#25509;&#21475;</td><td>ISA I/O MII</td><td>I/O</td></tr><tr><td>I/O&#20301;&#23485;</td><td>8/16/32</td><td>8/16</td></tr><tr><td>Auto MDIX</td><td>&#19981;&#25903;&#25345;</td><td>&#25903;&#25345;</td></tr><tr><td>10/100M</td><td>&#25903;&#25345;</td><td>&#25903;&#25345;</td></tr><tr><td>SRAM</td><td>4K Dword</td><td>16K Bytes</td></tr><tr><td>GPIO</td><td>4 Pin</td><td>&#19981;&#25903;&#25345;</td></tr><tr><td>MDIO</td><td>&#25903;&#25345;</td><td>&#25903;&#25345;</td></tr><tr><td>IP/TCP/UDP&#26657;&#39564;</td><td>&#19981;&#25903;&#25345;</td><td>&#25903;&#25345;</td></tr><tr><td>&#24212;&#29992;</td><td colspan="2">VoIP CPE (ATA, IP Phone, Video Phone) IP STB, IPC, Internet Radio</td></tr></tbody></table>
</div></div><br class="table-break">
Auto MDIX&#26159;&#25351;&#20132;&#21449;&#32593;&#32447;&#21644;&#30452;&#36830;&#32593;&#32447;&#21487;&#20197;&#21516;&#26102;&#25903;&#25345;&#65292;&#22914;&#26524;&#26159;&#30452;&#36830;&#32593;&#32447;&#21017;&#33258;&#21160;&#36716;&#25442;&#12290;
<div class="figure"><a name="idp81897948"></a><p class="title"><b>&#22270; 124. DM9000&#21151;&#33021;&#22270;</b></p><div class="figure-contents"><div><img src="images/mdio/dm9000.gif" alt="DM9000&#21151;&#33021;&#22270;"></div></div></div><br class="figure-break">
&#30001;&#20110;DM9000&#30340;&#31649;&#33050;&#22810;&#20986;DM9000A&#30340;1&#20493;&#65292;&#25152;&#20197;&#23427;&#21516;&#26102;&#25552;&#20379;&#20102;I/O&#25509;&#21475;&#21644;MII&#25509;&#21475;&#12290;&#24182;&#19988;&#25552;&#20379;&#20102;&#22235;&#20010;GPIO&#31649;&#33050;&#65292;&#26368;&#22810;32&#20301;&#30340;&#25968;&#25454;&#22320;&#22336;&#24635;&#32447;&#12290;&#20294;&#26159;&#30001;&#20110;&#20854;&#24320;&#21457;&#36739;&#26089;&#65292;&#24182;&#27809;&#26377;&#38598;&#25104;Auto MDIX&#27169;&#22359;&#65292;&#20294;&#26159;&#36825;&#19968;&#21151;&#33021;&#22312;&#24456;&#22810;&#26102;&#20505;&#37117;&#24456;&#26377;&#29992;&#12290;&#21478;&#22806;&#27880;&#24847;&#21040;&#23427;&#20204;&#30340;&#20849;&#21516;&#28857;&#65306;
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#37117;&#25903;&#25345;&#21322;&#21452;&#24037;&#32972;&#21387;(Back pressure)&#12290;</li><li class="listitem">&#37117;&#25903;&#25345;&#21452;&#24037;&#27169;&#24335;&#30340;802.3 &#27969;&#25511;(Flow ctrl)&#12290;</li><li class="listitem">&#37117;&#25903;&#25345;I/O&#25968;&#25454;&#20256;&#36755;(ISA)&#27169;&#24335;&#12290;</li><li class="listitem">&#37117;&#25903;&#25345;&#21796;&#37266;&#24103;(Wakeup frame)&#12290;</li><li class="listitem">&#37117;&#25903;&#25345;EEPROM&#30340;&#35835;&#20889;&#37197;&#32622;&#12290;</li><li class="listitem">&#20860;&#23481;3.3V&#21644;5V&#30005;&#21387;&#27169;&#24335;&#12290;</li><li class="listitem">&#37117;&#25903;&#25345;&#30465;&#30005;&#27169;&#24335;&#12290;</li><li class="listitem">&#23436;&#20840;&#30456;&#21516;&#30340;&#23492;&#23384;&#22120;&#37197;&#32622;&#26041;&#24335;&#12290;</li></ul></div>
<div class="figure"><a name="idp81900972"></a><p class="title"><b>&#22270; 125. DM9000A&#21151;&#33021;&#22270;</b></p><div class="figure-contents"><div><img src="images/mdio/dm9000a.gif" alt="DM9000A&#21151;&#33021;&#22270;"></div></div></div><br class="figure-break">
</div>
<div class="sect2" title="22.7. DM9000A&#31616;&#20171;"><div class="titlepage"><div><div><h3 class="title"><a name="idp81901716"></a>22.7. DM9000A&#31616;&#20171;</h3></div></div></div>
DM9000A &#26159;&#21488;&#28286;Davicom&#20844;&#21496;&#25512;&#20986;&#30340;&#19968;&#27454;10/100M&#33258;&#36866;&#24212;&#30340;&#20197;&#22826;&#32593;&#25511;&#21046;&#33455;&#29255;&#12290;&#20854;&#22522;&#26412;&#29305;&#24449;&#22914;&#19979;&#65306;
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#20869;&#23884;16K Bytes&#30340;SRAM&#29992;&#20110;&#25509;&#25910;&#21457;&#36865;&#30340;FIFO&#32531;&#23384;&#12290;&#20854;&#20013;&#21069;3K&#29992;&#20110;&#25968;&#25454;&#21457;&#36865;&#65292;&#20854;&#20313;13K&#29992;&#20110;&#25968;&#25454;&#25509;&#25910;&#12290;</li><li class="listitem">&#25903;&#25345;8/16bit&#20004;&#31181;&#33455;&#29255;&#24037;&#20316;&#27169;&#24335;&#12290;</li><li class="listitem">&#36890;&#36807;HP&#35748;&#35777;&#30340;AUTO-Mdix&#21151;&#33021;&#12290;</li><li class="listitem">&#25903;&#25345;TCP/IP&#21152;&#36895;(IPv4 Checksum Offload)&#20943;&#36731;CPU&#36127;&#25285;&#65292;&#25552;&#39640;&#25968;&#25454;&#21534;&#21520;&#37327;&#12290;</li><li class="listitem">&#36981;&#24490;802.3&#20197;&#22826;&#32593;&#20256;&#36755;&#21327;&#35758;&#65292;&#24182;&#38598;&#25104;EEPROM&#25509;&#21475;&#65292;&#23454;&#29616;&#33258;&#21160;&#21021;&#22987;&#21270;&#12290;</li></ul></div>
<div class="figure"><a name="idp81903748"></a><p class="title"><b>&#22270; 126. DM9000A&#25509;&#32447;&#22270;</b></p><div class="figure-contents"><div><img src="images/mdio/link.gif" alt="DM9000A&#25509;&#32447;&#22270;"></div></div></div><br class="figure-break">
<p>
S3C6410 SROM&#25511;&#21046;&#22120;&#65288;SROMC&#65289;&#25903;&#25345;&#22806;&#37096;8&#65292;16&#20301;NOR Flash&#65292;PROM&#65292;SRAM&#23384;&#20648;&#22120;&#12290;&#32780;DM9000A&#23601;&#25346;&#36733;&#21040;&#35813;&#25511;&#21046;&#22120;&#24635;&#32447;&#12290;&#35813;&#25511;&#21046;&#22120;&#25903;&#25345;6&#20010;&#39029;&#65292;&#27599;&#39029;&#39640;&#36798;128M&#30340;&#22320;&#22336;&#31354;&#38388;&#12290;&#25903;&#25345;&#23383;&#33410;&#21644;&#21322;&#23383;&#23384;&#21462;&#30340;&#22806;&#37096;&#23384;&#20648;&#22120;&#12290;&#27599;&#20010;&#39029;&#23545;&#24212;&#19968;&#20010;&#22806;&#23384;&#35774;&#22791;&#65292;&#27599;&#20010;&#22806;&#26449;&#21448;&#38656;&#35201;&#19968;&#20010;&#29255;&#36873;&#20449;&#21495;&#12290;&#25152;&#20197;&#24403;&#38656;&#35201;&#35775;&#38382;&#26576;&#20010;&#22320;&#22336;&#26102;&#65292;&#35813;&#22320;&#22336;&#33853;&#22312;&#21738;&#20010;&#22359;&#65292;&#23601;&#20915;&#23450;&#20102;&#21738;&#20010;&#29255;&#36873;&#20449;&#21495;&#34987;&#20351;&#33021;&#12290;&#36825;&#37324;&#20197;DM9000A&#23545;&#24212;SROMC Bank1&#20026;&#20363;&#12290;
</p><pre class="programlisting">
&#22320;&#22336;&#33539;&#22260;                    &#22823;&#23567;     &#25551;&#36848;
0x1000_0000 0x17FF_FFFF 128MB SROMC Bank 0
0x1800_0000 0x1FFF_FFFF 128MB SROMC Bank 1
0x2000_0000 0x27FF_FFFF 128MB SROMC Bank 2
0x2800_0000 0x2FFF_FFFF 128MB SROMC Bank 3
0x3000_0000 0x37FF_FFFF 128MB SROMC Bank 4
0x3800_0000 0x3FFF_FFFF 128MB SROMC Bank 5
</pre><p>
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">&#20180;&#32454;&#35266;&#23519;DM9000A&#25509;&#32447;&#22270;&#65292;SD0-14&#19982;SROM&#25511;&#21046;&#22120;&#25968;&#25454;&#24635;&#32447;&#30340;&#20302;16&#20301;DATA0-15&#30456;&#36830;&#65292;&#25152;&#20197;&#36825;&#37324;&#37319;&#29992;16&#20301;&#20256;&#36755;&#27169;&#24335;&#12290;</li><li class="listitem">SROM&#25511;&#21046;&#22120;&#22320;&#22336;&#24635;&#32447;&#21482;&#20351;&#29992;&#20102;ADDR2&#65292;&#20854;&#20182;&#22320;&#22336;&#24182;&#27809;&#26377;&#20351;&#29992;&#12290;DM9000A&#24182;&#19981;&#20351;&#29992;&#22320;&#22336;&#24635;&#32447;&#26469;&#20256;&#36755;&#22320;&#22336;&#32473;CPU&#65292;&#32780;&#26159;&#36890;&#36807;&#25968;&#25454;&#24635;&#32447;&#12290;&#24403;CMD&#20026;&#20302;&#30005;&#24179;&#26102;&#65292;&#25968;&#25454;&#32447;&#19978;&#25918;&#30340;&#26159;&#38656;&#35201;&#25805;&#20316;&#30340;&#20869;&#37096;&#23492;&#23384;&#22120;&#30340;&#22320;&#22336;&#65307;&#24403;CMD&#20026;&#39640;&#30005;&#24179;&#26102;&#65292;&#25968;&#25454;&#21521;&#19978;&#25918;&#30340;&#25165;&#26159;&#30495;&#27491;&#38656;&#35201;&#20256;&#36865;&#30340;&#25968;&#25454;&#12290;</li><li class="listitem">&#22914;&#26524;CPU&#25351;&#20196;&#20013;&#30340;&#22320;&#22336;&#20013;&#30340;ADDR2&#20301;&#20026;&#20302;&#30005;&#24179;&#65292;&#37027;&#20040;&#20889;&#20986;&#30340;&#26159;&#22320;&#22336;&#65307;&#24403;CPU&#25351;&#20196;&#20013;&#30340;&#22320;&#22336;&#26159;&#39640;&#30005;&#24179;&#65292;&#37027;&#20040;&#35835;&#20889;&#30340;&#26159;&#25968;&#25454;&#12290;&#25152;&#20197;&#21487;&#20197;&#20511;&#29992;&#36825;&#37324;&#30340;SROMC Bank1&#30340;&#22522;&#22320;&#22336;0x1800_0000&#20316;&#20026;&#20889;&#20869;&#37096;&#23492;&#23384;&#22120;&#22320;&#22336;&#30340;&#22320;&#22336;&#65292;&#32780;0x18000004&#20316;&#20026;&#35835;&#20889;&#25968;&#25454;&#30340;&#22522;&#22320;&#22336;&#12290;</li><li class="listitem">&#24635;&#32447;&#19978;&#30340;&#22320;&#22336;&#35793;&#30721;&#22120;&#20250;&#26681;&#25454;&#25351;&#20196;&#35831;&#27714;&#30340;&#22320;&#22336;&#26469;&#25191;&#34892;&#29255;&#36873;&#65292;&#25152;&#20197;&#24403;&#21457;&#29616;0x1800 0000&#21644;0x1800 0004&#33853;&#20837;Bank1&#26102;&#65292;&#21017;&#20351;&#33021;CSN1&#29255;&#36873;&#20449;&#21495;&#65292;&#36825;&#23454;&#29616;&#20102;&#23545;SROM&#25511;&#21046;&#22120;&#30340;&#22797;&#29992;&#12290;</li><li class="listitem">&#26080;&#35770;&#26159;&#35835;&#25968;&#25454;&#36824;&#26159;&#20889;&#25968;&#25454;&#37117;&#38656;&#35201;&#20004;&#20010;&#27493;&#39588;&#65306;&#20889;DM9000A&#23492;&#23384;&#22120;&#30340;&#20559;&#31227;&#22320;&#22336;&#21040;0x1800 0000&#65292;&#28982;&#21518;&#20877;&#35835;(&#20889;)0x1800 0004&#12290;</li></ul></div><p>
&#22522;&#20110;&#19978;&#36848;&#29702;&#35770;&#20171;&#32461;&#65292;&#36825;&#37324;&#30475;&#19968;&#19979;&#35835;&#20889;DM9000A&#23492;&#23384;&#22120;&#30340;&#30456;&#20851;&#20989;&#25968;&#12290;
</p><pre class="programlisting">
static u8 ior(board_info_t *db, int reg)
{
	writeb(reg, db-&gt;io_addr);
	return readb(db-&gt;io_data);
}

static void iow(board_info_t *db, int reg, int value)
{
	writeb(reg, db-&gt;io_addr);
	writeb(value, db-&gt;io_data);
}
</pre><p>
ior&#21644;iow&#20998;&#21035;&#23545;reg&#36827;&#34892;&#35835;&#21644;&#20889;&#12290;&#23427;&#20204;&#30340;&#31532;&#19968;&#27493;&#24635;&#26159;&#20889;&#20869;&#37096;&#23492;&#23384;&#22120;&#30340;&#22320;&#22336;&#21040;io_addr(0x1800 0000&#23545;&#24212;&#30340;&#34394;&#25311;&#22320;&#22336;)&#65292;&#25509;&#30528;&#23601;&#26159;&#35835;&#25110;&#32773;&#20889;value&#21040;io_data(0x1800 0004&#23545;&#24212;&#30340;&#34394;&#25311;&#22320;&#22336;)&#12290;writeb&#21644;readb&#32771;&#34385;&#20102;&#23383;&#33410;&#24207;&#30340;&#38382;&#39064;&#12290;
</p>
<p>&#31995;&#32479;&#19978;&#30005;&#26102;&#65292;S3C6410&#36890;&#36807;&#24635;&#32447;&#37197;&#32622;DM9000A&#20869;&#37096;&#32593;&#32476;&#25511;&#21046;&#23492;&#23384;&#22120;NCR&#65292;&#20013;&#26029;&#23492;&#23384;&#22120;ISR&#31561;&#65292;&#23436;&#25104;DM9000A&#30340;&#21021;&#22987;&#21270;&#12290;&#38543;&#21518;&#23427;&#36827;&#20837;&#25968;&#25454;&#25910;&#21457;&#31561;&#24453;&#29366;&#24577;&#12290;&#24403;S3C6410&#21521;&#20197;&#22826;&#32593;&#21457;&#36865;&#25968;&#25454;&#26102;&#65292;&#24819;&#23558;&#25968;&#25454;&#25171;&#21253;&#25104;UDP&#65292;TCP&#31561;IP&#25968;&#25454;&#21253;&#65292;&#28982;&#21518;&#36890;&#36807;16bit&#24635;&#32447;&#21457;&#36865;&#21040;DM9000A&#30340;&#25968;&#25454;&#21457;&#36865;&#32531;&#23384;&#20013;&#65292;&#25509;&#30528;&#23558;&#25968;&#25454;&#38271;&#24230;&#31561;&#20449;&#24687;&#22635;&#20805;&#21040;DM9000A&#30340;&#30456;&#24212;&#23492;&#23384;&#22120;&#20869;&#65292;&#20351;&#33021;&#21457;&#36865;&#12290;
</p>
<p>
&#24403;DM9000A&#25509;&#25910;&#21040;&#22806;&#37096;&#32593;&#32476;&#30340;&#25968;&#25454;&#21253;&#26159;&#65292;&#39318;&#30456;&#26816;&#27979;&#25968;&#25454;&#21253;&#30340;&#21512;&#27861;&#24615;&#65292;&#22914;&#26524;&#24103;&#22836;&#26631;&#24535;&#26377;&#38169;&#25110;&#23384;&#22312;CRC&#26657;&#39564;&#22833;&#36133;&#65292;&#21017;&#23558;&#35813;&#25968;&#25454;&#21253;&#20002;&#24323;&#12290;&#21542;&#21017;&#23558;&#25968;&#25454;&#24103;&#32531;&#23384;&#21040;&#20869;&#37096;&#30340;SRAM&#20013;&#65292;&#24182;&#36890;&#36807;&#20013;&#26029;&#26631;&#24535;&#20301;&#36890;&#30693;S3C6410&#65292;&#28982;&#21518;CPU&#36890;&#36807;&#35835;&#21462;&#32531;&#23384;&#21306;&#25509;&#25910;&#25968;&#25454;&#12290;
</p><div class="figure"><a name="idp81910148"></a><p class="title"><b>&#22270; 127. &#25968;&#25454;&#25910;&#21457;&#21644;&#37197;&#32622;&#22270;</b></p><div class="figure-contents"><div><img src="images/mdio/level.gif" alt="&#25968;&#25454;&#25910;&#21457;&#21644;&#37197;&#32622;&#22270;"></div></div></div><p><br class="figure-break">
</p>
</div>
<div class="sect2" title="22.8. &#27880;&#20876;DM9000A&#35774;&#22791;"><div class="titlepage"><div><div><h3 class="title"><a name="idp81910532"></a>22.8. &#27880;&#20876;DM9000A&#35774;&#22791;</h3></div></div></div>
&#27880;&#20876;&#35774;&#22791;&#30340;&#36807;&#31243;&#23601;&#26159;&#20026;&#35774;&#22791;&#20998;&#37197;&#36164;&#28304;&#30340;&#36807;&#31243;&#65292;&#21516;&#26102;&#20026;&#39537;&#21160;&#30340;&#21152;&#36733;&#20570;&#20934;&#22791;&#12290;DM9000A&#30340;&#35774;&#22791;&#23450;&#20041;&#27839;&#29992;&#20102;DM9000&#30340;&#23450;&#20041;&#65292;&#26174;&#28982;&#23427;&#26159;&#36890;&#29992;&#30340;&#12290;
<pre class="programlisting">
arch/arm/mach-s3c6400/include/mach/map.h
#define S3C64XX_PA_DM9000	(0x18000000)
#define S3C64XX_SZ_DM9000	SZ_1M
#define S3C64XX_VA_DM9000	S3C_ADDR(0x03b00300)

arch/arm/plat-s3c64xx/devs.c
#define DM9000_ETH_IRQ_EINT0    IRQ_EINT(7)

static struct resource dm9000_resources_cs1[] = {
    [0] = {
        .start  = S3C64XX_VA_DM9000,
        .end    = S3C64XX_VA_DM9000 + S3C64XX_SZ_DM9000 - 1,
        .flags  = IORESOURCE_MEM,
    },
    [1] = {
        .start  = (DM9000_ETH_IRQ_EINT0),
        .end    = (DM9000_ETH_IRQ_EINT0),
        .flags  = IORESOURCE_IRQ,
    },
};
</pre>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">dm9000_resources_cs1&#23450;&#20041;&#20102;&#20004;&#31867;&#36164;&#28304;&#65306;&#22806;&#35774;&#20869;&#23384;&#22320;&#22336;&#21644;7&#21495;&#20013;&#26029;&#12290;</li><li class="listitem">S3C64XX_PA_DM9000&#26159;DM9000A&#25152;&#25509;&#30340;SROM&#25511;&#21046;&#22120;&#23545;&#24212;BANK1&#30340;&#36215;&#22987;&#29289;&#29702;&#22320;&#22336;&#12290;S3C64XX_VA_DM9000&#21017;&#26159;&#26144;&#23556;&#21040;&#30340;&#34394;&#25311;&#22320;&#22336;&#12290;</li><li class="listitem">DM9000_ETH_IRQ_EINT0&#23450;&#20041;&#20102;DM9000A&#20351;&#29992;&#30340;&#20013;&#26029;&#21495;&#65292;&#36825;&#37324;&#20351;&#29992;7&#21495;&#20013;&#26029;&#65292;&#23427;&#22312;S3C6410&#20013;&#34987;&#20445;&#30041;&#19979;&#26469;&#12290;</li></ul></div>
<pre class="programlisting">
static struct dm9000_plat_data dm9000_setup_cs1 = {
    .flags          = DM9000_PLATF_16BITONLY
};

struct platform_device s3c_device_dm9000_cs1 = {
    .name           = "dm9000_con201",
    .id             = 0,
    .num_resources  = ARRAY_SIZE(dm9000_resources_cs1),
    .resource       = dm9000_resources_cs1,
    .dev            = {
        .platform_data = &amp;dm9000_setup_cs1,
    }
};
</pre>
s3c_device_dm9000_cs1&#20013;&#23450;&#20041;&#20102;&#35774;&#22791;&#21517;&#65292;&#23427;&#26159;&#38750;&#24120;&#20851;&#38190;&#30340;&#19968;&#20010;&#21442;&#25968;&#65292;&#22240;&#20026;&#22312;&#39537;&#21160;&#27880;&#20876;&#26102;&#65292;&#23558;&#26681;&#25454;&#36825;&#20010;&#21517;&#31216;&#26469;&#26597;&#25214;&#35774;&#22791;&#12290;
DM9000A&#30340;&#35774;&#22791;&#36890;&#36807;platform&#35774;&#22791;&#27880;&#20876;&#23376;&#31995;&#32479;&#36827;&#34892;&#27880;&#20876;&#12290;
<pre class="programlisting">
arch/arm/mach-s3c6410/mach-smdk6410.c
static struct platform_device *smdk6410_devices[] __initdata = {
......
        &amp;s3c_device_dm9000_cs1,
......
};
</pre>
&#22312;smdk6410_machine_init&#20989;&#25968;&#20013;&#65292;&#23558;&#23545;smdk6410_devices&#25968;&#32452;&#20013;&#30340;&#25152;&#26377;&#35774;&#22791;&#36827;&#34892;&#27880;&#20876;&#65306;
<pre class="programlisting">
platform_add_devices(smdk6410_devices, ARRAY_SIZE(smdk6410_devices));
</pre>
<div class="figure"><a name="idp81915540"></a><p class="title"><b>&#22270; 128. platform&#35774;&#22791;&#19982;&#36890;&#29992;&#35774;&#22791;&#32467;&#26500;&#20851;&#31995;</b></p><div class="figure-contents"><div><img src="images/mdio/regdev.gif" alt="platform&#35774;&#22791;&#19982;&#36890;&#29992;&#35774;&#22791;&#32467;&#26500;&#20851;&#31995;"></div></div></div><br class="figure-break">
&#25152;&#26377;&#36890;&#36807;platform_add_devices&#37117;&#23558;&#35843;&#29992;platform_device_register&#23436;&#25104;&#35774;&#22791;&#30340;&#27880;&#20876;&#65292;&#36825;&#20123;&#34987;&#27880;&#20876;&#30340;&#35774;&#22791;&#24635;&#26159;&#34987;&#25346;&#36733;&#21040;&#19968;&#20010;&#21517;&#20026;platform_bus&#30340;&#34394;&#25311;&#24635;&#32447;&#35774;&#22791;&#19978;&#12290;&#36825;&#20010;&#34394;&#25311;&#35774;&#22791;&#21482;&#26377;&#19968;&#20010;&#21517;&#23383;&#12290;&#32780;&#24635;&#32447;&#31867;&#22411;&#24635;&#26159;platform_bus_type&#12290;
<pre class="programlisting">
struct device platform_bus = {
	.bus_id		= "platform",
};

struct bus_type platform_bus_type = {
	.name		= "platform",
	.dev_attrs	= platform_dev_attrs,
	.match		= platform_match,
	.uevent		= platform_uevent,
	.pm		= PLATFORM_PM_OPS_PTR,
};
</pre>
<div class="figure"><a name="idp81917132"></a><p class="title"><b>&#22270; 129. platform&#35774;&#22791;&#27880;&#20876;&#27969;&#31243;&#22270;</b></p><div class="figure-contents"><div><img src="images/mdio/regdev_call.gif" alt="platform&#35774;&#22791;&#27880;&#20876;&#27969;&#31243;&#22270;"></div></div></div><br class="figure-break">
</div>
<div class="sect2" title="22.9. &#27880;&#20876;&#32593;&#21345;&#39537;&#21160;"><div class="titlepage"><div><div><h3 class="title"><a name="idp81917764"></a>22.9. &#27880;&#20876;&#32593;&#21345;&#39537;&#21160;</h3></div></div></div>
<p>
Linux&#25805;&#20316;&#31995;&#32479;&#20013;&#65292;&#26681;&#25454;&#22806;&#22260;&#35774;&#22791;&#30340;&#19981;&#21516;&#65292;&#20998;&#20026;&#19977;&#31867;&#35774;&#22791;&#39537;&#21160;&#65306;&#23383;&#31526;&#35774;&#22791;&#39537;&#21160;(&#38190;&#30424;,LCD&#31561;)&#65307;&#22359;&#35774;&#22791;(&#22914;&#30828;&#30424;&#31561;)&#39537;&#21160;&#21644;&#32593;&#32476;&#35774;&#22791;&#39537;&#21160;(&#22914;&#32593;&#21345;)&#12290;
</p><div class="figure"><a name="idp81918444"></a><p class="title"><b>&#22270; 130. DM9000A&#39537;&#21160;&#32467;&#26500;&#22270;</b></p><div class="figure-contents"><div><img src="images/mdio/regdrv.gif" alt="DM9000A&#39537;&#21160;&#32467;&#26500;&#22270;"></div></div></div><p><br class="figure-break">
</p><div class="figure"><a name="idp81919028"></a><p class="title"><b>&#22270; 131. DM9000A&#39537;&#21160;&#27880;&#20876;&#27969;&#31243;&#22270;</b></p><div class="figure-contents"><div><img src="images/mdio/regdrv_call.gif" alt="DM9000A&#39537;&#21160;&#27880;&#20876;&#27969;&#31243;&#22270;"></div></div></div><p><br class="figure-break">
&#22312;driver_probe_device&#20989;&#25968;&#20013;&#23558;&#35843;&#29992;&#39537;&#21160;&#24635;&#32447;&#23545;&#24212;&#30340;&#21305;&#37197;&#20989;&#25968;&#36824;&#21305;&#37197;&#39537;&#21160;&#21644;&#35774;&#22791;&#65292;&#26174;&#28982;&#36825;&#37324;&#20351;&#29992;&#30340;&#23601;&#26159;&#39537;&#21160;&#21517;&#21644;&#35774;&#22791;&#21517;&#12290;
</p><pre class="programlisting">
static int platform_match(struct device *dev, struct device_driver *drv)
{
	struct platform_device *pdev;

	pdev = container_of(dev, struct platform_device, dev);
	return (strncmp(pdev-&gt;name, drv-&gt;name, BUS_ID_SIZE) == 0);
}
</pre><p>
&#19968;&#26086;&#21305;&#37197;&#65292;&#23558;&#36890;&#36807;really_probe&#20989;&#25968;&#35843;&#29992;&#30495;&#27491;&#30340;&#39537;&#21160;&#25506;&#27979;&#20989;&#25968;&#65292;&#36825;&#37324;&#23601;&#26159;dm9000_probe&#12290;
	</p>	
<div class="sect3" title="22.9.1. DM9000A&#25506;&#27979;&#20989;&#25968;"><div class="titlepage"><div><div><h4 class="title"><a name="idp81920724"></a>22.9.1. DM9000A&#25506;&#27979;&#20989;&#25968;</h4></div></div></div>
<p>
&#25506;&#27979;&#20989;&#25968;&#20027;&#35201;&#23454;&#29616;&#30828;&#20214;&#20197;&#22826;&#32593;&#25511;&#21046;&#22120;&#30340;&#30456;&#20851;&#29615;&#22659;&#37197;&#32622;&#65292;&#21457;&#29616;&#65292;&#39564;&#35777;&#65292;&#21021;&#22987;&#21270;&#21644;&#27880;&#20876;&#65292;&#24182;&#20135;&#29983;&#19968;&#20010;&#21547;&#31169;&#26377;&#25968;&#25454;&#30340;struct net_device&#30340;&#25968;&#25454;&#32467;&#26500;&#65306;&#23427;&#23545;&#24212;&#20869;&#26680;&#23545;&#35813;&#20197;&#22826;&#32593;&#25511;&#21046;&#22120;&#30340;&#25277;&#35937;&#12290;
</p>
<div class="sect4" title="22.9.1.1. &#37197;&#32622;&#24635;&#32447;&#21644;&#20013;&#26029;"><div class="titlepage"><div><div><h5 class="title"><a name="idp81921412"></a>22.9.1.1. &#37197;&#32622;&#24635;&#32447;&#21644;&#20013;&#26029;</h5></div></div></div>
&#30001;&#20110;DM9000A&#26159;&#25346;&#36733;&#21040;SROMC&#24635;&#32447;&#19978;&#30340;&#65292;&#32780;&#35813;&#24635;&#32447;&#21448;&#25903;&#25345;6&#20010;&#39029;&#65292;&#27599;&#20010;&#39029;&#23545;&#24212;&#19968;&#20010;&#22806;&#37096;&#35774;&#22791;&#12290;&#36825;&#37324;&#30340;DM9000A&#23545;&#24212;Bank1&#12290;&#39318;&#20808;&#38656;&#35201;&#37197;&#32622;Bank1&#30340;&#24635;&#32447;&#23485;&#24230;&#65292;&#36825;&#37324;&#38656;&#35201;&#37197;&#32622;&#25104;16bits&#12290;
<pre class="programlisting">
&#23492;&#23384;&#22120;        &#22320;&#22336;   &#35835;/&#20889;        &#25551;&#36848;                &#22797;&#20301;&#20540;
SROM_BW  0x70000000   &#35835;/&#20889; SROM&#24635;&#32447;&#23485;&#24230;&#21644;&#31561;&#24453;&#25511;&#21046; 0x0000_000x

SROM_BW      &#20301;                   &#25551;&#36848;                          &#21021;&#22987;&#29366;&#24577;
ByteEnable1 [7] nWBE/nBE(&#29992;&#20110;UB/LB) &#25511;&#21046;&#65292;&#29992;&#20110;&#23384;&#20648;&#22120;Bank1&#12290;
                0 = &#19981;&#20351;&#29992;UB/LB (XrnWBE[1:0]&#19987;&#38376;&#30340;nWBE[1:0])
                1 =&#20351;&#29992;UB/LB (XrnWBE[1:0]&#19987;&#38376;&#30340;nBE[1:0]            0
WaitEnable1 [6] &#31561;&#24453;&#20351;&#33021;&#25511;&#21046;&#65292;&#29992;&#20110;&#23384;&#20648;&#22120;Bank1
                0=WAIT &#31105;&#27490; 1=WAIT &#20351;&#33021;                            0
Reserved    [5]                &#20445;&#30041;                                0
DataWidth1  [4] &#25968;&#25454;&#24635;&#32447;&#23485;&#24230;&#25511;&#21046;&#65292;&#29992;&#20110;&#23384;&#20648;&#22120;Bank1
                  0=8 &#20301; 1=16 &#20301;                                   0
</pre>
&#39318;&#20808;&#23558;SROM_BW[7:4]&#35774;&#32622;&#20026;0b0001&#65292;&#36825;&#30456;&#24403;&#20110;&#32622;DataWidth1&#20026;1&#65292;&#25152;&#20197;&#36825;&#37324;&#35774;&#32622;&#25968;&#25454;&#24635;&#32447;&#23485;&#24230;&#20026;16bits&#12290;
<pre class="programlisting">
	tmp = __raw_readl(S3C64XX_SROM_BW);
	tmp &amp;=~(0xF&lt;&lt;4);
	tmp |= (1&lt;&lt;4);
	__raw_writel(tmp, S3C64XX_SROM_BW);
</pre>
&#25509;&#30528;&#37197;&#32622;SROM Bank1&#30340;&#39029;&#25511;&#21046;&#23492;&#23384;&#22120;&#12290;&#36825;&#19982;&#35835;&#20889;&#25152;&#38656;&#30340;&#26102;&#24207;&#21608;&#26399;&#26377;&#20851;&#12290;
<pre class="programlisting">
&#23492;&#23384;&#22120;        &#22320;&#22336;    &#35835;/&#20889;            &#25551;&#36848;                &#22797;&#20301;&#20540;
SROM_BC1 0x70000008   &#35835;/&#20889;     SROM Bank1 &#25511;&#21046;&#23492;&#23384;&#22120;     0x000F_0000
</pre>

<pre class="programlisting">
	__raw_writel(~(0xFFFFFFFF&lt;&lt;0), S3C64XX_SROM_BC1);
	__raw_writel((0x0&lt;&lt;28)|(0x4&lt;&lt;24)|(0xd&lt;&lt;16)|(0x1&lt;&lt;12)|(0x4&lt;&lt;8)|(0x6&lt;&lt;4)|(0x0&lt;&lt;0), S3C64XX_SROM_BC1);
</pre>
&#25509;&#19979;&#26469;&#37197;&#32622;&#22806;&#37096;&#20013;&#26029;&#65292;&#30001;&#20110;&#35813;pin&#26159;&#22797;&#29992;&#30340;&#65292;&#26082;&#21487;&#20197;&#20316;&#20026;GPIO&#30340;&#36755;&#20837;&#36755;&#20986;&#29992;&#65292;&#21448;&#21487;&#20197;&#20316;&#20026;&#22806;&#37096;&#20013;&#26029;&#20351;&#29992;&#65292;&#23545;&#24212;&#30340;&#37197;&#32622;&#23492;&#23384;&#22120;&#26159;S3C64XX_GPNCON&#12290;
<pre class="programlisting">
	/* GPN7 to EINT */
	writel((readl(S3C64XX_GPNCON) &amp; ~(0x3 &lt;&lt;14)) | (0x2 &lt;&lt; 14), S3C64XX_GPNCON);	
	writel((readl(S3C64XX_GPNPUD) &amp;~(0x3&lt;&lt;14)),S3C64XX_GPNPUD);

	/* EINT7 to high level triggered */
	writel((readl(S3C64XX_EINT0CON0) &amp; ~(0x7 &lt;&lt;12)) | (0x1 &lt;&lt; 12), S3C64XX_EINT0CON0);		

	writel((readl(S3C64XX_EINT0PEND)&amp;~(0x1&lt;&lt;7)),S3C64XX_EINT0PEND);	
	writel(readl(S3C64XX_EINT0MASK) &amp; ~(0x1 &lt;&lt; 7), S3C64XX_EINT0MASK);	
</pre>
&#26368;&#21518;S3C64XX_EINT0CON0&#29992;&#26469;&#37197;&#32622;&#39640;&#30005;&#24179;&#35302;&#21457;&#65292;&#24182;&#28165;&#38500;&#35813;&#20013;&#26029;&#23545;&#24212;&#30340;&#25346;&#36215;&#23492;&#23384;&#22120;PEND&#12290;&#36890;&#36807;S3C64XX_EINT0MASK&#20351;&#33021;&#20013;&#26029;7&#21495;&#20013;&#26029;&#12290;
</div>
<div class="sect4" title="22.9.1.2. &#29983;&#25104;&#34394;&#25311;&#32593;&#21345;"><div class="titlepage"><div><div><h5 class="title"><a name="idp81925348"></a>22.9.1.2. &#29983;&#25104;&#34394;&#25311;&#32593;&#21345;</h5></div></div></div>

</div>
</div>
</div>
</div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s21.html">&#19978;&#19968;&#39029;</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ar01s23.html">&#19979;&#19968;&#39029;</a></td></tr><tr><td width="40%" align="left" valign="top">21. Linux&#35774;&#22791;&#27169;&#22411; </td><td width="20%" align="center"><a accesskey="h" href="index.html">&#36215;&#22987;&#39029;</a></td><td width="40%" align="right" valign="top"> 23. Linux&#27169;&#24335;&#35774;&#35745;</td></tr></table></div></body></html>
